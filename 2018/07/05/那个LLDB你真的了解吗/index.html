<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 那个LLDB你真的了解吗 · 红纸</title><meta name="description" content="那个LLDB你真的了解吗 - HongZhi"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.zhz.io/atom.xml" title="红纸"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nianran" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">那个LLDB你真的了解吗</h1><div class="post-info">Jul 5, 2018</div><div class="post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>曾经有个笑话（身边的真相）。有次，我要回去写代码的时候呢，我无意间说了一句‘我们回去写BUG吧’。然后传为组内佳话。<br>BUG对于我们程序员来说是无所不在的，你想你的代码没有BUG，除非你没写代码。对于我们iOS or macOS 开发的同学们来说，苹果为我们准备了一个非常良好的Debug的生态环境（LLDB）这使得我们能够非常快速，有效的去排除，解决一些问题。</p>
<p>那么本文主要以本人平时的开发习惯/<a href="https://developer.apple.com/videos/play/wwdc2018/412/" target="_blank" rel="noopener">WWDC 2018 Session 412</a>/<a href="https://store.raywenderlich.com/products/advanced-apple-debugging-and-reverse-engineering" target="_blank" rel="noopener">Advaced Apple Debug</a>书中部分内容进行如下总结了一些LLDB的命令</p>
<a id="more"></a>
<h2 id="LLDB"><a href="#LLDB" class="headerlink" title="LLDB"></a>LLDB</h2><p>作为iOS开发者，我们经常回去设置一些断点，当程序运行到这一行的时候，我们就可以进入LLDB的控制台，去打印一些信息，来辅佐我们进行调试工作。但是我们平常只会去使用p/e命令吧？（至少我以前是这样的。）但是我们今天准备来系统的学习一下LLDB那些比较有作用的命令。在LLDB控制面板中打入help，我们可以看到一堆的命令。今天我准备拿出其中几个用的比较多的来进行说明。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Demo代码，下面的说明都会围绕这个代码进行描述</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HZViewController</span> ()</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *string;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) HZModel *model;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">HZViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad</div><div class="line">&#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    <span class="keyword">self</span>.view.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line">    </div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h2 id="expression"><a href="#expression" class="headerlink" title="expression"></a>expression</h2><p>expression作为我们最常用的指令之一，他的作用<em>执行一个表达式，并将表达式的结果作为结果进行输出</em>，expression的完整语法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">expression &lt;cmd-options&gt; -- &lt;expr&gt;</div></pre></td></tr></table></figure></p>
<ul>
<li><cmd-options>: 命令参数选项，可以根据<em>help expression</em>进行查看他有哪些命令集合。</cmd-options></li>
<li><expr>: 表达式部分，也就是代码部分<blockquote>
<p>expression的简写为e，当你使用默认参数的时候可以不用打–这个多余的符号，但是当你使用参数的时候就必须加上。不过一般来说我们无需手动去进行设置。<br>OK，我们来实践一下。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 最初String并没有被初始化（e也可以被当做是一个打印命令来打印信息。）</span></div><div class="line">(lldb) e <span class="keyword">self</span>.string</div><div class="line">(<span class="built_in">NSString</span> *) $<span class="number">6</span> = <span class="literal">nil</span></div><div class="line"><span class="comment">// 这个时候我们去执行一段表达式，去修改string的变量</span></div><div class="line">(lldb) e <span class="keyword">self</span>.string = <span class="string">@"TestString"</span></div><div class="line">(<span class="built_in">NSTaggedPointerString</span> *) $<span class="number">7</span> = <span class="number">0xbf4c3b53c7710e1d</span></div><div class="line"><span class="comment">// 我们去打印这个值</span></div><div class="line">(lldb) po <span class="keyword">self</span>.string</div><div class="line">TestString</div></pre></td></tr></table></figure>
</blockquote>
</expr></li>
</ul>
<h2 id="print"><a href="#print" class="headerlink" title="print"></a>print</h2><p>print相对来说很简单，其实他就是<em>expression – <expr></expr></em>就是一个简化版的e，其简写为p。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> &lt;expr&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(lldb) p <span class="keyword">self</span>.string = <span class="string">@"asd"</span></div><div class="line">(<span class="built_in">NSTaggedPointerString</span> *) $<span class="number">12</span> = <span class="number">0xbf623d41451e6fa4</span> <span class="string">@"\372\346Q\324#\366"</span></div><div class="line">(lldb) po <span class="keyword">self</span>.string</div><div class="line">asd</div></pre></td></tr></table></figure>
<h2 id="po"><a href="#po" class="headerlink" title="po"></a>po</h2><p>如果expression不加任何参数，那么他打印出来的信息都是指针的信息。这对于我们调试来说是非常不方便的。<br>所以expression有一个-O的参数，是用来打印函数对象的，并且他的描述即为，打印具有语言的描述性API。<br>po其实就是<em>expression -O <expr></expr></em>的简写，Xcode团队很人性化的加入了这个东西。当然上面的描述性API就是指的<em>description</em>和<em>debugDescription</em>了。<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//为上面的代码加入以下代码 HZViewController.m中</span></div><div class="line">- (<span class="built_in">NSString</span> *)debugDescription &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@" 类名:%@ \n 属性列表：%@"</span>,<span class="built_in">NSStringFromClass</span>(HZViewController.class),HZViewController.hz_propertyKeys];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// LLDB调试输出</span></div><div class="line">(lldb) po <span class="keyword">self</span> <span class="comment">// 尝试使用po命令还输出self</span></div><div class="line"> 类名:HZViewController </div><div class="line"> 属性列表：(</div><div class="line">    string,</div><div class="line">    model</div><div class="line">)</div><div class="line">(lldb) p <span class="keyword">self</span> </div><div class="line">(HZViewController *) $<span class="number">1</span> = <span class="number">0x00007f934e50f4d0</span></div><div class="line">(lldb) e -O -- <span class="keyword">self</span> <span class="comment">// 对比于po是没有任何区别的</span></div><div class="line"> 类名:HZViewController </div><div class="line"> 属性列表：(</div><div class="line">    string,</div><div class="line">    model</div><div class="line">)</div></pre></td></tr></table></figure></p>
<h2 id="call"><a href="#call" class="headerlink" title="call"></a>call</h2><p>其实还有一个打印命令是call,对比于其他打印命令来说，他有一个优势在于，他能执行多行代码（但是我觉得比较鸡肋，我从来都没用过）。<br>如果单纯使用<em>call <expr></expr></em>的话他跟e/p无差异。但是你单独使用call，就可以键入多行函数，来执行一些定制化的需求。比如下面这个。<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(lldb) po <span class="keyword">self</span>.view.backgroundColor</div><div class="line"> <span class="literal">nil</span></div><div class="line">(lldb) call <span class="comment">// 进入函数输入控制</span></div><div class="line">Enter expressions, then terminate with an empty line to evaluate:</div><div class="line"><span class="number">1</span> <span class="keyword">if</span> (<span class="keyword">self</span>.view.backgroundColor == <span class="literal">nil</span>) &#123;</div><div class="line"><span class="number">2</span> <span class="keyword">self</span>.view.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line"><span class="number">3</span> &#125;</div><div class="line">(lldb) po <span class="keyword">self</span>.view.backgroundColor</div><div class="line"><span class="built_in">UIExtendedGrayColorSpace</span> <span class="number">1</span> <span class="number">1</span></div><div class="line">(lldb) call <span class="keyword">self</span>.view.backgroundColor</div><div class="line">(<span class="built_in">UICachedDeviceWhiteColor</span> *) $<span class="number">10</span> = <span class="number">0x0000600001c46070</span></div><div class="line">(lldb) e <span class="keyword">self</span>.view.backgroundColor</div><div class="line">(<span class="built_in">UICachedDeviceWhiteColor</span> *) $<span class="number">11</span> = <span class="number">0x0000600001c46070</span></div></pre></td></tr></table></figure></p>
<h2 id="p-e-po-call区别"><a href="#p-e-po-call区别" class="headerlink" title="p/e/po/call区别"></a>p/e/po/call区别</h2><table>
<thead>
<tr>
<th>命令</th>
<th>主要区别</th>
<th>函数提示</th>
</tr>
</thead>
<tbody>
<tr>
<td>e</td>
<td>打印属性（基础类型：包含函数类型和变量值，对象类型：包含函数指针）</td>
<td>没有命令行提醒，完全属于盲打</td>
</tr>
<tr>
<td>p</td>
<td>同e</td>
<td>终端会根据当前堆栈，提示属性/函数信息</td>
</tr>
<tr>
<td>po</td>
<td>打印具有平台特性的描述性API（基础类型：打印变量值，对象: 根据描述API输出）</td>
<td>终端会根据当前堆栈，提示属性/函数信息</td>
</tr>
<tr>
<td>call</td>
<td>打印功能同e，但是还具备输入多行表达式的功能</td>
<td>没有命令行提醒，完全属于盲打</td>
</tr>
</tbody>
</table>
<h2 id="断点"><a href="#断点" class="headerlink" title="断点"></a>断点</h2><p>断点设置命令，可能会有人问了，我用Xcode，在函数边上点一下不就有断点了么，要这个命令有个锤子用？那只能说你作死作的还不够多。当你没有源码的时候，这个命令就成了你的救命稻草。举个🌰，我有个砸过壳的IPA包，纯二进制，你只能通过<em>class-dump</em>或者<em>IDA</em>去获取到一些函数信息，然后你就可以悄然的去用这个命令去设置一些断点，调试当前堆栈里的信息。整个APP都在你的掌控之中。OK，废话B多了，脑子要坏掉的，我们继续来看下这个命令。</p>
<blockquote>
<p>breakpoint的缩写为br，后面都会用缩写来进行描写</p>
</blockquote>
<h3 id="br-set"><a href="#br-set" class="headerlink" title="br set"></a>br set</h3><p>breakpoint set命令是用来设置断点的，LLDB提供了很多设置断点的方式。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">breakpoint set &lt;cmd-options&gt;</div></pre></td></tr></table></figure></p>
<p><em>使用 -n 来根据名称来设置一个断点</em><br>给所有的init方法设置上断点。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(lldb) br set -n init</div><div class="line">Breakpoint 3: 3657 locations. // 可以看到设置了3657的断点 2333333</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">3: name = 'init', locations = 3657, resolved = 3657, hit count = 0</div><div class="line">  3.1: where = CoreGraphics`ttf::cvt::init(), address = 0x0000000101042ec6, resolved, hit count = 0 </div><div class="line">  3.2: where = CoreGraphics`ttf::font::init(), address = 0x000000010148c9ca, resolved, hit count = 0 </div><div class="line">  3.3: where = CoreGraphics`ttf::fpgm::init(), address = 0x0000000101063086, resolved, hit count = 0 </div><div class="line">  3.4: where = CoreGraphics`ttf::glyf::init(), address = 0x00000001012bacea, resolved, hit count = 0</div></pre></td></tr></table></figure></p>
<p><em>使用 -f 来根据文件名去配合设置断点</em><br>我只想给HZViewController的init设置断点，其他断点都不要，因为前面设置的断点太多了。<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) br set  -f HZViewController.m -n init</div><div class="line">Breakpoint <span class="number">3</span>: where = HZTest_Example`-[HZViewController init] + <span class="number">20</span> at HZViewController.m:<span class="number">35</span>, address = <span class="number">0x000000010b6eeba4</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>Note: 文件的使用条件是，这个文件中必须包含有init函数。集成的话是不会被标记出来的。会提示<em>WARNING:  Unable to resolve breakpoint to any actual locations.</em></p>
</blockquote>
<p><em>使用 -l 来根据文件来指定断点行数</em><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">26:@property (nonatomic, strong) NSString *string;</div><div class="line">34:- (instancetype)init &#123;</div><div class="line">35:    if (self = [super init]) &#123;</div><div class="line">36:</div><div class="line">37:    &#125;</div><div class="line">38:    return self;</div><div class="line">39:&#125;</div><div class="line">(lldb) br set -l 26 -f HZViewController.m</div><div class="line">Breakpoint 6: 2 locations.</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">6: file = 'HZViewController.m', line = 26, exact_match = 0, locations = 2, resolved = 2, hit count = 0</div><div class="line">  6.1: where = HZTest_Example`-[HZViewController string] + 12 at HZViewController.m:26, address = 0x000000010f3c2f0c, resolved, hit count = 0 </div><div class="line">  6.2: where = HZTest_Example`-[HZViewController setString:] + 49 at HZViewController.m:26, address = 0x000000010f3c2f51, resolved, hit count = 0 </div><div class="line">(lldb) br set -l 35 -f HZViewController.m</div><div class="line">Breakpoint 8: where = HZTest_Example`-[HZViewController init] + 20 at HZViewController.m:35, address = 0x000000010f3c2ba4</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">8: file = 'HZViewController.m', line = 35, exact_match = 0, locations = 1, resolved = 1, hit count = 0</div><div class="line">  8.1: where = HZTest_Example`-[HZViewController init] + 20 at HZViewController.m:35, address = 0x000000010f3c2ba4, resolved, hit count = 0</div></pre></td></tr></table></figure></p>
<blockquote>
<p>Note:如果指定的地方是一个属性，那么就会指定其set和get方法，如果指定的地方是一个空白行的地方，则自动向下寻找第一个存在函数的指定行</p>
</blockquote>
<p>后面其实都是给前面的命令，新增一些功能而准备的。就不一个个去设置了。</p>
<ul>
<li><p><em>-c</em> 用来设置断点条件，比如说我们有时会希望想当一个条件为真的时候，才触发断点操作，那么我们就可以去使用这个东西，对应如果是使用UI去设置的话就是这个选项框</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">br set -n setString: -c string == <span class="string">@"TestString"</span></div></pre></td></tr></table></figure>
<p><img src="/resources/34E7B233E6285A6B512BFD507DA32887.jpg" alt="IMAGE"></p>
</li>
<li><em>-o</em> 来设置单次断点WWDC 2018 Session412中介绍的一点<br><em>-o</em>=<em>–one-shot true</em><br>配合br command add可以达到在某个断点后单次拦截某个函数，有兴趣看怎么操作的可以去看一下这位写的<a href="https://juejin.im/post/5b1cd870e51d4506dc0ac76c" target="_blank" rel="noopener">效率提升爆表的 Xcode 和 LLDB 调试技巧</a></li>
<li><em>-i</em> 设置执行忽略断点次数，对应的UI设置如图所示。<br><img src="/resources/88734A697D8FDFB43E853DA1F467D086.jpg" alt="IMAGE"></li>
</ul>
<table>
<thead>
<tr>
<th>函数</th>
<th>区别</th>
</tr>
</thead>
<tbody>
<tr>
<td>br set -f Test.m –line 12</td>
<td>给某个文件的12行函数加个断点</td>
</tr>
<tr>
<td>br set –name test</td>
<td>给所有test 函数加个断点</td>
</tr>
<tr>
<td>br set –method test</td>
<td>给所有test C++函数加个断点</td>
</tr>
<tr>
<td>br set –selector test</td>
<td>给所有test OC函数加个断点</td>
</tr>
<tr>
<td>br set –shlib Foundation.framework –name test</td>
<td>给Foundation库的test函数加个断点</td>
</tr>
</tbody>
</table>
<h3 id="br-command"><a href="#br-command" class="headerlink" title="br command"></a>br command</h3><p>从上面的set中，我们知道了如何去用代码去设置一个断点。当我们去执行了断点后，我们希望让他去自动的去帮我们去输出一些内容，而不是我们一个个po/e去打印。那么这个command就是为了这个而设计的。从可视化的方式设置的话，就如图所示了。<br><img src="/resources/CD4AB509BE03B60C485114A326132841.jpg" alt="IMAGE"></p>
<blockquote>
<p>Note: 其实Xcode提供了很多种类断点后执行的方式，比如执行一段脚本/发出声音/打印信息等等，我们这边只讲打印Debug信息的内容，跟你在LLDB中打印无异。</p>
</blockquote>
<p><em>br command list</em> 显示某个断点当前的所有可执行项<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(lldb) br command list <span class="number">2</span></div><div class="line">Breakpoint <span class="number">2</span>:</div><div class="line"> po <span class="keyword">self</span></div></pre></td></tr></table></figure></p>
<p><em>br command add</em> 给断点添加一个可执行项<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(lldb) br set -n testGlobalPoint -f HZViewController.m</div><div class="line">Breakpoint <span class="number">3</span>: where = HZTest_Example`-[HZViewController testGlobalPoint] + <span class="number">23</span> at HZViewController.m:<span class="number">52</span>, address = <span class="number">0x0000000105396d27</span></div><div class="line">(lldb) br command add -o <span class="string">"po self"</span> <span class="number">3</span></div><div class="line">(lldb) br command list <span class="number">2</span></div><div class="line">Breakpoint <span class="number">2</span>:</div><div class="line"> po <span class="keyword">self</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>Note: 如果你尝试给一个断点添加多个命令，-o是无法满足的，因为-o是–one-line的意思，他只能添加一行。后续的添加会覆盖前面的。<br>所以你可以直接使用br command add 3 (3是断点标识)<br>当然你可以去给断点加个脚本help br command add。可以看到Apple给我们举了一个添加脚本的🌰。虽然我并不知道这玩意儿有啥鸟用<br>小技巧LLDB中有个关键词是contiune,我们可以键入这个去跳过断点，所以我们输入多行的时候就可以这么玩了,这样会跳过断点，但是又会有合理的Log输出<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(lldb) br command add 3</div><div class="line">Enter your debugger command(s).  Type 'DONE' to end.</div><div class="line">&gt; po self</div><div class="line">&gt; continue</div><div class="line">&gt; DONE</div></pre></td></tr></table></figure></p>
</blockquote>
<p><em>br command delete</em> 删除一个断点的可执行项<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(lldb) br command delete <span class="number">3</span></div><div class="line">(lldb) br command list <span class="number">3</span></div><div class="line">Breakpoint <span class="number">3</span> does not have an associated command.</div></pre></td></tr></table></figure></p>
<h3 id="br-list"><a href="#br-list" class="headerlink" title="br list"></a>br list</h3><p>查看当前设置的断点的列表，enable/disable的都会显示在上面，包含运行期的代码断点和运行前的可视化断点<br>LLDB会默认先读取你在非运行期，设置的断点即在Xcode的函数左边的小箭头，当我们每次设置一次可视化的断点。就会去设置断点文件。<br>文件路径<em>/工程目录//Users/hongzhizhao/Desktop/HZTest/Example/HZTest.xcworkspace/xcuserdata/hongzhizhao.xcuserdatad/xcdebugger/Breakpoints_v2.xcbkptlist</em><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">1: file = '/Users/xxxxx/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 44, exact_match = 0, locations = 1, resolved = 1, hit count = 0</div><div class="line"></div><div class="line">  1.1: where = HZTest_Example`-[HZViewController testGlobalPoint] + 23 at HZViewController.m:44, address = 0x0000000100d42d37, resolved, hit count = 0 </div><div class="line"></div><div class="line">2: file = '/Users/xxxx/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 37, exact_match = 0, locations = 1, resolved = 1, hit count = 1</div><div class="line"></div><div class="line">  2.1: where = HZTest_Example`-[HZViewController viewDidLoad] + 61 at HZViewController.m:37, address = 0x0000000100d42c6d, resolved, hit count = 1</div></pre></td></tr></table></figure></p>
<h3 id="br-delete"><a href="#br-delete" class="headerlink" title="br delete"></a>br delete</h3><p>顾名思义，删除断点。我们可以通过br list中去找到对应的nuber。(包含二级的也可以。)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">breakpoint delete <span class="comment">#number#</span></div></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">(lldb) br set -n init</div><div class="line">Breakpoint 6: 3657 locations.</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">6: name = 'init', locations = 3657, resolved = 3657, hit count = 0</div><div class="line">  6.3656: where = EmailCore`-[ECEncodedWordEncoder init], address = 0x000000011e6caa14, resolved, hit count = 0 </div><div class="line">  6.3657: where = CoreRecents`-[CRRecentContactsLibrary init], address = 0x000000011e6dec27, unresolved, hit count = 0 </div><div class="line">(lldb) br delete 6.3657</div><div class="line">0 breakpoints deleted; 1 breakpoint locations disabled.</div><div class="line">(lldb) br list</div><div class="line">  6.3656: where = EmailCore`-[ECEncodedWordEncoder init], address = 0x000000011e6caa14, resolved, hit count = 0 </div><div class="line">  6.3657: where = CoreRecents`-[CRRecentContactsLibrary init], address = 0x000000011e6dec27, unresolved, hit count = 0  Options: disabled</div></pre></td></tr></table></figure>
<h3 id="br-disable-enable"><a href="#br-disable-enable" class="headerlink" title="br disable/enable"></a>br disable/enable</h3><p>有些时候，我们可能根据具体场景设置了一些断点，但是临时开发的时候我们却不想让其进入断点。OK，我们可以去临时改写这个断点的状态为disable,当我们希望其开启的时候再设置为enable就可以了~，perfect？<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">1: file = '/Users/hongzhizhao/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 44, exact_match = 0, locations = 1, resolved = 1, hit count = 1</div><div class="line">  1.1: where = HZTest_Example`-[HZViewController viewDidLoad] + 61 at HZViewController.m:44, address = 0x0000000105396c1d, resolved, hit count = 1 </div><div class="line">(lldb) br disable 1</div><div class="line">1 breakpoints disabled.</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">1: file = '/Users/hongzhizhao/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 44, exact_match = 0, locations = 1 Options: disabled </div><div class="line">  1.1: where = HZTest_Example`-[HZViewController viewDidLoad] + 61 at HZViewController.m:44, address = 0x0000000105396c1d, unresolved, hit count = 1</div></pre></td></tr></table></figure></p>
<h3 id="br-clear"><a href="#br-clear" class="headerlink" title="br clear"></a>br clear</h3><p>清理指定文件的指定行的断点<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">breakpoint clear -l <span class="meta">#lines# -f #filename#</span></div></pre></td></tr></table></figure></p>
<p>下面命令为</p>
<ul>
<li>查看当前list确实存在一个断点</li>
<li>使用clear命令清除name为5的断点</li>
<li>再次查看当前list，name为5确实被移除了<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">5: file = '/Users/hongzhizhao/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 48, exact_match = 0, locations = 1, resolved = 1, hit count = 0</div><div class="line">  5.1: where = HZTest_Example`-[HZViewController testGlobalPoint] + 23 at HZViewController.m:48, address = 0x000000010da39d37, resolved, hit count = 0 </div><div class="line">(lldb) br clear -l 48 -f "HZViewController.m"</div><div class="line">1 breakpoints cleared:</div><div class="line">5: file = '/Users/hongzhizhao/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 48, exact_match = 0, locations = 1, resolved = 1, hit count = 0</div><div class="line"></div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="br-read-write"><a href="#br-read-write" class="headerlink" title="br read/write"></a>br read/write</h3><p>我们前面讲list的时候，我们讲到过一些存储断点相关的东西，<em>br write -f #file_path#</em>，-f标识断点文件的存储路径。<br>前面说了这么多的断点设置，其实都是运行期的设置，出了运行期，这些设置都是没有了的。所以read/write是一个持久保存的方案。<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(lldb) br write  -f ~/Desktop/a.log</div><div class="line">(lldb) br read  -f ~/Desktop/a.log</div><div class="line">New breakpoints:</div><div class="line">Breakpoint <span class="number">4</span>: where = HZTest_Example`-[HZViewController viewDidLoad] + <span class="number">61</span> at HZViewController.m:<span class="number">44</span>, address = <span class="number">0x0000000105396c1d</span></div><div class="line">Breakpoint <span class="number">5</span>: where = HZTest_Example`-[HZAppDelegate application:didFinishLaunchingWithOptions:] + <span class="number">73</span> at HZAppDelegate.m:<span class="number">16</span>, address = <span class="number">0x0000000105396719</span></div><div class="line">Breakpoint <span class="number">6</span>: where = HZTest_Example`-[HZViewController testGlobalPoint] + <span class="number">23</span> at HZViewController.m:<span class="number">52</span>, address = <span class="number">0x0000000105396d27</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>Note: read并不能读取Xcode使用可视化设置的埋点，可能跟版本有关系吧，可视化埋的断点，是V2版本的。但是使用命令的并没有版本标识，可视化埋点是xml,使用命令保存的却是json文件。另外read并是一个会去替换的更新，而是一个读取后全部添加~</p>
</blockquote>
<h2 id="属性监听-watchpoint"><a href="#属性监听-watchpoint" class="headerlink" title="属性监听 watchpoint"></a>属性监听 watchpoint</h2><p>OK，我们看到了如何去设置一个函数的断点。但是有些时候，我们可能并不满足于函数，需要去监听一些属性的变化。那么有些人就会说，我直接监听set方法不就好了？那么就会有两种情况不会过set方法，1.直接调用的是<em>_</em> 2.这个属性压根就没有getter和setter方式是一个纯只指针的访问形式呢？你监听给我看看？<br>所以watchpoint就是这么一个神奇的东西，说白了他是监听一个内存地址的变化，所以他能够去捕获变量的变化。</p>
<blockquote>
<p>watchpoint 跟breakpoint的命令大致相同，只是一个操作函数，一个操作地址罢了</p>
</blockquote>
<h3 id="watchpoint-set"><a href="#watchpoint-set" class="headerlink" title="watchpoint set"></a>watchpoint set</h3><p><em>watchpoint set variable <var></var></em><br>跟设置函数一样的去设置一个断点<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint set variable self.window</div><div class="line">error: "self" is a pointer and . was used to attempt to access "window". Did you mean "self-&gt;window"?</div><div class="line">(lldb) watchpoint set variable self-&gt;_window</div><div class="line">Watchpoint created: Watchpoint 1: addr = 0x600000ccc110 size = 8 state = enabled type = w</div><div class="line">    watchpoint spec = 'self-&gt;_window'</div><div class="line">    new value: 0x00007fc8b780d600</div></pre></td></tr></table></figure></p>
<blockquote>
<p>由于watchpoint是一个内存块的监听策略，如果我们去写self.window这种表达式，实质是在设置[self setWindow:]方法，那么跟他的定义就大相径庭了。这边举个例子</p>
</blockquote>
<p><em>watchpoint set expression <expr></expr></em><br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint set expression <span class="number">0x00007fc8b780d600</span></div><div class="line">Watchpoint created: Watchpoint <span class="number">2</span>: addr = <span class="number">0x7fc8b780d600</span> size = <span class="number">8</span> state = enabled type = w</div><div class="line">    new value: <span class="number">4440870480</span></div></pre></td></tr></table></figure></p>
<p><em>-w统一参数</em><br>read/write/read_write<br>从字面意思上，我们就可以看出是监听的内容是读还是写还是读写一起监听。默认是写操作</p>
<blockquote>
<p>variable/expression的区别应用<br>variable必须是你进入了某次断点，才能够用使用当前栈中使用的属性去监听<br>expression 你可以通过一些逆向软件来计算偏移量+首地址的形式去得到最终的内存地址</p>
</blockquote>
<h3 id="watchpoint-list"><a href="#watchpoint-list" class="headerlink" title="watchpoint list"></a>watchpoint list</h3><p>这个我们就不多说了，查看当前的watchpoint列表<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint list</div><div class="line">Number of supported hardware watchpoints: 4</div><div class="line">Current watchpoints:</div><div class="line">Watchpoint 1: addr = 0x600000ccc110 size = 8 state = enabled type = w</div><div class="line">    watchpoint spec = 'self-&gt;_window'</div><div class="line">    new value: 0x00007fc8b780d600</div><div class="line">Watchpoint 2: addr = 0x7fc8b780d600 size = 8 state = enabled type = w</div><div class="line">    new value: 4440870480</div></pre></td></tr></table></figure></p>
<blockquote>
<p>这边我们看到使用expression和variable会得到两条结果</p>
</blockquote>
<h3 id="watchpoint-delete"><a href="#watchpoint-delete" class="headerlink" title="watchpoint delete"></a>watchpoint delete</h3><p>删除一个监测点<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) watch delete <span class="number">1</span></div><div class="line"><span class="number">1</span> watchpoints deleted.</div></pre></td></tr></table></figure></p>
<h3 id="watchpoint-disable-enable"><a href="#watchpoint-disable-enable" class="headerlink" title="watchpoint disable/enable"></a>watchpoint disable/enable</h3><p>跟breakpoint一样，他也有一个临时关闭和打开的设置开关<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint disable <span class="number">3</span></div><div class="line"><span class="number">1</span> watchpoints disabled.</div><div class="line">(lldb) watchpoint enable <span class="number">3</span></div><div class="line"><span class="number">1</span> watchpoints enabled.</div></pre></td></tr></table></figure></p>
<h3 id="watchpoint-ignore"><a href="#watchpoint-ignore" class="headerlink" title="watchpoint ignore"></a>watchpoint ignore</h3><p>一个断点在真正被执行前需要被断点几次？<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint ignore -i <span class="number">3</span> <span class="number">3</span></div><div class="line"><span class="number">1</span> watchpoints ignored.</div></pre></td></tr></table></figure></p>
<h3 id="watchpoint-modify"><a href="#watchpoint-modify" class="headerlink" title="watchpoint modify"></a>watchpoint modify</h3><p>当条件为真的时候，采取真正执行断点<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint modify -c <span class="string">"self ==nil"</span> <span class="number">3</span></div><div class="line"><span class="number">1</span> watchpoints modified.</div></pre></td></tr></table></figure></p>
<h3 id="watchpoint-command"><a href="#watchpoint-command" class="headerlink" title="watchpoint command"></a>watchpoint command</h3><p>这个跟breakpoint command 没有任何区别，这边就不去说这个东西了。</p>
<h2 id="控制程序-thread"><a href="#控制程序-thread" class="headerlink" title="控制程序 thread"></a>控制程序 thread</h2><p>说完了如何去调试你的代码，但是有的时候这往往是不够的。我们希望于去控制我们的程序走向。例如一个函数的返回值，会改变程序的走向，那么我希望去改变他的返回值。这个时候我们就可以用到thread这个命令来辅佐我们。我们日常用的step调试，其实都是thread命令，只是Xcode帮我们可视化了罢了。</p>
<h3 id="thread-return"><a href="#thread-return" class="headerlink" title="thread return"></a>thread return</h3><p>return顾名思义，直接使函数return,return后面可以接表达式，来帮助我们返回一些有利于我们调试的东西<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">thread <span class="keyword">return</span> [&lt;expr&gt;]</div></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)testReturn &#123;</div><div class="line">    <span class="built_in">NSString</span> *a = [<span class="keyword">self</span> testReturn] ? <span class="string">@"a"</span> : <span class="string">@"b"</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">BOOL</span>)testReturn &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line">(lldb) thread <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">(lldb) po a</div><div class="line">b</div></pre></td></tr></table></figure>
<h3 id="thread-step-x"><a href="#thread-step-x" class="headerlink" title="thread step-x"></a>thread step-x</h3><p>我们平时的单步调试，其实都来自于这个命令<br><img src="/resources/8D06BDE637F8450D713B1DA6B5814F49.jpg" alt="IMAGE"><br>|命令|作用|<br>|–|–|<br>| thread countinue/c/countinue |等同于第一个按钮，标识程序继续运行|<br>| thread step-over/n/next | 等同于第二个按钮，单步运行 |<br>| thread step-in/s/step | 等同于第三个按钮，进入函数方法内部 源码级别|<br>| thread step-out/finish | 等同于第四个按钮，跳出当前函数 |</p>
<h3 id="thread-jump"><a href="#thread-jump" class="headerlink" title="thread jump"></a>thread jump</h3><p>OK，这玩意儿真的是一个黑魔法。看WWDC2018,断点移动的我一愣一愣的。来感受一下？<br><img src="/resources/64AC4E1386A9032ED73A4E7B68E4B08D.gif =1052x682" alt="未命名.gif"><br>其实这个东西很简单，老早就有了，只是我不知道罢了。<br><em>thread jump -l <linenum></linenum></em>上面的图是可视化的罢了，这个才是实质代码。-l 输入跳转的代码。</p>
<blockquote>
<p>Note:且用且珍惜，这东西有利有弊</p>
</blockquote>
<h3 id="其他东西"><a href="#其他东西" class="headerlink" title="其他东西"></a>其他东西</h3><ul>
<li>thread list 列出当前所有的线程</li>
<li>thread select 选择某个线程</li>
<li>therad until 传入一个行数，让程序执行到这行的时候暂停</li>
<li>thread info 输出当前线程的信息</li>
<li>thread backtrace 断点的函数调用堆栈，默认当前线程</li>
<li>thread plan 用来管理当前线程的执行计划</li>
</ul>
<blockquote>
<p>thread命令虽好，但是随意改变成语的走向，可能会引起一些不必要的麻烦</p>
</blockquote>
<h2 id="查看调用栈-frame"><a href="#查看调用栈-frame" class="headerlink" title="查看调用栈 frame"></a>查看调用栈 frame</h2><p>在我们调试过程中，我们经常能看到，控制台帮我们输出了当前的调用栈内容。其实他对应的就是frame命令。<br><img src="/resources/DEE2D7DF3DC22831BDEE012AE6FAE029.jpg" alt="IMAGE"><br>细心的同学可能会看到一个细节，红框1和红框2是对应的，红框2是用thread backtrace打印出来的。里面的frame其实就是我们这面的frame,我们可以通过<em>frame select <num></num></em>来使用代码切换当前运行的调用栈，跟你手动点现况1的没有任何区别<br><img src="/resources/1520BBE8DC414066748F4082CA2A4DDB.jpg" alt="IMAGE"><br><em>frame variable</em>用来打印当前调用栈内的所有属性<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(lldb) frame variable</div><div class="line">(HZViewController *) <span class="keyword">self</span> = <span class="number">0x00007f8c6540ba90</span></div><div class="line">(SEL) _cmd = <span class="string">"viewDidLoad"</span></div><div class="line">(__NSCFConstantString *) a = <span class="number">0x000000010fffa128</span> <span class="string">@"b"</span></div></pre></td></tr></table></figure></p>
<p><em>frame info</em>打印当前栈的内容<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) frame info</div><div class="line">frame <span class="meta">#0: 0x000000010fff7c64 HZTest_Example`-[HZViewController viewDidLoad](self=0x00007f8c6540ba90, _cmd=<span class="meta-string">"viewDidLoad"</span>) at HZViewController.m:52</span></div></pre></td></tr></table></figure></p>
<h2 id="help-apropos"><a href="#help-apropos" class="headerlink" title="help/apropos"></a>help/apropos</h2><p>当然说了这么多，很多时候我们肯定会忘掉的~啧啧啧，谁还能记住这么多呢，毕竟Xcode帮我们做好了可视化这么好的东西。<br>但是有些时候，我们却不得不去找这些命令，比如逆向的时候。2333333<br>help很简单，帮助我们去打印描述信息的。例如我想知道frame的相关信息，我们就可以这么操作，里面都帮我们写好了<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">(lldb) help frame</div><div class="line">     Commands for selecting and examing the current thread's stack frames.</div><div class="line"></div><div class="line">Syntax: frame &lt;subcommand&gt; [&lt;subcommand-options&gt;]</div><div class="line"></div><div class="line">The following subcommands are supported:</div><div class="line"></div><div class="line">      info     -- List information about the current stack frame in the current</div><div class="line">                  thread.</div><div class="line">      select   -- Select the current stack frame by index from within the</div><div class="line">                  current thread (see 'thread backtrace'.)</div><div class="line">      variable -- Show variables for the current stack frame. Defaults to all</div><div class="line">                  arguments and local variables in scope. Names of argument,</div><div class="line">                  local, file static and file global variables can be</div><div class="line">                  specified. Children of aggregate variables can be specified</div><div class="line">                  such as 'var-&gt;child.x'.</div><div class="line"></div><div class="line">For more help on any particular subcommand, type 'help &lt;command&gt; &lt;subcommand&gt;'.</div></pre></td></tr></table></figure></p>
<p>apropos，是一个搜索命令，帮我们查找有哪些命令可以使用，例如下图这样，我们就能够答应出关于step的所有命令来帮助我们来使用<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(lldb) apropos step</div><div class="line">The following commands may relate to 'step':</div><div class="line">  thread step-in        -- Source level single step, stepping into calls. </div><div class="line">                           Defaults to current thread unless specified.</div><div class="line">  thread step-inst      -- Instruction level single step, stepping into calls. </div><div class="line">                           Defaults to current thread unless specified.</div><div class="line">  thread step-inst-over -- Instruction level single step, stepping over calls. </div><div class="line">                           Defaults to current thread unless specified.</div><div class="line">  thread step-out       -- Finish executing the current stack frame and stop</div><div class="line">                           after returning.  Defaults to current thread unless</div><div class="line">                           specified.</div><div class="line">  thread step-over      -- Source level single step, stepping over calls. </div><div class="line">                           Defaults to current thread unless specified.</div></pre></td></tr></table></figure></p>
<h2 id="Extension"><a href="#Extension" class="headerlink" title="Extension"></a>Extension</h2><h3 id="刷新UI"><a href="#刷新UI" class="headerlink" title="刷新UI"></a>刷新UI</h3><p>即使你改了UI的属性，因为程序暂停，你是无法刷新UI的，但是有个命令可以帮你，这样做你就可以及时的帮助你来改变UI的刷新，即使他在断点的状态<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">e <span class="built_in">CATransaction</span>.flush()</div></pre></td></tr></table></figure></p>
<h3 id="使用别人写好的脚本"><a href="#使用别人写好的脚本" class="headerlink" title="使用别人写好的脚本"></a>使用别人写好的脚本</h3><p>LLDB是支持使用别人写好的命令的，实质语法是使用python写的，这边就不多做介绍了。有兴趣可以去了解一下</p>
<h3 id="别名功能"><a href="#别名功能" class="headerlink" title="别名功能"></a>别名功能</h3><p>很多时候命令很长，我们记不住怎么办。比如那个刷新UI的命令。好长啊，在Session里面，这个人有个恶趣味用🚽来代替那个命令。<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">command alias 🚽 e <span class="built_in">CATransaction</span>.flush()</div></pre></td></tr></table></figure></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.jianshu.com/p/268ecb3cf4c6" target="_blank" rel="noopener">iOS 常用的lldb命令</a><br><a href="https://juejin.im/entry/58c75b258ac24707201369c4" target="_blank" rel="noopener">使用 LLDB 调试 APP</a><br><a href="http://ios.jobbole.com/83393/" target="_blank" rel="noopener">熟练使用 LLDB，让你调试事半功倍</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/06/10/WWDC-2018-412-Advanced-Debugging-With-Xcode-and-LLDB/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'zhz';
var disqus_identifier = '2018/07/05/那个LLDB你真的了解吗/';
var disqus_title = '那个LLDB你真的了解吗';
var disqus_url = 'http://www.zhz.io/2018/07/05/那个LLDB你真的了解吗/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//zhz.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2018 <a href="http://www.zhz.io">HongZhi</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-82278125-1",'auto');ga('send','pageview');</script></body></html>