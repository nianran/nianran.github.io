<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>çº¢çº¸</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.zhz.io/"/>
  <updated>2018-07-05T11:59:04.665Z</updated>
  <id>http://www.zhz.io/</id>
  
  <author>
    <name>HongZhi</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é‚£ä¸ªLLDBä½ çœŸçš„äº†è§£å—</title>
    <link href="http://www.zhz.io/2018/07/05/%E9%82%A3%E4%B8%AALLDB%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%E5%90%97/"/>
    <id>http://www.zhz.io/2018/07/05/é‚£ä¸ªLLDBä½ çœŸçš„äº†è§£å—/</id>
    <published>2018-07-05T11:58:14.000Z</published>
    <updated>2018-07-05T11:59:04.665Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ›¾ç»æœ‰ä¸ªç¬‘è¯ï¼ˆèº«è¾¹çš„çœŸç›¸ï¼‰ã€‚æœ‰æ¬¡ï¼Œæˆ‘è¦å›å»å†™ä»£ç çš„æ—¶å€™å‘¢ï¼Œæˆ‘æ— æ„é—´è¯´äº†ä¸€å¥â€˜æˆ‘ä»¬å›å»å†™BUGå§â€™ã€‚ç„¶åä¼ ä¸ºç»„å†…ä½³è¯ã€‚<br>BUGå¯¹äºæˆ‘ä»¬ç¨‹åºå‘˜æ¥è¯´æ˜¯æ— æ‰€ä¸åœ¨çš„ï¼Œä½ æƒ³ä½ çš„ä»£ç æ²¡æœ‰BUGï¼Œé™¤éä½ æ²¡å†™ä»£ç ã€‚å¯¹äºæˆ‘ä»¬iOS or macOS å¼€å‘çš„åŒå­¦ä»¬æ¥è¯´ï¼Œè‹¹æœä¸ºæˆ‘ä»¬å‡†å¤‡äº†ä¸€ä¸ªéå¸¸è‰¯å¥½çš„Debugçš„ç”Ÿæ€ç¯å¢ƒï¼ˆLLDBï¼‰è¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿéå¸¸å¿«é€Ÿï¼Œæœ‰æ•ˆçš„å»æ’é™¤ï¼Œè§£å†³ä¸€äº›é—®é¢˜ã€‚</p><p>é‚£ä¹ˆæœ¬æ–‡ä¸»è¦ä»¥æœ¬äººå¹³æ—¶çš„å¼€å‘ä¹ æƒ¯/<a href="https://developer.apple.com/videos/play/wwdc2018/412/" target="_blank" rel="noopener">WWDC 2018 Session 412</a>/<a href="https://store.raywenderlich.com/products/advanced-apple-debugging-and-reverse-engineering" target="_blank" rel="noopener">Advaced Apple Debug</a>ä¹¦ä¸­éƒ¨åˆ†å†…å®¹è¿›è¡Œå¦‚ä¸‹æ€»ç»“äº†ä¸€äº›LLDBçš„å‘½ä»¤</p><a id="more"></a><h2 id="LLDB"><a href="#LLDB" class="headerlink" title="LLDB"></a>LLDB</h2><p>ä½œä¸ºiOSå¼€å‘è€…ï¼Œæˆ‘ä»¬ç»å¸¸å›å»è®¾ç½®ä¸€äº›æ–­ç‚¹ï¼Œå½“ç¨‹åºè¿è¡Œåˆ°è¿™ä¸€è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥LLDBçš„æ§åˆ¶å°ï¼Œå»æ‰“å°ä¸€äº›ä¿¡æ¯ï¼Œæ¥è¾…ä½æˆ‘ä»¬è¿›è¡Œè°ƒè¯•å·¥ä½œã€‚ä½†æ˜¯æˆ‘ä»¬å¹³å¸¸åªä¼šå»ä½¿ç”¨p/eå‘½ä»¤å§ï¼Ÿï¼ˆè‡³å°‘æˆ‘ä»¥å‰æ˜¯è¿™æ ·çš„ã€‚ï¼‰ä½†æ˜¯æˆ‘ä»¬ä»Šå¤©å‡†å¤‡æ¥ç³»ç»Ÿçš„å­¦ä¹ ä¸€ä¸‹LLDBé‚£äº›æ¯”è¾ƒæœ‰ä½œç”¨çš„å‘½ä»¤ã€‚åœ¨LLDBæ§åˆ¶é¢æ¿ä¸­æ‰“å…¥helpï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€å †çš„å‘½ä»¤ã€‚ä»Šå¤©æˆ‘å‡†å¤‡æ‹¿å‡ºå…¶ä¸­å‡ ä¸ªç”¨çš„æ¯”è¾ƒå¤šçš„æ¥è¿›è¡Œè¯´æ˜ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Demoä»£ç ï¼Œä¸‹é¢çš„è¯´æ˜éƒ½ä¼šå›´ç»•è¿™ä¸ªä»£ç è¿›è¡Œæè¿°</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HZViewController</span> ()</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *string;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) HZModel *model;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">HZViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad</div><div class="line">&#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    <span class="keyword">self</span>.view.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line">    </div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure><h2 id="expression"><a href="#expression" class="headerlink" title="expression"></a>expression</h2><p>expressionä½œä¸ºæˆ‘ä»¬æœ€å¸¸ç”¨çš„æŒ‡ä»¤ä¹‹ä¸€ï¼Œä»–çš„ä½œç”¨<em>æ‰§è¡Œä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶å°†è¡¨è¾¾å¼çš„ç»“æœä½œä¸ºç»“æœè¿›è¡Œè¾“å‡º</em>ï¼Œexpressionçš„å®Œæ•´è¯­æ³•<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">expression &lt;cmd-options&gt; -- &lt;expr&gt;</div></pre></td></tr></table></figure></p><ul><li><cmd-options>: å‘½ä»¤å‚æ•°é€‰é¡¹ï¼Œå¯ä»¥æ ¹æ®<em>help expression</em>è¿›è¡ŒæŸ¥çœ‹ä»–æœ‰å“ªäº›å‘½ä»¤é›†åˆã€‚</cmd-options></li><li><expr>: è¡¨è¾¾å¼éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ä»£ç éƒ¨åˆ†<blockquote><p>expressionçš„ç®€å†™ä¸ºeï¼Œå½“ä½ ä½¿ç”¨é»˜è®¤å‚æ•°çš„æ—¶å€™å¯ä»¥ä¸ç”¨æ‰“â€“è¿™ä¸ªå¤šä½™çš„ç¬¦å·ï¼Œä½†æ˜¯å½“ä½ ä½¿ç”¨å‚æ•°çš„æ—¶å€™å°±å¿…é¡»åŠ ä¸Šã€‚ä¸è¿‡ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬æ— éœ€æ‰‹åŠ¨å»è¿›è¡Œè®¾ç½®ã€‚<br>OKï¼Œæˆ‘ä»¬æ¥å®è·µä¸€ä¸‹ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æœ€åˆStringå¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼ˆeä¹Ÿå¯ä»¥è¢«å½“åšæ˜¯ä¸€ä¸ªæ‰“å°å‘½ä»¤æ¥æ‰“å°ä¿¡æ¯ã€‚ï¼‰</span></div><div class="line">(lldb) e <span class="keyword">self</span>.string</div><div class="line">(<span class="built_in">NSString</span> *) $<span class="number">6</span> = <span class="literal">nil</span></div><div class="line"><span class="comment">// è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å»æ‰§è¡Œä¸€æ®µè¡¨è¾¾å¼ï¼Œå»ä¿®æ”¹stringçš„å˜é‡</span></div><div class="line">(lldb) e <span class="keyword">self</span>.string = <span class="string">@"TestString"</span></div><div class="line">(<span class="built_in">NSTaggedPointerString</span> *) $<span class="number">7</span> = <span class="number">0xbf4c3b53c7710e1d</span></div><div class="line"><span class="comment">// æˆ‘ä»¬å»æ‰“å°è¿™ä¸ªå€¼</span></div><div class="line">(lldb) po <span class="keyword">self</span>.string</div><div class="line">TestString</div></pre></td></tr></table></figure></blockquote></expr></li></ul><h2 id="print"><a href="#print" class="headerlink" title="print"></a>print</h2><p>printç›¸å¯¹æ¥è¯´å¾ˆç®€å•ï¼Œå…¶å®ä»–å°±æ˜¯<em>expression â€“ <expr></expr></em>å°±æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„eï¼Œå…¶ç®€å†™ä¸ºpã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> &lt;expr&gt;</div></pre></td></tr></table></figure></p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(lldb) p <span class="keyword">self</span>.string = <span class="string">@"asd"</span></div><div class="line">(<span class="built_in">NSTaggedPointerString</span> *) $<span class="number">12</span> = <span class="number">0xbf623d41451e6fa4</span> <span class="string">@"\372\346Q\324#\366"</span></div><div class="line">(lldb) po <span class="keyword">self</span>.string</div><div class="line">asd</div></pre></td></tr></table></figure><h2 id="po"><a href="#po" class="headerlink" title="po"></a>po</h2><p>å¦‚æœexpressionä¸åŠ ä»»ä½•å‚æ•°ï¼Œé‚£ä¹ˆä»–æ‰“å°å‡ºæ¥çš„ä¿¡æ¯éƒ½æ˜¯æŒ‡é’ˆçš„ä¿¡æ¯ã€‚è¿™å¯¹äºæˆ‘ä»¬è°ƒè¯•æ¥è¯´æ˜¯éå¸¸ä¸æ–¹ä¾¿çš„ã€‚<br>æ‰€ä»¥expressionæœ‰ä¸€ä¸ª-Oçš„å‚æ•°ï¼Œæ˜¯ç”¨æ¥æ‰“å°å‡½æ•°å¯¹è±¡çš„ï¼Œå¹¶ä¸”ä»–çš„æè¿°å³ä¸ºï¼Œæ‰“å°å…·æœ‰è¯­è¨€çš„æè¿°æ€§APIã€‚<br>poå…¶å®å°±æ˜¯<em>expression -O <expr></expr></em>çš„ç®€å†™ï¼ŒXcodeå›¢é˜Ÿå¾ˆäººæ€§åŒ–çš„åŠ å…¥äº†è¿™ä¸ªä¸œè¥¿ã€‚å½“ç„¶ä¸Šé¢çš„æè¿°æ€§APIå°±æ˜¯æŒ‡çš„<em>description</em>å’Œ<em>debugDescription</em>äº†ã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ä¸ºä¸Šé¢çš„ä»£ç åŠ å…¥ä»¥ä¸‹ä»£ç  HZViewController.mä¸­</span></div><div class="line">- (<span class="built_in">NSString</span> *)debugDescription &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@" ç±»å:%@ \n å±æ€§åˆ—è¡¨ï¼š%@"</span>,<span class="built_in">NSStringFromClass</span>(HZViewController.class),HZViewController.hz_propertyKeys];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// LLDBè°ƒè¯•è¾“å‡º</span></div><div class="line">(lldb) po <span class="keyword">self</span> <span class="comment">// å°è¯•ä½¿ç”¨poå‘½ä»¤è¿˜è¾“å‡ºself</span></div><div class="line"> ç±»å:HZViewController </div><div class="line"> å±æ€§åˆ—è¡¨ï¼š(</div><div class="line">    string,</div><div class="line">    model</div><div class="line">)</div><div class="line">(lldb) p <span class="keyword">self</span> </div><div class="line">(HZViewController *) $<span class="number">1</span> = <span class="number">0x00007f934e50f4d0</span></div><div class="line">(lldb) e -O -- <span class="keyword">self</span> <span class="comment">// å¯¹æ¯”äºpoæ˜¯æ²¡æœ‰ä»»ä½•åŒºåˆ«çš„</span></div><div class="line"> ç±»å:HZViewController </div><div class="line"> å±æ€§åˆ—è¡¨ï¼š(</div><div class="line">    string,</div><div class="line">    model</div><div class="line">)</div></pre></td></tr></table></figure></p><h2 id="call"><a href="#call" class="headerlink" title="call"></a>call</h2><p>å…¶å®è¿˜æœ‰ä¸€ä¸ªæ‰“å°å‘½ä»¤æ˜¯call,å¯¹æ¯”äºå…¶ä»–æ‰“å°å‘½ä»¤æ¥è¯´ï¼Œä»–æœ‰ä¸€ä¸ªä¼˜åŠ¿åœ¨äºï¼Œä»–èƒ½æ‰§è¡Œå¤šè¡Œä»£ç ï¼ˆä½†æ˜¯æˆ‘è§‰å¾—æ¯”è¾ƒé¸¡è‚‹ï¼Œæˆ‘ä»æ¥éƒ½æ²¡ç”¨è¿‡ï¼‰ã€‚<br>å¦‚æœå•çº¯ä½¿ç”¨<em>call <expr></expr></em>çš„è¯ä»–è·Ÿe/pæ— å·®å¼‚ã€‚ä½†æ˜¯ä½ å•ç‹¬ä½¿ç”¨callï¼Œå°±å¯ä»¥é”®å…¥å¤šè¡Œå‡½æ•°ï¼Œæ¥æ‰§è¡Œä¸€äº›å®šåˆ¶åŒ–çš„éœ€æ±‚ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(lldb) po <span class="keyword">self</span>.view.backgroundColor</div><div class="line"> <span class="literal">nil</span></div><div class="line">(lldb) call <span class="comment">// è¿›å…¥å‡½æ•°è¾“å…¥æ§åˆ¶</span></div><div class="line">Enter expressions, then terminate with an empty line to evaluate:</div><div class="line"><span class="number">1</span> <span class="keyword">if</span> (<span class="keyword">self</span>.view.backgroundColor == <span class="literal">nil</span>) &#123;</div><div class="line"><span class="number">2</span> <span class="keyword">self</span>.view.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line"><span class="number">3</span> &#125;</div><div class="line">(lldb) po <span class="keyword">self</span>.view.backgroundColor</div><div class="line"><span class="built_in">UIExtendedGrayColorSpace</span> <span class="number">1</span> <span class="number">1</span></div><div class="line">(lldb) call <span class="keyword">self</span>.view.backgroundColor</div><div class="line">(<span class="built_in">UICachedDeviceWhiteColor</span> *) $<span class="number">10</span> = <span class="number">0x0000600001c46070</span></div><div class="line">(lldb) e <span class="keyword">self</span>.view.backgroundColor</div><div class="line">(<span class="built_in">UICachedDeviceWhiteColor</span> *) $<span class="number">11</span> = <span class="number">0x0000600001c46070</span></div></pre></td></tr></table></figure></p><h2 id="p-e-po-callåŒºåˆ«"><a href="#p-e-po-callåŒºåˆ«" class="headerlink" title="p/e/po/callåŒºåˆ«"></a>p/e/po/callåŒºåˆ«</h2><table><thead><tr><th>å‘½ä»¤</th><th>ä¸»è¦åŒºåˆ«</th><th>å‡½æ•°æç¤º</th></tr></thead><tbody><tr><td>e</td><td>æ‰“å°å±æ€§ï¼ˆåŸºç¡€ç±»å‹ï¼šåŒ…å«å‡½æ•°ç±»å‹å’Œå˜é‡å€¼ï¼Œå¯¹è±¡ç±»å‹ï¼šåŒ…å«å‡½æ•°æŒ‡é’ˆï¼‰</td><td>æ²¡æœ‰å‘½ä»¤è¡Œæé†’ï¼Œå®Œå…¨å±äºç›²æ‰“</td></tr><tr><td>p</td><td>åŒe</td><td>ç»ˆç«¯ä¼šæ ¹æ®å½“å‰å †æ ˆï¼Œæç¤ºå±æ€§/å‡½æ•°ä¿¡æ¯</td></tr><tr><td>po</td><td>æ‰“å°å…·æœ‰å¹³å°ç‰¹æ€§çš„æè¿°æ€§APIï¼ˆåŸºç¡€ç±»å‹ï¼šæ‰“å°å˜é‡å€¼ï¼Œå¯¹è±¡: æ ¹æ®æè¿°APIè¾“å‡ºï¼‰</td><td>ç»ˆç«¯ä¼šæ ¹æ®å½“å‰å †æ ˆï¼Œæç¤ºå±æ€§/å‡½æ•°ä¿¡æ¯</td></tr><tr><td>call</td><td>æ‰“å°åŠŸèƒ½åŒeï¼Œä½†æ˜¯è¿˜å…·å¤‡è¾“å…¥å¤šè¡Œè¡¨è¾¾å¼çš„åŠŸèƒ½</td><td>æ²¡æœ‰å‘½ä»¤è¡Œæé†’ï¼Œå®Œå…¨å±äºç›²æ‰“</td></tr></tbody></table><h2 id="æ–­ç‚¹"><a href="#æ–­ç‚¹" class="headerlink" title="æ–­ç‚¹"></a>æ–­ç‚¹</h2><p>æ–­ç‚¹è®¾ç½®å‘½ä»¤ï¼Œå¯èƒ½ä¼šæœ‰äººé—®äº†ï¼Œæˆ‘ç”¨Xcodeï¼Œåœ¨å‡½æ•°è¾¹ä¸Šç‚¹ä¸€ä¸‹ä¸å°±æœ‰æ–­ç‚¹äº†ä¹ˆï¼Œè¦è¿™ä¸ªå‘½ä»¤æœ‰ä¸ªé”¤å­ç”¨ï¼Ÿé‚£åªèƒ½è¯´ä½ ä½œæ­»ä½œçš„è¿˜ä¸å¤Ÿå¤šã€‚å½“ä½ æ²¡æœ‰æºç çš„æ—¶å€™ï¼Œè¿™ä¸ªå‘½ä»¤å°±æˆäº†ä½ çš„æ•‘å‘½ç¨»è‰ã€‚ä¸¾ä¸ªğŸŒ°ï¼Œæˆ‘æœ‰ä¸ªç ¸è¿‡å£³çš„IPAåŒ…ï¼Œçº¯äºŒè¿›åˆ¶ï¼Œä½ åªèƒ½é€šè¿‡<em>class-dump</em>æˆ–è€…<em>IDA</em>å»è·å–åˆ°ä¸€äº›å‡½æ•°ä¿¡æ¯ï¼Œç„¶åä½ å°±å¯ä»¥æ‚„ç„¶çš„å»ç”¨è¿™ä¸ªå‘½ä»¤å»è®¾ç½®ä¸€äº›æ–­ç‚¹ï¼Œè°ƒè¯•å½“å‰å †æ ˆé‡Œçš„ä¿¡æ¯ã€‚æ•´ä¸ªAPPéƒ½åœ¨ä½ çš„æŒæ§ä¹‹ä¸­ã€‚OKï¼ŒåºŸè¯Bå¤šäº†ï¼Œè„‘å­è¦åæ‰çš„ï¼Œæˆ‘ä»¬ç»§ç»­æ¥çœ‹ä¸‹è¿™ä¸ªå‘½ä»¤ã€‚</p><blockquote><p>breakpointçš„ç¼©å†™ä¸ºbrï¼Œåé¢éƒ½ä¼šç”¨ç¼©å†™æ¥è¿›è¡Œæå†™</p></blockquote><h3 id="br-set"><a href="#br-set" class="headerlink" title="br set"></a>br set</h3><p>breakpoint setå‘½ä»¤æ˜¯ç”¨æ¥è®¾ç½®æ–­ç‚¹çš„ï¼ŒLLDBæä¾›äº†å¾ˆå¤šè®¾ç½®æ–­ç‚¹çš„æ–¹å¼ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">breakpoint set &lt;cmd-options&gt;</div></pre></td></tr></table></figure></p><p><em>ä½¿ç”¨ -n æ¥æ ¹æ®åç§°æ¥è®¾ç½®ä¸€ä¸ªæ–­ç‚¹</em><br>ç»™æ‰€æœ‰çš„initæ–¹æ³•è®¾ç½®ä¸Šæ–­ç‚¹ã€‚<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(lldb) br set -n init</div><div class="line">Breakpoint 3: 3657 locations. // å¯ä»¥çœ‹åˆ°è®¾ç½®äº†3657çš„æ–­ç‚¹ 2333333</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">3: name = 'init', locations = 3657, resolved = 3657, hit count = 0</div><div class="line">  3.1: where = CoreGraphics`ttf::cvt::init(), address = 0x0000000101042ec6, resolved, hit count = 0 </div><div class="line">  3.2: where = CoreGraphics`ttf::font::init(), address = 0x000000010148c9ca, resolved, hit count = 0 </div><div class="line">  3.3: where = CoreGraphics`ttf::fpgm::init(), address = 0x0000000101063086, resolved, hit count = 0 </div><div class="line">  3.4: where = CoreGraphics`ttf::glyf::init(), address = 0x00000001012bacea, resolved, hit count = 0</div></pre></td></tr></table></figure></p><p><em>ä½¿ç”¨ -f æ¥æ ¹æ®æ–‡ä»¶åå»é…åˆè®¾ç½®æ–­ç‚¹</em><br>æˆ‘åªæƒ³ç»™HZViewControllerçš„initè®¾ç½®æ–­ç‚¹ï¼Œå…¶ä»–æ–­ç‚¹éƒ½ä¸è¦ï¼Œå› ä¸ºå‰é¢è®¾ç½®çš„æ–­ç‚¹å¤ªå¤šäº†ã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) br set  -f HZViewController.m -n init</div><div class="line">Breakpoint <span class="number">3</span>: where = HZTest_Example`-[HZViewController init] + <span class="number">20</span> at HZViewController.m:<span class="number">35</span>, address = <span class="number">0x000000010b6eeba4</span></div></pre></td></tr></table></figure></p><blockquote><p>Note: æ–‡ä»¶çš„ä½¿ç”¨æ¡ä»¶æ˜¯ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­å¿…é¡»åŒ…å«æœ‰initå‡½æ•°ã€‚é›†æˆçš„è¯æ˜¯ä¸ä¼šè¢«æ ‡è®°å‡ºæ¥çš„ã€‚ä¼šæç¤º<em>WARNING:  Unable to resolve breakpoint to any actual locations.</em></p></blockquote><p><em>ä½¿ç”¨ -l æ¥æ ¹æ®æ–‡ä»¶æ¥æŒ‡å®šæ–­ç‚¹è¡Œæ•°</em><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">26:@property (nonatomic, strong) NSString *string;</div><div class="line">34:- (instancetype)init &#123;</div><div class="line">35:    if (self = [super init]) &#123;</div><div class="line">36:</div><div class="line">37:    &#125;</div><div class="line">38:    return self;</div><div class="line">39:&#125;</div><div class="line">(lldb) br set -l 26 -f HZViewController.m</div><div class="line">Breakpoint 6: 2 locations.</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">6: file = 'HZViewController.m', line = 26, exact_match = 0, locations = 2, resolved = 2, hit count = 0</div><div class="line">  6.1: where = HZTest_Example`-[HZViewController string] + 12 at HZViewController.m:26, address = 0x000000010f3c2f0c, resolved, hit count = 0 </div><div class="line">  6.2: where = HZTest_Example`-[HZViewController setString:] + 49 at HZViewController.m:26, address = 0x000000010f3c2f51, resolved, hit count = 0 </div><div class="line">(lldb) br set -l 35 -f HZViewController.m</div><div class="line">Breakpoint 8: where = HZTest_Example`-[HZViewController init] + 20 at HZViewController.m:35, address = 0x000000010f3c2ba4</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">8: file = 'HZViewController.m', line = 35, exact_match = 0, locations = 1, resolved = 1, hit count = 0</div><div class="line">  8.1: where = HZTest_Example`-[HZViewController init] + 20 at HZViewController.m:35, address = 0x000000010f3c2ba4, resolved, hit count = 0</div></pre></td></tr></table></figure></p><blockquote><p>Note:å¦‚æœæŒ‡å®šçš„åœ°æ–¹æ˜¯ä¸€ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šæŒ‡å®šå…¶setå’Œgetæ–¹æ³•ï¼Œå¦‚æœæŒ‡å®šçš„åœ°æ–¹æ˜¯ä¸€ä¸ªç©ºç™½è¡Œçš„åœ°æ–¹ï¼Œåˆ™è‡ªåŠ¨å‘ä¸‹å¯»æ‰¾ç¬¬ä¸€ä¸ªå­˜åœ¨å‡½æ•°çš„æŒ‡å®šè¡Œ</p></blockquote><p>åé¢å…¶å®éƒ½æ˜¯ç»™å‰é¢çš„å‘½ä»¤ï¼Œæ–°å¢ä¸€äº›åŠŸèƒ½è€Œå‡†å¤‡çš„ã€‚å°±ä¸ä¸€ä¸ªä¸ªå»è®¾ç½®äº†ã€‚</p><ul><li><p><em>-c</em> ç”¨æ¥è®¾ç½®æ–­ç‚¹æ¡ä»¶ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬æœ‰æ—¶ä¼šå¸Œæœ›æƒ³å½“ä¸€ä¸ªæ¡ä»¶ä¸ºçœŸçš„æ—¶å€™ï¼Œæ‰è§¦å‘æ–­ç‚¹æ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å»ä½¿ç”¨è¿™ä¸ªä¸œè¥¿ï¼Œå¯¹åº”å¦‚æœæ˜¯ä½¿ç”¨UIå»è®¾ç½®çš„è¯å°±æ˜¯è¿™ä¸ªé€‰é¡¹æ¡†</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">br set -n setString: -c string == <span class="string">@"TestString"</span></div></pre></td></tr></table></figure><p><img src="/resources/34E7B233E6285A6B512BFD507DA32887.jpg" alt="IMAGE"></p></li><li><em>-o</em> æ¥è®¾ç½®å•æ¬¡æ–­ç‚¹WWDC 2018 Session412ä¸­ä»‹ç»çš„ä¸€ç‚¹<br><em>-o</em>=<em>â€“one-shot true</em><br>é…åˆbr command addå¯ä»¥è¾¾åˆ°åœ¨æŸä¸ªæ–­ç‚¹åå•æ¬¡æ‹¦æˆªæŸä¸ªå‡½æ•°ï¼Œæœ‰å…´è¶£çœ‹æ€ä¹ˆæ“ä½œçš„å¯ä»¥å»çœ‹ä¸€ä¸‹è¿™ä½å†™çš„<a href="https://juejin.im/post/5b1cd870e51d4506dc0ac76c" target="_blank" rel="noopener">æ•ˆç‡æå‡çˆ†è¡¨çš„ Xcode å’Œ LLDB è°ƒè¯•æŠ€å·§</a></li><li><em>-i</em> è®¾ç½®æ‰§è¡Œå¿½ç•¥æ–­ç‚¹æ¬¡æ•°ï¼Œå¯¹åº”çš„UIè®¾ç½®å¦‚å›¾æ‰€ç¤ºã€‚<br><img src="/resources/88734A697D8FDFB43E853DA1F467D086.jpg" alt="IMAGE"></li></ul><table><thead><tr><th>å‡½æ•°</th><th>åŒºåˆ«</th></tr></thead><tbody><tr><td>br set -f Test.m â€“line 12</td><td>ç»™æŸä¸ªæ–‡ä»¶çš„12è¡Œå‡½æ•°åŠ ä¸ªæ–­ç‚¹</td></tr><tr><td>br set â€“name test</td><td>ç»™æ‰€æœ‰test å‡½æ•°åŠ ä¸ªæ–­ç‚¹</td></tr><tr><td>br set â€“method test</td><td>ç»™æ‰€æœ‰test C++å‡½æ•°åŠ ä¸ªæ–­ç‚¹</td></tr><tr><td>br set â€“selector test</td><td>ç»™æ‰€æœ‰test OCå‡½æ•°åŠ ä¸ªæ–­ç‚¹</td></tr><tr><td>br set â€“shlib Foundation.framework â€“name test</td><td>ç»™Foundationåº“çš„testå‡½æ•°åŠ ä¸ªæ–­ç‚¹</td></tr></tbody></table><h3 id="br-command"><a href="#br-command" class="headerlink" title="br command"></a>br command</h3><p>ä»ä¸Šé¢çš„setä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•å»ç”¨ä»£ç å»è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚å½“æˆ‘ä»¬å»æ‰§è¡Œäº†æ–­ç‚¹åï¼Œæˆ‘ä»¬å¸Œæœ›è®©ä»–å»è‡ªåŠ¨çš„å»å¸®æˆ‘ä»¬å»è¾“å‡ºä¸€äº›å†…å®¹ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¸€ä¸ªä¸ªpo/eå»æ‰“å°ã€‚é‚£ä¹ˆè¿™ä¸ªcommandå°±æ˜¯ä¸ºäº†è¿™ä¸ªè€Œè®¾è®¡çš„ã€‚ä»å¯è§†åŒ–çš„æ–¹å¼è®¾ç½®çš„è¯ï¼Œå°±å¦‚å›¾æ‰€ç¤ºäº†ã€‚<br><img src="/resources/CD4AB509BE03B60C485114A326132841.jpg" alt="IMAGE"></p><blockquote><p>Note: å…¶å®Xcodeæä¾›äº†å¾ˆå¤šç§ç±»æ–­ç‚¹åæ‰§è¡Œçš„æ–¹å¼ï¼Œæ¯”å¦‚æ‰§è¡Œä¸€æ®µè„šæœ¬/å‘å‡ºå£°éŸ³/æ‰“å°ä¿¡æ¯ç­‰ç­‰ï¼Œæˆ‘ä»¬è¿™è¾¹åªè®²æ‰“å°Debugä¿¡æ¯çš„å†…å®¹ï¼Œè·Ÿä½ åœ¨LLDBä¸­æ‰“å°æ— å¼‚ã€‚</p></blockquote><p><em>br command list</em> æ˜¾ç¤ºæŸä¸ªæ–­ç‚¹å½“å‰çš„æ‰€æœ‰å¯æ‰§è¡Œé¡¹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(lldb) br command list <span class="number">2</span></div><div class="line">Breakpoint <span class="number">2</span>:</div><div class="line"> po <span class="keyword">self</span></div></pre></td></tr></table></figure></p><p><em>br command add</em> ç»™æ–­ç‚¹æ·»åŠ ä¸€ä¸ªå¯æ‰§è¡Œé¡¹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(lldb) br set -n testGlobalPoint -f HZViewController.m</div><div class="line">Breakpoint <span class="number">3</span>: where = HZTest_Example`-[HZViewController testGlobalPoint] + <span class="number">23</span> at HZViewController.m:<span class="number">52</span>, address = <span class="number">0x0000000105396d27</span></div><div class="line">(lldb) br command add -o <span class="string">"po self"</span> <span class="number">3</span></div><div class="line">(lldb) br command list <span class="number">2</span></div><div class="line">Breakpoint <span class="number">2</span>:</div><div class="line"> po <span class="keyword">self</span></div></pre></td></tr></table></figure></p><blockquote><p>Note: å¦‚æœä½ å°è¯•ç»™ä¸€ä¸ªæ–­ç‚¹æ·»åŠ å¤šä¸ªå‘½ä»¤ï¼Œ-oæ˜¯æ— æ³•æ»¡è¶³çš„ï¼Œå› ä¸º-oæ˜¯â€“one-lineçš„æ„æ€ï¼Œä»–åªèƒ½æ·»åŠ ä¸€è¡Œã€‚åç»­çš„æ·»åŠ ä¼šè¦†ç›–å‰é¢çš„ã€‚<br>æ‰€ä»¥ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨br command add 3 (3æ˜¯æ–­ç‚¹æ ‡è¯†)<br>å½“ç„¶ä½ å¯ä»¥å»ç»™æ–­ç‚¹åŠ ä¸ªè„šæœ¬help br command addã€‚å¯ä»¥çœ‹åˆ°Appleç»™æˆ‘ä»¬ä¸¾äº†ä¸€ä¸ªæ·»åŠ è„šæœ¬çš„ğŸŒ°ã€‚è™½ç„¶æˆ‘å¹¶ä¸çŸ¥é“è¿™ç©æ„å„¿æœ‰å•¥é¸Ÿç”¨<br>å°æŠ€å·§LLDBä¸­æœ‰ä¸ªå…³é”®è¯æ˜¯contiune,æˆ‘ä»¬å¯ä»¥é”®å…¥è¿™ä¸ªå»è·³è¿‡æ–­ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¾“å…¥å¤šè¡Œçš„æ—¶å€™å°±å¯ä»¥è¿™ä¹ˆç©äº†,è¿™æ ·ä¼šè·³è¿‡æ–­ç‚¹ï¼Œä½†æ˜¯åˆä¼šæœ‰åˆç†çš„Logè¾“å‡º<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(lldb) br command add 3</div><div class="line">Enter your debugger command(s).  Type 'DONE' to end.</div><div class="line">&gt; po self</div><div class="line">&gt; continue</div><div class="line">&gt; DONE</div></pre></td></tr></table></figure></p></blockquote><p><em>br command delete</em> åˆ é™¤ä¸€ä¸ªæ–­ç‚¹çš„å¯æ‰§è¡Œé¡¹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(lldb) br command delete <span class="number">3</span></div><div class="line">(lldb) br command list <span class="number">3</span></div><div class="line">Breakpoint <span class="number">3</span> does not have an associated command.</div></pre></td></tr></table></figure></p><h3 id="br-list"><a href="#br-list" class="headerlink" title="br list"></a>br list</h3><p>æŸ¥çœ‹å½“å‰è®¾ç½®çš„æ–­ç‚¹çš„åˆ—è¡¨ï¼Œenable/disableçš„éƒ½ä¼šæ˜¾ç¤ºåœ¨ä¸Šé¢ï¼ŒåŒ…å«è¿è¡ŒæœŸçš„ä»£ç æ–­ç‚¹å’Œè¿è¡Œå‰çš„å¯è§†åŒ–æ–­ç‚¹<br>LLDBä¼šé»˜è®¤å…ˆè¯»å–ä½ åœ¨éè¿è¡ŒæœŸï¼Œè®¾ç½®çš„æ–­ç‚¹å³åœ¨Xcodeçš„å‡½æ•°å·¦è¾¹çš„å°ç®­å¤´ï¼Œå½“æˆ‘ä»¬æ¯æ¬¡è®¾ç½®ä¸€æ¬¡å¯è§†åŒ–çš„æ–­ç‚¹ã€‚å°±ä¼šå»è®¾ç½®æ–­ç‚¹æ–‡ä»¶ã€‚<br>æ–‡ä»¶è·¯å¾„<em>/å·¥ç¨‹ç›®å½•//Users/hongzhizhao/Desktop/HZTest/Example/HZTest.xcworkspace/xcuserdata/hongzhizhao.xcuserdatad/xcdebugger/Breakpoints_v2.xcbkptlist</em><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">1: file = '/Users/xxxxx/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 44, exact_match = 0, locations = 1, resolved = 1, hit count = 0</div><div class="line"></div><div class="line">  1.1: where = HZTest_Example`-[HZViewController testGlobalPoint] + 23 at HZViewController.m:44, address = 0x0000000100d42d37, resolved, hit count = 0 </div><div class="line"></div><div class="line">2: file = '/Users/xxxx/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 37, exact_match = 0, locations = 1, resolved = 1, hit count = 1</div><div class="line"></div><div class="line">  2.1: where = HZTest_Example`-[HZViewController viewDidLoad] + 61 at HZViewController.m:37, address = 0x0000000100d42c6d, resolved, hit count = 1</div></pre></td></tr></table></figure></p><h3 id="br-delete"><a href="#br-delete" class="headerlink" title="br delete"></a>br delete</h3><p>é¡¾åæ€ä¹‰ï¼Œåˆ é™¤æ–­ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡br listä¸­å»æ‰¾åˆ°å¯¹åº”çš„nuberã€‚(åŒ…å«äºŒçº§çš„ä¹Ÿå¯ä»¥ã€‚)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">breakpoint delete <span class="comment">#number#</span></div></pre></td></tr></table></figure></p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">(lldb) br set -n init</div><div class="line">Breakpoint 6: 3657 locations.</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">6: name = 'init', locations = 3657, resolved = 3657, hit count = 0</div><div class="line">  6.3656: where = EmailCore`-[ECEncodedWordEncoder init], address = 0x000000011e6caa14, resolved, hit count = 0 </div><div class="line">  6.3657: where = CoreRecents`-[CRRecentContactsLibrary init], address = 0x000000011e6dec27, unresolved, hit count = 0 </div><div class="line">(lldb) br delete 6.3657</div><div class="line">0 breakpoints deleted; 1 breakpoint locations disabled.</div><div class="line">(lldb) br list</div><div class="line">  6.3656: where = EmailCore`-[ECEncodedWordEncoder init], address = 0x000000011e6caa14, resolved, hit count = 0 </div><div class="line">  6.3657: where = CoreRecents`-[CRRecentContactsLibrary init], address = 0x000000011e6dec27, unresolved, hit count = 0  Options: disabled</div></pre></td></tr></table></figure><h3 id="br-disable-enable"><a href="#br-disable-enable" class="headerlink" title="br disable/enable"></a>br disable/enable</h3><p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½æ ¹æ®å…·ä½“åœºæ™¯è®¾ç½®äº†ä¸€äº›æ–­ç‚¹ï¼Œä½†æ˜¯ä¸´æ—¶å¼€å‘çš„æ—¶å€™æˆ‘ä»¬å´ä¸æƒ³è®©å…¶è¿›å…¥æ–­ç‚¹ã€‚OKï¼Œæˆ‘ä»¬å¯ä»¥å»ä¸´æ—¶æ”¹å†™è¿™ä¸ªæ–­ç‚¹çš„çŠ¶æ€ä¸ºdisable,å½“æˆ‘ä»¬å¸Œæœ›å…¶å¼€å¯çš„æ—¶å€™å†è®¾ç½®ä¸ºenableå°±å¯ä»¥äº†~ï¼Œperfectï¼Ÿ<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">1: file = '/Users/hongzhizhao/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 44, exact_match = 0, locations = 1, resolved = 1, hit count = 1</div><div class="line">  1.1: where = HZTest_Example`-[HZViewController viewDidLoad] + 61 at HZViewController.m:44, address = 0x0000000105396c1d, resolved, hit count = 1 </div><div class="line">(lldb) br disable 1</div><div class="line">1 breakpoints disabled.</div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">1: file = '/Users/hongzhizhao/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 44, exact_match = 0, locations = 1 Options: disabled </div><div class="line">  1.1: where = HZTest_Example`-[HZViewController viewDidLoad] + 61 at HZViewController.m:44, address = 0x0000000105396c1d, unresolved, hit count = 1</div></pre></td></tr></table></figure></p><h3 id="br-clear"><a href="#br-clear" class="headerlink" title="br clear"></a>br clear</h3><p>æ¸…ç†æŒ‡å®šæ–‡ä»¶çš„æŒ‡å®šè¡Œçš„æ–­ç‚¹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">breakpoint clear -l <span class="meta">#lines# -f #filename#</span></div></pre></td></tr></table></figure></p><p>ä¸‹é¢å‘½ä»¤ä¸º</p><ul><li>æŸ¥çœ‹å½“å‰listç¡®å®å­˜åœ¨ä¸€ä¸ªæ–­ç‚¹</li><li>ä½¿ç”¨clearå‘½ä»¤æ¸…é™¤nameä¸º5çš„æ–­ç‚¹</li><li>å†æ¬¡æŸ¥çœ‹å½“å‰listï¼Œnameä¸º5ç¡®å®è¢«ç§»é™¤äº†<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div><div class="line">5: file = '/Users/hongzhizhao/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 48, exact_match = 0, locations = 1, resolved = 1, hit count = 0</div><div class="line">  5.1: where = HZTest_Example`-[HZViewController testGlobalPoint] + 23 at HZViewController.m:48, address = 0x000000010da39d37, resolved, hit count = 0 </div><div class="line">(lldb) br clear -l 48 -f "HZViewController.m"</div><div class="line">1 breakpoints cleared:</div><div class="line">5: file = '/Users/hongzhizhao/Desktop/HZTest/Example/HZTest/HZViewController.m', line = 48, exact_match = 0, locations = 1, resolved = 1, hit count = 0</div><div class="line"></div><div class="line">(lldb) br list</div><div class="line">Current breakpoints:</div></pre></td></tr></table></figure></li></ul><h3 id="br-read-write"><a href="#br-read-write" class="headerlink" title="br read/write"></a>br read/write</h3><p>æˆ‘ä»¬å‰é¢è®²listçš„æ—¶å€™ï¼Œæˆ‘ä»¬è®²åˆ°è¿‡ä¸€äº›å­˜å‚¨æ–­ç‚¹ç›¸å…³çš„ä¸œè¥¿ï¼Œ<em>br write -f #file_path#</em>ï¼Œ-fæ ‡è¯†æ–­ç‚¹æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ã€‚<br>å‰é¢è¯´äº†è¿™ä¹ˆå¤šçš„æ–­ç‚¹è®¾ç½®ï¼Œå…¶å®éƒ½æ˜¯è¿è¡ŒæœŸçš„è®¾ç½®ï¼Œå‡ºäº†è¿è¡ŒæœŸï¼Œè¿™äº›è®¾ç½®éƒ½æ˜¯æ²¡æœ‰äº†çš„ã€‚æ‰€ä»¥read/writeæ˜¯ä¸€ä¸ªæŒä¹…ä¿å­˜çš„æ–¹æ¡ˆã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(lldb) br write  -f ~/Desktop/a.log</div><div class="line">(lldb) br read  -f ~/Desktop/a.log</div><div class="line">New breakpoints:</div><div class="line">Breakpoint <span class="number">4</span>: where = HZTest_Example`-[HZViewController viewDidLoad] + <span class="number">61</span> at HZViewController.m:<span class="number">44</span>, address = <span class="number">0x0000000105396c1d</span></div><div class="line">Breakpoint <span class="number">5</span>: where = HZTest_Example`-[HZAppDelegate application:didFinishLaunchingWithOptions:] + <span class="number">73</span> at HZAppDelegate.m:<span class="number">16</span>, address = <span class="number">0x0000000105396719</span></div><div class="line">Breakpoint <span class="number">6</span>: where = HZTest_Example`-[HZViewController testGlobalPoint] + <span class="number">23</span> at HZViewController.m:<span class="number">52</span>, address = <span class="number">0x0000000105396d27</span></div></pre></td></tr></table></figure></p><blockquote><p>Note: readå¹¶ä¸èƒ½è¯»å–Xcodeä½¿ç”¨å¯è§†åŒ–è®¾ç½®çš„åŸ‹ç‚¹ï¼Œå¯èƒ½è·Ÿç‰ˆæœ¬æœ‰å…³ç³»å§ï¼Œå¯è§†åŒ–åŸ‹çš„æ–­ç‚¹ï¼Œæ˜¯V2ç‰ˆæœ¬çš„ã€‚ä½†æ˜¯ä½¿ç”¨å‘½ä»¤çš„å¹¶æ²¡æœ‰ç‰ˆæœ¬æ ‡è¯†ï¼Œå¯è§†åŒ–åŸ‹ç‚¹æ˜¯xml,ä½¿ç”¨å‘½ä»¤ä¿å­˜çš„å´æ˜¯jsonæ–‡ä»¶ã€‚å¦å¤–readå¹¶æ˜¯ä¸€ä¸ªä¼šå»æ›¿æ¢çš„æ›´æ–°ï¼Œè€Œæ˜¯ä¸€ä¸ªè¯»å–åå…¨éƒ¨æ·»åŠ ~</p></blockquote><h2 id="å±æ€§ç›‘å¬-watchpoint"><a href="#å±æ€§ç›‘å¬-watchpoint" class="headerlink" title="å±æ€§ç›‘å¬ watchpoint"></a>å±æ€§ç›‘å¬ watchpoint</h2><p>OKï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•å»è®¾ç½®ä¸€ä¸ªå‡½æ•°çš„æ–­ç‚¹ã€‚ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½å¹¶ä¸æ»¡è¶³äºå‡½æ•°ï¼Œéœ€è¦å»ç›‘å¬ä¸€äº›å±æ€§çš„å˜åŒ–ã€‚é‚£ä¹ˆæœ‰äº›äººå°±ä¼šè¯´ï¼Œæˆ‘ç›´æ¥ç›‘å¬setæ–¹æ³•ä¸å°±å¥½äº†ï¼Ÿé‚£ä¹ˆå°±ä¼šæœ‰ä¸¤ç§æƒ…å†µä¸ä¼šè¿‡setæ–¹æ³•ï¼Œ1.ç›´æ¥è°ƒç”¨çš„æ˜¯<em>_</em> 2.è¿™ä¸ªå±æ€§å‹æ ¹å°±æ²¡æœ‰getterå’Œsetteræ–¹å¼æ˜¯ä¸€ä¸ªçº¯åªæŒ‡é’ˆçš„è®¿é—®å½¢å¼å‘¢ï¼Ÿä½ ç›‘å¬ç»™æˆ‘çœ‹çœ‹ï¼Ÿ<br>æ‰€ä»¥watchpointå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªç¥å¥‡çš„ä¸œè¥¿ï¼Œè¯´ç™½äº†ä»–æ˜¯ç›‘å¬ä¸€ä¸ªå†…å­˜åœ°å€çš„å˜åŒ–ï¼Œæ‰€ä»¥ä»–èƒ½å¤Ÿå»æ•è·å˜é‡çš„å˜åŒ–ã€‚</p><blockquote><p>watchpoint è·Ÿbreakpointçš„å‘½ä»¤å¤§è‡´ç›¸åŒï¼Œåªæ˜¯ä¸€ä¸ªæ“ä½œå‡½æ•°ï¼Œä¸€ä¸ªæ“ä½œåœ°å€ç½¢äº†</p></blockquote><h3 id="watchpoint-set"><a href="#watchpoint-set" class="headerlink" title="watchpoint set"></a>watchpoint set</h3><p><em>watchpoint set variable <var></var></em><br>è·Ÿè®¾ç½®å‡½æ•°ä¸€æ ·çš„å»è®¾ç½®ä¸€ä¸ªæ–­ç‚¹<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint set variable self.window</div><div class="line">error: "self" is a pointer and . was used to attempt to access "window". Did you mean "self-&gt;window"?</div><div class="line">(lldb) watchpoint set variable self-&gt;_window</div><div class="line">Watchpoint created: Watchpoint 1: addr = 0x600000ccc110 size = 8 state = enabled type = w</div><div class="line">    watchpoint spec = 'self-&gt;_window'</div><div class="line">    new value: 0x00007fc8b780d600</div></pre></td></tr></table></figure></p><blockquote><p>ç”±äºwatchpointæ˜¯ä¸€ä¸ªå†…å­˜å—çš„ç›‘å¬ç­–ç•¥ï¼Œå¦‚æœæˆ‘ä»¬å»å†™self.windowè¿™ç§è¡¨è¾¾å¼ï¼Œå®è´¨æ˜¯åœ¨è®¾ç½®[self setWindow:]æ–¹æ³•ï¼Œé‚£ä¹ˆè·Ÿä»–çš„å®šä¹‰å°±å¤§ç›¸å¾„åº­äº†ã€‚è¿™è¾¹ä¸¾ä¸ªä¾‹å­</p></blockquote><p><em>watchpoint set expression <expr></expr></em><br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint set expression <span class="number">0x00007fc8b780d600</span></div><div class="line">Watchpoint created: Watchpoint <span class="number">2</span>: addr = <span class="number">0x7fc8b780d600</span> size = <span class="number">8</span> state = enabled type = w</div><div class="line">    new value: <span class="number">4440870480</span></div></pre></td></tr></table></figure></p><p><em>-wç»Ÿä¸€å‚æ•°</em><br>read/write/read_write<br>ä»å­—é¢æ„æ€ä¸Šï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºæ˜¯ç›‘å¬çš„å†…å®¹æ˜¯è¯»è¿˜æ˜¯å†™è¿˜æ˜¯è¯»å†™ä¸€èµ·ç›‘å¬ã€‚é»˜è®¤æ˜¯å†™æ“ä½œ</p><blockquote><p>variable/expressionçš„åŒºåˆ«åº”ç”¨<br>variableå¿…é¡»æ˜¯ä½ è¿›å…¥äº†æŸæ¬¡æ–­ç‚¹ï¼Œæ‰èƒ½å¤Ÿç”¨ä½¿ç”¨å½“å‰æ ˆä¸­ä½¿ç”¨çš„å±æ€§å»ç›‘å¬<br>expression ä½ å¯ä»¥é€šè¿‡ä¸€äº›é€†å‘è½¯ä»¶æ¥è®¡ç®—åç§»é‡+é¦–åœ°å€çš„å½¢å¼å»å¾—åˆ°æœ€ç»ˆçš„å†…å­˜åœ°å€</p></blockquote><h3 id="watchpoint-list"><a href="#watchpoint-list" class="headerlink" title="watchpoint list"></a>watchpoint list</h3><p>è¿™ä¸ªæˆ‘ä»¬å°±ä¸å¤šè¯´äº†ï¼ŒæŸ¥çœ‹å½“å‰çš„watchpointåˆ—è¡¨<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint list</div><div class="line">Number of supported hardware watchpoints: 4</div><div class="line">Current watchpoints:</div><div class="line">Watchpoint 1: addr = 0x600000ccc110 size = 8 state = enabled type = w</div><div class="line">    watchpoint spec = 'self-&gt;_window'</div><div class="line">    new value: 0x00007fc8b780d600</div><div class="line">Watchpoint 2: addr = 0x7fc8b780d600 size = 8 state = enabled type = w</div><div class="line">    new value: 4440870480</div></pre></td></tr></table></figure></p><blockquote><p>è¿™è¾¹æˆ‘ä»¬çœ‹åˆ°ä½¿ç”¨expressionå’Œvariableä¼šå¾—åˆ°ä¸¤æ¡ç»“æœ</p></blockquote><h3 id="watchpoint-delete"><a href="#watchpoint-delete" class="headerlink" title="watchpoint delete"></a>watchpoint delete</h3><p>åˆ é™¤ä¸€ä¸ªç›‘æµ‹ç‚¹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) watch delete <span class="number">1</span></div><div class="line"><span class="number">1</span> watchpoints deleted.</div></pre></td></tr></table></figure></p><h3 id="watchpoint-disable-enable"><a href="#watchpoint-disable-enable" class="headerlink" title="watchpoint disable/enable"></a>watchpoint disable/enable</h3><p>è·Ÿbreakpointä¸€æ ·ï¼Œä»–ä¹Ÿæœ‰ä¸€ä¸ªä¸´æ—¶å…³é—­å’Œæ‰“å¼€çš„è®¾ç½®å¼€å…³<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint disable <span class="number">3</span></div><div class="line"><span class="number">1</span> watchpoints disabled.</div><div class="line">(lldb) watchpoint enable <span class="number">3</span></div><div class="line"><span class="number">1</span> watchpoints enabled.</div></pre></td></tr></table></figure></p><h3 id="watchpoint-ignore"><a href="#watchpoint-ignore" class="headerlink" title="watchpoint ignore"></a>watchpoint ignore</h3><p>ä¸€ä¸ªæ–­ç‚¹åœ¨çœŸæ­£è¢«æ‰§è¡Œå‰éœ€è¦è¢«æ–­ç‚¹å‡ æ¬¡ï¼Ÿ<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint ignore -i <span class="number">3</span> <span class="number">3</span></div><div class="line"><span class="number">1</span> watchpoints ignored.</div></pre></td></tr></table></figure></p><h3 id="watchpoint-modify"><a href="#watchpoint-modify" class="headerlink" title="watchpoint modify"></a>watchpoint modify</h3><p>å½“æ¡ä»¶ä¸ºçœŸçš„æ—¶å€™ï¼Œé‡‡å–çœŸæ­£æ‰§è¡Œæ–­ç‚¹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint modify -c <span class="string">"self ==nil"</span> <span class="number">3</span></div><div class="line"><span class="number">1</span> watchpoints modified.</div></pre></td></tr></table></figure></p><h3 id="watchpoint-command"><a href="#watchpoint-command" class="headerlink" title="watchpoint command"></a>watchpoint command</h3><p>è¿™ä¸ªè·Ÿbreakpoint command æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œè¿™è¾¹å°±ä¸å»è¯´è¿™ä¸ªä¸œè¥¿äº†ã€‚</p><h2 id="æ§åˆ¶ç¨‹åº-thread"><a href="#æ§åˆ¶ç¨‹åº-thread" class="headerlink" title="æ§åˆ¶ç¨‹åº thread"></a>æ§åˆ¶ç¨‹åº thread</h2><p>è¯´å®Œäº†å¦‚ä½•å»è°ƒè¯•ä½ çš„ä»£ç ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™è¿™å¾€å¾€æ˜¯ä¸å¤Ÿçš„ã€‚æˆ‘ä»¬å¸Œæœ›äºå»æ§åˆ¶æˆ‘ä»¬çš„ç¨‹åºèµ°å‘ã€‚ä¾‹å¦‚ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œä¼šæ”¹å˜ç¨‹åºçš„èµ°å‘ï¼Œé‚£ä¹ˆæˆ‘å¸Œæœ›å»æ”¹å˜ä»–çš„è¿”å›å€¼ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨åˆ°threadè¿™ä¸ªå‘½ä»¤æ¥è¾…ä½æˆ‘ä»¬ã€‚æˆ‘ä»¬æ—¥å¸¸ç”¨çš„stepè°ƒè¯•ï¼Œå…¶å®éƒ½æ˜¯threadå‘½ä»¤ï¼Œåªæ˜¯Xcodeå¸®æˆ‘ä»¬å¯è§†åŒ–äº†ç½¢äº†ã€‚</p><h3 id="thread-return"><a href="#thread-return" class="headerlink" title="thread return"></a>thread return</h3><p>returné¡¾åæ€ä¹‰ï¼Œç›´æ¥ä½¿å‡½æ•°return,returnåé¢å¯ä»¥æ¥è¡¨è¾¾å¼ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è¿”å›ä¸€äº›æœ‰åˆ©äºæˆ‘ä»¬è°ƒè¯•çš„ä¸œè¥¿<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">thread <span class="keyword">return</span> [&lt;expr&gt;]</div></pre></td></tr></table></figure></p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)testReturn &#123;</div><div class="line">    <span class="built_in">NSString</span> *a = [<span class="keyword">self</span> testReturn] ? <span class="string">@"a"</span> : <span class="string">@"b"</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">BOOL</span>)testReturn &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line">(lldb) thread <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">(lldb) po a</div><div class="line">b</div></pre></td></tr></table></figure><h3 id="thread-step-x"><a href="#thread-step-x" class="headerlink" title="thread step-x"></a>thread step-x</h3><p>æˆ‘ä»¬å¹³æ—¶çš„å•æ­¥è°ƒè¯•ï¼Œå…¶å®éƒ½æ¥è‡ªäºè¿™ä¸ªå‘½ä»¤<br><img src="/resources/8D06BDE637F8450D713B1DA6B5814F49.jpg" alt="IMAGE"><br>|å‘½ä»¤|ä½œç”¨|<br>|â€“|â€“|<br>| thread countinue/c/countinue |ç­‰åŒäºç¬¬ä¸€ä¸ªæŒ‰é’®ï¼Œæ ‡è¯†ç¨‹åºç»§ç»­è¿è¡Œ|<br>| thread step-over/n/next | ç­‰åŒäºç¬¬äºŒä¸ªæŒ‰é’®ï¼Œå•æ­¥è¿è¡Œ |<br>| thread step-in/s/step | ç­‰åŒäºç¬¬ä¸‰ä¸ªæŒ‰é’®ï¼Œè¿›å…¥å‡½æ•°æ–¹æ³•å†…éƒ¨ æºç çº§åˆ«|<br>| thread step-out/finish | ç­‰åŒäºç¬¬å››ä¸ªæŒ‰é’®ï¼Œè·³å‡ºå½“å‰å‡½æ•° |</p><h3 id="thread-jump"><a href="#thread-jump" class="headerlink" title="thread jump"></a>thread jump</h3><p>OKï¼Œè¿™ç©æ„å„¿çœŸçš„æ˜¯ä¸€ä¸ªé»‘é­”æ³•ã€‚çœ‹WWDC2018,æ–­ç‚¹ç§»åŠ¨çš„æˆ‘ä¸€æ„£ä¸€æ„£çš„ã€‚æ¥æ„Ÿå—ä¸€ä¸‹ï¼Ÿ<br><img src="/resources/64AC4E1386A9032ED73A4E7B68E4B08D.gif =1052x682" alt="æœªå‘½å.gif"><br>å…¶å®è¿™ä¸ªä¸œè¥¿å¾ˆç®€å•ï¼Œè€æ—©å°±æœ‰äº†ï¼Œåªæ˜¯æˆ‘ä¸çŸ¥é“ç½¢äº†ã€‚<br><em>thread jump -l <linenum></linenum></em>ä¸Šé¢çš„å›¾æ˜¯å¯è§†åŒ–çš„ç½¢äº†ï¼Œè¿™ä¸ªæ‰æ˜¯å®è´¨ä»£ç ã€‚-l è¾“å…¥è·³è½¬çš„ä»£ç ã€‚</p><blockquote><p>Note:ä¸”ç”¨ä¸”çæƒœï¼Œè¿™ä¸œè¥¿æœ‰åˆ©æœ‰å¼Š</p></blockquote><h3 id="å…¶ä»–ä¸œè¥¿"><a href="#å…¶ä»–ä¸œè¥¿" class="headerlink" title="å…¶ä»–ä¸œè¥¿"></a>å…¶ä»–ä¸œè¥¿</h3><ul><li>thread list åˆ—å‡ºå½“å‰æ‰€æœ‰çš„çº¿ç¨‹</li><li>thread select é€‰æ‹©æŸä¸ªçº¿ç¨‹</li><li>therad until ä¼ å…¥ä¸€ä¸ªè¡Œæ•°ï¼Œè®©ç¨‹åºæ‰§è¡Œåˆ°è¿™è¡Œçš„æ—¶å€™æš‚åœ</li><li>thread info è¾“å‡ºå½“å‰çº¿ç¨‹çš„ä¿¡æ¯</li><li>thread backtrace æ–­ç‚¹çš„å‡½æ•°è°ƒç”¨å †æ ˆï¼Œé»˜è®¤å½“å‰çº¿ç¨‹</li><li>thread plan ç”¨æ¥ç®¡ç†å½“å‰çº¿ç¨‹çš„æ‰§è¡Œè®¡åˆ’</li></ul><blockquote><p>threadå‘½ä»¤è™½å¥½ï¼Œä½†æ˜¯éšæ„æ”¹å˜æˆè¯­çš„èµ°å‘ï¼Œå¯èƒ½ä¼šå¼•èµ·ä¸€äº›ä¸å¿…è¦çš„éº»çƒ¦</p></blockquote><h2 id="æŸ¥çœ‹è°ƒç”¨æ ˆ-frame"><a href="#æŸ¥çœ‹è°ƒç”¨æ ˆ-frame" class="headerlink" title="æŸ¥çœ‹è°ƒç”¨æ ˆ frame"></a>æŸ¥çœ‹è°ƒç”¨æ ˆ frame</h2><p>åœ¨æˆ‘ä»¬è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸èƒ½çœ‹åˆ°ï¼Œæ§åˆ¶å°å¸®æˆ‘ä»¬è¾“å‡ºäº†å½“å‰çš„è°ƒç”¨æ ˆå†…å®¹ã€‚å…¶å®ä»–å¯¹åº”çš„å°±æ˜¯frameå‘½ä»¤ã€‚<br><img src="/resources/DEE2D7DF3DC22831BDEE012AE6FAE029.jpg" alt="IMAGE"><br>ç»†å¿ƒçš„åŒå­¦å¯èƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªç»†èŠ‚ï¼Œçº¢æ¡†1å’Œçº¢æ¡†2æ˜¯å¯¹åº”çš„ï¼Œçº¢æ¡†2æ˜¯ç”¨thread backtraceæ‰“å°å‡ºæ¥çš„ã€‚é‡Œé¢çš„frameå…¶å®å°±æ˜¯æˆ‘ä»¬è¿™é¢çš„frame,æˆ‘ä»¬å¯ä»¥é€šè¿‡<em>frame select <num></num></em>æ¥ä½¿ç”¨ä»£ç åˆ‡æ¢å½“å‰è¿è¡Œçš„è°ƒç”¨æ ˆï¼Œè·Ÿä½ æ‰‹åŠ¨ç‚¹ç°å†µ1çš„æ²¡æœ‰ä»»ä½•åŒºåˆ«<br><img src="/resources/1520BBE8DC414066748F4082CA2A4DDB.jpg" alt="IMAGE"><br><em>frame variable</em>ç”¨æ¥æ‰“å°å½“å‰è°ƒç”¨æ ˆå†…çš„æ‰€æœ‰å±æ€§<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(lldb) frame variable</div><div class="line">(HZViewController *) <span class="keyword">self</span> = <span class="number">0x00007f8c6540ba90</span></div><div class="line">(SEL) _cmd = <span class="string">"viewDidLoad"</span></div><div class="line">(__NSCFConstantString *) a = <span class="number">0x000000010fffa128</span> <span class="string">@"b"</span></div></pre></td></tr></table></figure></p><p><em>frame info</em>æ‰“å°å½“å‰æ ˆçš„å†…å®¹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) frame info</div><div class="line">frame <span class="meta">#0: 0x000000010fff7c64 HZTest_Example`-[HZViewController viewDidLoad](self=0x00007f8c6540ba90, _cmd=<span class="meta-string">"viewDidLoad"</span>) at HZViewController.m:52</span></div></pre></td></tr></table></figure></p><h2 id="help-apropos"><a href="#help-apropos" class="headerlink" title="help/apropos"></a>help/apropos</h2><p>å½“ç„¶è¯´äº†è¿™ä¹ˆå¤šï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬è‚¯å®šä¼šå¿˜æ‰çš„~å•§å•§å•§ï¼Œè°è¿˜èƒ½è®°ä½è¿™ä¹ˆå¤šå‘¢ï¼Œæ¯•ç«ŸXcodeå¸®æˆ‘ä»¬åšå¥½äº†å¯è§†åŒ–è¿™ä¹ˆå¥½çš„ä¸œè¥¿ã€‚<br>ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å´ä¸å¾—ä¸å»æ‰¾è¿™äº›å‘½ä»¤ï¼Œæ¯”å¦‚é€†å‘çš„æ—¶å€™ã€‚2333333<br>helpå¾ˆç®€å•ï¼Œå¸®åŠ©æˆ‘ä»¬å»æ‰“å°æè¿°ä¿¡æ¯çš„ã€‚ä¾‹å¦‚æˆ‘æƒ³çŸ¥é“frameçš„ç›¸å…³ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™ä¹ˆæ“ä½œï¼Œé‡Œé¢éƒ½å¸®æˆ‘ä»¬å†™å¥½äº†<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">(lldb) help frame</div><div class="line">     Commands for selecting and examing the current thread's stack frames.</div><div class="line"></div><div class="line">Syntax: frame &lt;subcommand&gt; [&lt;subcommand-options&gt;]</div><div class="line"></div><div class="line">The following subcommands are supported:</div><div class="line"></div><div class="line">      info     -- List information about the current stack frame in the current</div><div class="line">                  thread.</div><div class="line">      select   -- Select the current stack frame by index from within the</div><div class="line">                  current thread (see 'thread backtrace'.)</div><div class="line">      variable -- Show variables for the current stack frame. Defaults to all</div><div class="line">                  arguments and local variables in scope. Names of argument,</div><div class="line">                  local, file static and file global variables can be</div><div class="line">                  specified. Children of aggregate variables can be specified</div><div class="line">                  such as 'var-&gt;child.x'.</div><div class="line"></div><div class="line">For more help on any particular subcommand, type 'help &lt;command&gt; &lt;subcommand&gt;'.</div></pre></td></tr></table></figure></p><p>aproposï¼Œæ˜¯ä¸€ä¸ªæœç´¢å‘½ä»¤ï¼Œå¸®æˆ‘ä»¬æŸ¥æ‰¾æœ‰å“ªäº›å‘½ä»¤å¯ä»¥ä½¿ç”¨ï¼Œä¾‹å¦‚ä¸‹å›¾è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç­”åº”å‡ºå…³äºstepçš„æ‰€æœ‰å‘½ä»¤æ¥å¸®åŠ©æˆ‘ä»¬æ¥ä½¿ç”¨<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(lldb) apropos step</div><div class="line">The following commands may relate to 'step':</div><div class="line">  thread step-in        -- Source level single step, stepping into calls. </div><div class="line">                           Defaults to current thread unless specified.</div><div class="line">  thread step-inst      -- Instruction level single step, stepping into calls. </div><div class="line">                           Defaults to current thread unless specified.</div><div class="line">  thread step-inst-over -- Instruction level single step, stepping over calls. </div><div class="line">                           Defaults to current thread unless specified.</div><div class="line">  thread step-out       -- Finish executing the current stack frame and stop</div><div class="line">                           after returning.  Defaults to current thread unless</div><div class="line">                           specified.</div><div class="line">  thread step-over      -- Source level single step, stepping over calls. </div><div class="line">                           Defaults to current thread unless specified.</div></pre></td></tr></table></figure></p><h2 id="Extension"><a href="#Extension" class="headerlink" title="Extension"></a>Extension</h2><h3 id="åˆ·æ–°UI"><a href="#åˆ·æ–°UI" class="headerlink" title="åˆ·æ–°UI"></a>åˆ·æ–°UI</h3><p>å³ä½¿ä½ æ”¹äº†UIçš„å±æ€§ï¼Œå› ä¸ºç¨‹åºæš‚åœï¼Œä½ æ˜¯æ— æ³•åˆ·æ–°UIçš„ï¼Œä½†æ˜¯æœ‰ä¸ªå‘½ä»¤å¯ä»¥å¸®ä½ ï¼Œè¿™æ ·åšä½ å°±å¯ä»¥åŠæ—¶çš„å¸®åŠ©ä½ æ¥æ”¹å˜UIçš„åˆ·æ–°ï¼Œå³ä½¿ä»–åœ¨æ–­ç‚¹çš„çŠ¶æ€<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">e <span class="built_in">CATransaction</span>.flush()</div></pre></td></tr></table></figure></p><h3 id="ä½¿ç”¨åˆ«äººå†™å¥½çš„è„šæœ¬"><a href="#ä½¿ç”¨åˆ«äººå†™å¥½çš„è„šæœ¬" class="headerlink" title="ä½¿ç”¨åˆ«äººå†™å¥½çš„è„šæœ¬"></a>ä½¿ç”¨åˆ«äººå†™å¥½çš„è„šæœ¬</h3><p>LLDBæ˜¯æ”¯æŒä½¿ç”¨åˆ«äººå†™å¥½çš„å‘½ä»¤çš„ï¼Œå®è´¨è¯­æ³•æ˜¯ä½¿ç”¨pythonå†™çš„ï¼Œè¿™è¾¹å°±ä¸å¤šåšä»‹ç»äº†ã€‚æœ‰å…´è¶£å¯ä»¥å»äº†è§£ä¸€ä¸‹</p><h3 id="åˆ«ååŠŸèƒ½"><a href="#åˆ«ååŠŸèƒ½" class="headerlink" title="åˆ«ååŠŸèƒ½"></a>åˆ«ååŠŸèƒ½</h3><p>å¾ˆå¤šæ—¶å€™å‘½ä»¤å¾ˆé•¿ï¼Œæˆ‘ä»¬è®°ä¸ä½æ€ä¹ˆåŠã€‚æ¯”å¦‚é‚£ä¸ªåˆ·æ–°UIçš„å‘½ä»¤ã€‚å¥½é•¿å•Šï¼Œåœ¨Sessioné‡Œé¢ï¼Œè¿™ä¸ªäººæœ‰ä¸ªæ¶è¶£å‘³ç”¨ğŸš½æ¥ä»£æ›¿é‚£ä¸ªå‘½ä»¤ã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">command alias ğŸš½ e <span class="built_in">CATransaction</span>.flush()</div></pre></td></tr></table></figure></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.jianshu.com/p/268ecb3cf4c6" target="_blank" rel="noopener">iOS å¸¸ç”¨çš„lldbå‘½ä»¤</a><br><a href="https://juejin.im/entry/58c75b258ac24707201369c4" target="_blank" rel="noopener">ä½¿ç”¨ LLDB è°ƒè¯• APP</a><br><a href="http://ios.jobbole.com/83393/" target="_blank" rel="noopener">ç†Ÿç»ƒä½¿ç”¨ LLDBï¼Œè®©ä½ è°ƒè¯•äº‹åŠåŠŸå€</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æ›¾ç»æœ‰ä¸ªç¬‘è¯ï¼ˆèº«è¾¹çš„çœŸç›¸ï¼‰ã€‚æœ‰æ¬¡ï¼Œæˆ‘è¦å›å»å†™ä»£ç çš„æ—¶å€™å‘¢ï¼Œæˆ‘æ— æ„é—´è¯´äº†ä¸€å¥â€˜æˆ‘ä»¬å›å»å†™BUGå§â€™ã€‚ç„¶åä¼ ä¸ºç»„å†…ä½³è¯ã€‚&lt;br&gt;BUGå¯¹äºæˆ‘ä»¬ç¨‹åºå‘˜æ¥è¯´æ˜¯æ— æ‰€ä¸åœ¨çš„ï¼Œä½ æƒ³ä½ çš„ä»£ç æ²¡æœ‰BUGï¼Œé™¤éä½ æ²¡å†™ä»£ç ã€‚å¯¹äºæˆ‘ä»¬iOS or macOS å¼€å‘çš„åŒå­¦ä»¬æ¥è¯´ï¼Œè‹¹æœä¸ºæˆ‘ä»¬å‡†å¤‡äº†ä¸€ä¸ªéå¸¸è‰¯å¥½çš„Debugçš„ç”Ÿæ€ç¯å¢ƒï¼ˆLLDBï¼‰è¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿéå¸¸å¿«é€Ÿï¼Œæœ‰æ•ˆçš„å»æ’é™¤ï¼Œè§£å†³ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæœ¬æ–‡ä¸»è¦ä»¥æœ¬äººå¹³æ—¶çš„å¼€å‘ä¹ æƒ¯/&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/412/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;WWDC 2018 Session 412&lt;/a&gt;/&lt;a href=&quot;https://store.raywenderlich.com/products/advanced-apple-debugging-and-reverse-engineering&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Advaced Apple Debug&lt;/a&gt;ä¹¦ä¸­éƒ¨åˆ†å†…å®¹è¿›è¡Œå¦‚ä¸‹æ€»ç»“äº†ä¸€äº›LLDBçš„å‘½ä»¤&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>WWDC 2018 - 412 Advanced Debugging With Xcode and LLDB</title>
    <link href="http://www.zhz.io/2018/06/10/WWDC-2018-412-Advanced-Debugging-With-Xcode-and-LLDB/"/>
    <id>http://www.zhz.io/2018/06/10/WWDC-2018-412-Advanced-Debugging-With-Xcode-and-LLDB/</id>
    <published>2018-06-10T02:19:44.000Z</published>
    <updated>2018-06-11T01:28:40.775Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åˆšåšå®Œäº†è¿™ä¸ª<a href="https://developer.apple.com/videos/play/wwdc2018/412/" target="_blank" rel="noopener">Advanced Debugging with Xcode and LLDB Session 412</a>çš„å¬åŠ›ç»ƒä¹ ï¼Œæ¥å†™ä¸ªå°æ€»ç»“(å—¯ï¼Œåˆå¯ä»¥æ„‰å¿«çš„å¼€å§‹è£…é€¼äº†)ã€‚<br>ç”±äºSwiftå†™çš„ä¸å¤šï¼Œå¯èƒ½æœ‰å‡ ä¸ªå°éƒ¨åˆ†äº†è§£çš„å¹¶ä¸æ˜¯å¾ˆå…¨é¢</p><h2 id="å¢åŠ äº†Swift-Debugçš„å¯é æ€§"><a href="#å¢åŠ äº†Swift-Debugçš„å¯é æ€§" class="headerlink" title="å¢åŠ äº†Swift Debugçš„å¯é æ€§"></a>å¢åŠ äº†Swift Debugçš„å¯é æ€§</h2><h3 id="Swiftç¬¬ä¸‰æ–¹åº“å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´çš„å±æ€§æ— æ³•æ‰“å°é—®é¢˜ä¿®æ­£"><a href="#Swiftç¬¬ä¸‰æ–¹åº“å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´çš„å±æ€§æ— æ³•æ‰“å°é—®é¢˜ä¿®æ­£" class="headerlink" title="Swiftç¬¬ä¸‰æ–¹åº“å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´çš„å±æ€§æ— æ³•æ‰“å°é—®é¢˜ä¿®æ­£"></a>Swiftç¬¬ä¸‰æ–¹åº“å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´çš„å±æ€§æ— æ³•æ‰“å°é—®é¢˜ä¿®æ­£</h3><p>äº§ç”ŸåŸå› å¯ä»¥ç›´æ¥çœ‹è¿™ä¸ª<a href="https://juejin.im/post/5a52d7cdf265da3e4c07a004" target="_blank" rel="noopener">é“¾æ¥</a><br>å®é™…äº§ç”Ÿçš„æ•ˆæœ<br><img src="/resources/C377778880889F7F0B8897607C911E7A.jpg" alt="IMAGE"></p><h3 id="æ§åˆ¶å°Swiftç±»å‹ä¿®æ­£"><a href="#æ§åˆ¶å°Swiftç±»å‹ä¿®æ­£" class="headerlink" title="æ§åˆ¶å°Swiftç±»å‹ä¿®æ­£"></a>æ§åˆ¶å°Swiftç±»å‹ä¿®æ­£</h3><p><img src="/resources/CDA3BBFB82087B559010B162AAF25A8F.jpg" alt="IMAGE"><br><a id="more"></a></p><h2 id="DebugæŠ€å·§"><a href="#DebugæŠ€å·§" class="headerlink" title="DebugæŠ€å·§"></a>DebugæŠ€å·§</h2><p>ä¹‹å‰çœ‹äº†ä¼šå„¿Advanced Apple Debuggingè¿™æœ¬ä¹¦ï¼Œå…¶å®å¥½åƒä¸Šé¢å¾ˆå¤šéƒ½æœ‰å†™ã€‚</p><h3 id="å¤šä¸€ä¸ªå·¥ä½œåŒºçš„Debug-Tabç»™å¼€å‘è€…æ¥è°ƒè¯•"><a href="#å¤šä¸€ä¸ªå·¥ä½œåŒºçš„Debug-Tabç»™å¼€å‘è€…æ¥è°ƒè¯•" class="headerlink" title="å¤šä¸€ä¸ªå·¥ä½œåŒºçš„Debug Tabç»™å¼€å‘è€…æ¥è°ƒè¯•"></a>å¤šä¸€ä¸ªå·¥ä½œåŒºçš„Debug Tabç»™å¼€å‘è€…æ¥è°ƒè¯•</h3><p>å½“ä½ è¿›å…¥Debugçš„æ—¶å€™ä¼šå¤šå‡ºä¸€ä¸ªTabæ¥ï¼Œå½“ç„¶è¿™ä¸ªå¹¶ä¸æ˜¯é»˜è®¤æ‰“å¼€çš„ï¼Œä½ å¯ä»¥å»è®¾ç½®é‡Œé¢è¿›è¡Œæ‰“å¼€<br><img src="/resources/BBC36F839054F738B10C5FD527CFF6A0.jpg" alt="IMAGE"><br><img src="/resources/C56CA051961A7A531A13F4D930D5A098.jpg" alt="IMAGE"><br>Xcodeæä¾›äº†å¾ˆå¤šé€‰é¡¹å¯ä¾›ä½ é€‰æ‹©ï¼Œåœ¨Build/Test/Runç­‰çš„åœºæ™¯å¼€å§‹æˆ–è€…æ˜¯æš‚åœçš„æ—¶å€™å¼¹å‡ºæ–°çš„Tabï¼Œå¯å®šåˆ¶å‹è¿˜æ˜¯æŒºé«˜çš„ã€‚</p><h3 id="Expressionäº¤æ¢å‡½æ•°ç»“æœ"><a href="#Expressionäº¤æ¢å‡½æ•°ç»“æœ" class="headerlink" title="Expressionäº¤æ¢å‡½æ•°ç»“æœ"></a>Expressionäº¤æ¢å‡½æ•°ç»“æœ</h3><p>åˆ©ç”¨expressionå‘½ä»¤,ç®€å†™ä¸ºe,æ¥ä¿®æ”¹å±æ€§çš„å€¼<br><img src="/resources/285E4FC01E01462E29BBD1BE7DCBF7FD.jpg" alt="IMAGE"><br>å½“ç„¶å¦‚æœä½ ä¸æƒ³æ¯æ¬¡è¿è¡Œçš„æ—¶å€™éƒ½è¿™ä¹ˆæ¥æ•²ä¸€éçš„è¯ï¼Œä½ å¯ä»¥è¿™ä¹ˆç©<br><img src="/resources/BE23B42AD0FC3BFF07F41C9EAF378E18.jpg" alt="IMAGE"><br>OKï¼Œç”šè‡³ä½ å¿˜è®°å†™æŸå¥ä»£ç äº†ï¼Œä½†æ˜¯ç¼–è¯‘åˆè´¼æ…¢ï¼Œä½ å¯ä»¥å­¦ä¹ ä¸€ä¸‹è§†é¢‘é‡Œçš„è¿™ä¸ªæ“ä½œ<br><img src="/resources/BC89285073DADF1D47C47A249F9898A9.jpg" alt="IMAGE"><br>å›¾ä¸­ä»–å°‘è®¾ç½®äº†ä¸€ä¸ªDelegateï¼Œä½†æ˜¯ä»–æ‡’å•Šï¼Œç›´æ¥ç”¨æ–­ç‚¹æ·»åŠ ä¸Šï¼Œç„¶åå‡è£…å†™ä¸€è¡Œä»£ç åœ¨é‚£ï¼ˆå…¶å®ä»–å¹¶æ²¡æœ‰ç¼–è¯‘å’¯ï¼‰ã€‚ä½†æ˜¯è¿™æ ·å¯ä»¥å‡è£…å†™äº†ä¸€ä¸ªä»£ç†èµ‹å€¼ã€‚Amazing?</p><h3 id="breakpoint-set-â€“one-shot-true"><a href="#breakpoint-set-â€“one-shot-true" class="headerlink" title="breakpoint set â€“one-shot true"></a>breakpoint set â€“one-shot true</h3><p>OKï¼Œçœ‹åˆ°è¿™ä¸ªå‘½ä»¤ä¸€å¼€å§‹æ˜¯æ‡µé€¼çš„ï¼Œä»€ä¹ˆé¬¼ä¸œè¥¿ã€‚ä½†æ˜¯çœ‹åˆ°ä¸‹å›¾åº”è¯¥å¹¶ä¸ä¼šå¾ˆé™Œç”Ÿï¼Œè¿™ä¸ªæ˜¯å¯¹äºUILabelçš„textå­—æ®µçš„å…¨å±€æ–­ç‚¹ï¼Œä½†æ˜¯ç³»ç»Ÿçš„æ‰€æœ‰è®¾ç½®éƒ½ä¼šèµ·ä½œç”¨ã€‚æ‰€ä»¥è°ƒè¯•çš„æ—¶å€™è¿˜è¦å¼€å…³æ–­ç‚¹å•Šä»€ä¹ˆçš„å¤ªéº»çƒ¦äº†ã€‚æ‰€ä»¥å¯ä»¥åˆ©ç”¨ä¸Šé¢çš„è¿™ä¸ªå‘½ä»¤æ¥è¿›è¡Œä¸€ä¸ªä¿®æ­£ä¼˜åŒ–ã€‚<br><img src="/resources/0C09C7A80D42093D1A8BACABE50080A8.jpg" alt="IMAGE"><br>æˆ‘æƒ³è¦åœ¨ifçš„åˆ¤æ–­åé¢æ‹¦æˆªä¸€æ¬¡-[UILabel setText:]æˆ‘å°±å¯ä»¥è¿™ä¹ˆåšäº†<br><img src="/resources/04B30B8BF791028055DA84C3E9FF1A4A.jpg" alt="IMAGE"><br><img src="/resources/4DC633FC7E0FAF3D67388A288A115420.jpg" alt="IMAGE"></p><blockquote><p>Note: è¿™è¾¹å†™äº†one shot æ‰€ä»¥æˆ‘åœ¨æƒ³æœ‰æ²¡æœ‰æ–­ä¸¤æ¬¡çš„æ“ä½œï¼Œä½†æ˜¯åœ¨åŒä¸€ä¸ªæ–­ç‚¹è®¾ç½®ä¸¤æ¬¡commandæ˜¯æ²¡æœ‰èµ·ä½œç”¨çš„ã€‚<br>â€“nameåªæ˜¯è¿™ä¸ªå‘½ä»¤çš„å…¶ä¸­ä¸€ä¸ªç”¨æ³•ï¼Œè¿˜æœ‰å…¶ä»–ç”¨æ³•å¤§å®¶è‡ªå·±æ¢ç´¢</p></blockquote><h3 id="æ–­ç‚¹ç§»åŠ¨"><a href="#æ–­ç‚¹ç§»åŠ¨" class="headerlink" title="æ–­ç‚¹ç§»åŠ¨"></a>æ–­ç‚¹ç§»åŠ¨</h3><p>ãƒ¾(ï½¡ï½€Ğ”Â´ï½¡)æˆ‘æ“¦è¿™æ˜¯ä»€ä¹ˆæ“ä½œï¼Ÿæ¥æ®µGifæ¥è¡¨è¾¾ä¸€ä¸‹æˆ‘çš„å¿§ä¼¤ï¼Œæ•æˆ‘å¹´å°‘æ— çŸ¥ã€‚<br><img src="/resources/64AC4E1386A9032ED73A4E7B68E4B08D.gif" alt="æœªå‘½å.gif"><br>ï¼ï¼ï¼è¿è¡Œä¸­çš„æ–­ç‚¹ç«Ÿç„¶è¿˜èƒ½ç§»åŠ¨ï¼Œå…³é”®æ˜¯è¿˜èƒ½å¤Ÿå›é€€æ‰§è¡Œã€‚OKï¼Œå›åˆ°æ­£é¢˜ï¼Œè¿™åº”è¯¥æ˜¯ä¹‹å‰å°±æœ‰çš„å§ï¼Œæˆ‘åªæ˜¯ä¸çŸ¥é“è€Œå·²ã€‚è§†é¢‘ä¸­ä»‹ç»äº†å¦å¤–ä¸€ç§å§¿åŠ¿ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ã€‚å›¾ä¸­ï¼Œè¿™å¥jumpçš„åŠ¨ç”»è¢«æ³°å›½äº†ï¼Œæ‰§è¡Œäº†æ‰‹åŠ¨æ‰§è¡Œçš„åŠ¨ç”»ï¼Œå¹¶ä¸”ä¸ºfalseã€‚<br><img src="/resources/8561122F2D0DFE9BFF98E8ABF62EDFEA.jpg" alt="IMAGE"></p><h3 id="watch-point-å±æ€§çš„ç›‘å¬"><a href="#watch-point-å±æ€§çš„ç›‘å¬" class="headerlink" title="watch point å±æ€§çš„ç›‘å¬"></a>watch point å±æ€§çš„ç›‘å¬</h3><p>OKï¼Œè¿™å°±åƒæ˜¯è¿è¡ŒæœŸçš„KVO ä¸­setç‚’ä½œä¸€æ ·ç†è§£å°±OKäº†ã€‚<br>å½“æˆ‘ä»¬åœ¨å±æ€§åˆ—è¡¨é‡Œé¢Watchäº†ä¹‹åï¼Œå°±å¯ä»¥æ•è·åˆ°è¿™ä¸ªå±æ€§çš„å˜åŒ–äº†<br><img src="/resources/96CC650A97A1106370FBF1FC7D87AEB7.jpg" alt="IMAGE"><br><img src="/resources/E5F2CE69A63044C3CF887BBC228A8778.jpg" alt="IMAGE"></p><h3 id="è€ç”Ÿå¸¸è°ˆçš„Swiftè°ƒç”¨OC"><a href="#è€ç”Ÿå¸¸è°ˆçš„Swiftè°ƒç”¨OC" class="headerlink" title="è€ç”Ÿå¸¸è°ˆçš„Swiftè°ƒç”¨OC"></a>è€ç”Ÿå¸¸è°ˆçš„Swiftè°ƒç”¨OC</h3><p>åœ¨ç”¨Swiftçš„æ—¶å€™ï¼Œæœ‰äº›OCå‡½æ•°æ˜¯æ— æ³•åœ¨LLDBä¸­ä½¿ç”¨çš„ã€‚like view.recursiveDescriptionã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">expression -l objc -O -- &lt;expr&gt;</div></pre></td></tr></table></figure></p><p><img src="/resources/5DFB3DE6902432B7376AB079104F19E2.jpg" alt="IMAGE"></p><h3 id="æ–­ç‚¹ä¸­ï¼Œç•Œé¢åˆ·æ–°"><a href="#æ–­ç‚¹ä¸­ï¼Œç•Œé¢åˆ·æ–°" class="headerlink" title="æ–­ç‚¹ä¸­ï¼Œç•Œé¢åˆ·æ–°"></a>æ–­ç‚¹ä¸­ï¼Œç•Œé¢åˆ·æ–°</h3><p>æœ‰æ—¶å€™æˆ‘ä»¬è¿›å…¥äº†æ–­ç‚¹ï¼Œåœ¨æ–­ç‚¹çš„æ—¶å€™ï¼Œä¿®æ”¹äº†Frameï¼Œä½†æ˜¯å› ä¸ºè¢«æš‚åœUIæ˜¯ä¸ä¼šåˆ·æ–°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å»è°ƒç”¨åˆ·æ–°<em>expression CATransaction.flush()</em>å·²è¾¾åˆ°ç•Œé¢åˆ·æ–°çš„æ•ˆæœ</p><h3 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è®²çš„å§ï¼Œç»™åˆšæ‰çš„å‘½ä»¤å–ä¸€ä¸ªç®€çŸ­çš„åå­—æ–¹ä¾¿è°ƒç”¨ç½¢äº†<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">command alias poc expression -l objc -O --</div><div class="line">command alias ğŸš½ expression -l objc -- (void)[CATransaction flush]</div></pre></td></tr></table></figure></p><p>(ç”¨ğŸš½æ¥åˆ·æ–°ä¹Ÿæ˜¯éªšçš„)</p><h3 id="ç”¨LLDB-Pythonåº“æ¥è‡ªå®šä¹‰å‘½ä»¤"><a href="#ç”¨LLDB-Pythonåº“æ¥è‡ªå®šä¹‰å‘½ä»¤" class="headerlink" title="ç”¨LLDB-Pythonåº“æ¥è‡ªå®šä¹‰å‘½ä»¤"></a>ç”¨LLDB-Pythonåº“æ¥è‡ªå®šä¹‰å‘½ä»¤</h3><p>è¿™éƒ¨åˆ†è¿˜æ˜¯å‚è€ƒåˆ«äººçš„æ–‡ç« çœ‹çœ‹å§<a href="http://southpeak.github.io/2015/01/25/tool-lldb/" target="_blank" rel="noopener">LLDBè°ƒè¯•å™¨ä½¿ç”¨ç®€ä»‹</a>,åæ­£ä»¥å‰å°±æœ‰äº†ã€‚</p><h3 id="Xibçš„çº¦æŸæ‹·è´"><a href="#Xibçš„çº¦æŸæ‹·è´" class="headerlink" title="Xibçš„çº¦æŸæ‹·è´"></a>Xibçš„çº¦æŸæ‹·è´</h3><p>æ–­ç‚¹çš„æ—¶å€™è¿›å…¥ViewDebugå¯ä»¥ç‚¹å‡»ç›¸å…³çº¦æŸåè¿›è¡Œæ‹·è´ã€‚åœ¨å‘½ä»¤è¡Œè¿›è¡Œç²˜è´´ï¼Œè¿™æ ·ä½ å°±èƒ½æ‹¿åˆ°çº¦æŸå¯¹è±¡çš„åœ°å€ï¼Œè¿›è¡Œè°ƒè¯•ã€‚æ”¹å®Œä¹‹åè¦è®°å¾—åˆ·æ–°ç•Œé¢å“¦~<br><img src="/resources/C946596F700C273F1E9207A19E9CC749.jpg" alt="IMAGE"><br><img src="/resources/00A0909FA1EA8064E74D401361AFC5A7.jpg" alt="IMAGE"></p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>å‰©ä¸‹çš„æ˜¯dark modeå’Œcolorçš„ä¸œè¥¿ï¼Œå¹¶ä¸æ˜¯å¾ˆæœ‰å…´è¶£ï¼Œè‡ªè¡Œè§‚èµ</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™äº›éƒ½åªæ˜¯å…¥é—¨æ“ä½œï¼Œ<a href="https://store.raywenderlich.com/products/advanced-apple-debugging-and-reverse-engineering" target="_blank" rel="noopener">è¿›é˜¶å…¥é—¨</a>æ›´å¤šçš„è¿™æœ¬ä¹¦é‡Œé¢å†™çš„æ›´è¯¦ç»†ä¸€ç‚¹å§ã€‚<br>è¿™äº›éƒ½æ˜¯æé«˜è‡ªå·±å·¥ä½œæ•ˆç‡çš„ä¸œè¥¿ï¼Œä½†æ˜¯å…³é”®è¿˜æ˜¯åœ¨äºç†è§£å’Œå®æˆ˜ï¼Œåªæœ‰é…åˆå¥½äº†æ‰èƒ½å¤Ÿå‘æŒ¥å‡ºæœ€å¤§çš„æ•ˆç›Šã€‚å•å•åªæœ‰äº†è§£å°±åªæ˜¯ä¸ªè£…é¥°å“ç½¢äº†ã€‚ </p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åˆšåšå®Œäº†è¿™ä¸ª&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/412/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Advanced Debugging with Xcode and LLDB Session 412&lt;/a&gt;çš„å¬åŠ›ç»ƒä¹ ï¼Œæ¥å†™ä¸ªå°æ€»ç»“(å—¯ï¼Œåˆå¯ä»¥æ„‰å¿«çš„å¼€å§‹è£…é€¼äº†)ã€‚&lt;br&gt;ç”±äºSwiftå†™çš„ä¸å¤šï¼Œå¯èƒ½æœ‰å‡ ä¸ªå°éƒ¨åˆ†äº†è§£çš„å¹¶ä¸æ˜¯å¾ˆå…¨é¢&lt;/p&gt;
&lt;h2 id=&quot;å¢åŠ äº†Swift-Debugçš„å¯é æ€§&quot;&gt;&lt;a href=&quot;#å¢åŠ äº†Swift-Debugçš„å¯é æ€§&quot; class=&quot;headerlink&quot; title=&quot;å¢åŠ äº†Swift Debugçš„å¯é æ€§&quot;&gt;&lt;/a&gt;å¢åŠ äº†Swift Debugçš„å¯é æ€§&lt;/h2&gt;&lt;h3 id=&quot;Swiftç¬¬ä¸‰æ–¹åº“å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´çš„å±æ€§æ— æ³•æ‰“å°é—®é¢˜ä¿®æ­£&quot;&gt;&lt;a href=&quot;#Swiftç¬¬ä¸‰æ–¹åº“å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´çš„å±æ€§æ— æ³•æ‰“å°é—®é¢˜ä¿®æ­£&quot; class=&quot;headerlink&quot; title=&quot;Swiftç¬¬ä¸‰æ–¹åº“å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´çš„å±æ€§æ— æ³•æ‰“å°é—®é¢˜ä¿®æ­£&quot;&gt;&lt;/a&gt;Swiftç¬¬ä¸‰æ–¹åº“å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´çš„å±æ€§æ— æ³•æ‰“å°é—®é¢˜ä¿®æ­£&lt;/h3&gt;&lt;p&gt;äº§ç”ŸåŸå› å¯ä»¥ç›´æ¥çœ‹è¿™ä¸ª&lt;a href=&quot;https://juejin.im/post/5a52d7cdf265da3e4c07a004&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;é“¾æ¥&lt;/a&gt;&lt;br&gt;å®é™…äº§ç”Ÿçš„æ•ˆæœ&lt;br&gt;&lt;img src=&quot;/resources/C377778880889F7F0B8897607C911E7A.jpg&quot; alt=&quot;IMAGE&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ§åˆ¶å°Swiftç±»å‹ä¿®æ­£&quot;&gt;&lt;a href=&quot;#æ§åˆ¶å°Swiftç±»å‹ä¿®æ­£&quot; class=&quot;headerlink&quot; title=&quot;æ§åˆ¶å°Swiftç±»å‹ä¿®æ­£&quot;&gt;&lt;/a&gt;æ§åˆ¶å°Swiftç±»å‹ä¿®æ­£&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/resources/CDA3BBFB82087B559010B162AAF25A8F.jpg&quot; alt=&quot;IMAGE&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="WWDC" scheme="http://www.zhz.io/tags/WWDC/"/>
    
  </entry>
  
  <entry>
    <title>è®°ä¸€æ¬¡ Alfred Workflowä¸­Confluenceæ”¹é€ </title>
    <link href="http://www.zhz.io/2018/05/18/%E8%AE%B0%E4%B8%80%E6%AC%A1-Alfred-Workflow%E4%B8%ADConfluence%E6%94%B9%E9%80%A0/"/>
    <id>http://www.zhz.io/2018/05/18/è®°ä¸€æ¬¡-Alfred-Workflowä¸­Confluenceæ”¹é€ /</id>
    <published>2018-05-18T06:08:18.000Z</published>
    <updated>2018-05-18T06:10:37.918Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>Confluenceå¯¹äºä¼ä¸šæ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ–‡æ¡£ç®¡ç†å·¥å…·ï¼Œä½†æ˜¯æ¯æ¬¡æˆ‘åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘éƒ½è¦å»è¿›è¡Œä¸€éæ–‡æ¡£ç©ºé—´çš„ç›®å½•æŸ¥æ‰¾ã€‚<br>è™½ç„¶æä¾›äº†æœç´¢åŠŸèƒ½ï¼Œä½†æ˜¯æœç´¢çš„å»¶æ—¶ï¼Œä½¿ç”¨ä¾¿æ·åº¦ï¼Œéƒ½å­˜åœ¨ä¸€å®šçš„é—®é¢˜ã€‚ï¼ˆå“¦ï¼Œå¯¹äº†æˆ‘ä»¬çš„Confluenceæ˜¯æ¯”è¾ƒä½ç‰ˆæœ¬çš„ï¼Œå¤ªè€äº†ï¼Œä¸€æ¬¡æœç´¢50æ¡ï¼‰<br>é‚£ä¹ˆï¼Œæƒ³äº†ä¸€ä¸‹å¦‚ä½•å»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼ŒMacä¸­ä¸‡èƒ½çš„Alfred Workflowå°±æ˜¯ç”¨æ¥è§£å†³ä¸€ç³»åˆ—çš„å·¥ä½œæ•ˆç‡çš„é—®é¢˜çš„ã€‚<br>æ‰€ä»¥æˆ‘åœ¨å°è¯•èƒ½ä¸èƒ½ç”¨Alfred Workflowæ¥è¿›è¡Œæ–‡æ¡£æ ‡é¢˜çš„æœç´¢ã€‚<br>OKåšè¿™ä¸ªäº‹æƒ…ä¹‹å‰ï¼Œå…ˆæ‰¾ä¸‹ç›®å‰æœ‰æ²¡æœ‰å·²ç»å­˜åœ¨çš„åŒ…æ‹¿æ¥ç›´æ¥ä½¿ç”¨ã€‚<br>æ‰¾åˆ°äº†è¿™ä¸ª<a href="https://github.com/skleinei/alfred-confluence" target="_blank" rel="noopener">Alfred Workflow</a>ï¼Œä½†æ˜¯æŒ‰ç…§ä»–çš„è®¾ç½®å´å‘ç°æœç´¢ä¸äº†ç»“æœã€‚<br><a id="more"></a></p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>OKï¼Œæˆ‘ä»¬éƒ½çŸ¥é“Alfred Workflowæ˜¯ç”¨pythonå†™çš„ï¼Œ- -å¥½å§ï¼ŒPythonæ—©å¿˜å…‰äº†ï¼Œåæ­£è¯­è¨€å˜›ï¼Œ80%éƒ½ä¸€æ ·çš„ï¼Œå°±éšä¾¿æ”¹æ”¹å¥½äº†ã€‚<br>OKï¼Œåœ¨Debugä¿¡æ¯ä¸­æˆ‘ä»¬å‘ç°ï¼Œå¤§ç¥å†™çš„è„šæœ¬çš„é“¾æ¥ç›´æ¥æŠ¥äº†404<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">14:28:40 alfred-confluence.py:99 DEBUG    Quick Search URL: http://host/json/contentnamesearch.action/rest/quicknav/1/search?os_authType=basic&amp;query=ios</div><div class="line">14:28:40 workflow.py:2243 ERROR    HTTP Error 404: Not Found</div></pre></td></tr></table></figure></p><p>é‚£ä¹ˆæˆ‘ä»¬æ¥æ‰¾ä¸‹å…¬å¸çš„æœç´¢æŒ‰é’®çš„URLæ¥è¯•è¯•ï¼Ÿ<br><a href="http://host/dosearchsite.action?spaceSearch=false&amp;queryString=" target="_blank" rel="noopener">http://host/dosearchsite.action?spaceSearch=false&amp;queryString=</a><br>å¥½åƒä¹Ÿæœ‰é—®é¢˜ï¼Œå› ä¸ºä»–è¾“å‡ºçš„æ˜¯Htmlå†…å®¹ï¼Œæˆ‘å¹¶ä¸èƒ½å»è§£æHtmlçš„ä¸œè¥¿ï¼Œå“‡è´¼çƒ¦ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰Rest APIå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚<br>æ—¢ç„¶æ˜¯Confluenceï¼Œåº”è¯¥æœ‰APIæ–‡æ¡£çš„å§ï¼Œæ‰¾åˆ°å…¬å¸çš„Confluenceç‰ˆæœ¬ï¼Œç„¶åGoogleäº†ä¸€ç•ªï¼Œæ‰¾åˆ°äº†è¿™ä¸ª<a href="https://docs.atlassian.com/DAC/rest/confluence/4.3.7.html" target="_blank" rel="noopener">é“¾æ¥</a>çœ‹åˆ°äº†å›¾ç‰‡ä¸­çš„è¿™ä¸ªï¼Œå“‡è¿™ä¸ªä¸å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¹ˆã€‚<br><img src="/resources/C11BDD5598E2284CFDA97A55806AC3EF.jpg" alt="IMAGE"><br><img src="/resources/C3533F3284F01E0B5AB879A8E173EEFD.jpg" alt="IMAGE"><br>OKï¼Œæˆ‘ä»¬ç›´æ¥æŠŠé“¾æ¥ç»™å¤åˆ¶è¿›å»ï¼Œæ”¹äº†ä¸‹hostã€‚ç„¶åè¿›è¡ŒDEBUGï¼Œå“‡çˆ†ç‚¸ï¼Œè¿˜æ˜¯ä¸è¡Œã€‚æ‹¿åˆ°çš„å‚æ•°ä¸æ˜¯JSONï¼Œå¤§ç¥å†™çš„æ— æ³•è§£æã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">14:36:21 alfred-confluence.py:99 DEBUG    Quick Search URL: http://hots/rest/prototype/1/search?os_authType=basic&amp;query=ios&amp;spaceKey=xxxx&amp;pageSize=10</div><div class="line">14:36:25 workflow.py:2243 ERROR    No JSON object could be decoded</div></pre></td></tr></table></figure></p><p>OKï¼Œæˆ‘ä»¬å»ç›´æ¥ç”¨é˜…è§ˆå™¨è®¿é—®é“¾æ¥ï¼ˆå› ä¸ºé˜…è§ˆå™¨æœ‰ç™»å½•Cookieï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¿›è¡Œè®¿é—®ï¼‰ï¼Œå¾—åˆ°çš„æ•°æ®æ˜¯XMLï¼Œå“‡çˆ†ç‚¸ï¼Œè´¼ä¸æƒ³æè¿™ä¸œè¥¿ã€‚<br>ä½†æ˜¯æ²¡åŠæ³•ï¼Œè¿˜æ˜¯è¦ç”¨çš„ã€‚<br>é‚£ä¹ˆé—®é¢˜å¤„åœ¨XMLæ²¡åŠæ³•è§£æï¼Œå¾—ä¸åˆ°æœ€ç»ˆçš„æ•°æ®ã€‚é‚£ä¹ˆå°±æ¥è§£æXMLå§ï¼Œ- -æˆ‘ä¸ªäººå–œæ¬¢JSONï¼Œç›´æ¥å»Googleäº†ä¸€ä¸ªXMLè½¬JSONçš„åº“ï¼Œæ¥åšï¼ˆä¸»è¦æ˜¯ï¼Œè¯•äº†å¥½å‡ ä¸ªè‡ªå·±å†™çš„è½¬æ¢è«åå…¶å¦™çš„æœ‰é—®é¢˜ï¼‰ã€‚OKï¼Œå®‰è£…ä¸Šxml2Jsonåº“ï¼Œå¾ˆå¿«æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°äº†Jsonä¸²ï¼Œç„¶åJsonè½¬å­—å…¸ã€‚OKæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ç”¨KVCçš„æ–¹å¼æŠŠpageIdå’Œtitleç»™æ‹¿å‡ºæ¥ã€‚ç„¶åæŠŠæ•°æ®æ·»åŠ åˆ°Alfredçš„FeedBackä¹‹ä¸­ã€‚<br>OKï¼Œæˆ‘ä»¬æƒ³è¦çš„æ•°æ®å°±å‡ºæ¥çš„ã€‚</p><h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><p>å—é™äºå…¬å¸Confluenceçš„æ¸£æ¸£è®¿é—®é€Ÿåº¦ï¼Œåªèƒ½é’ˆå¯¹äºæœç´¢æ¡æ•°å’Œè®¿é—®ç©ºé—´è¿›è¡Œé™åˆ¶ã€‚<br>è®¾ç½®å®Œä¹‹åçš„è®¿é—®é€Ÿåº¦å¤§æ¦‚æ˜¯1.5Så·¦å³ï¼Œè¾¾åˆ°äº†ä¸ªäººç†æƒ³çš„è®¿é—®é€Ÿåº¦ï¼Œè¿˜æ˜¯æ¯”è¾ƒèƒ½å¤Ÿæ¥å—çš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;èµ·å› &quot;&gt;&lt;a href=&quot;#èµ·å› &quot; class=&quot;headerlink&quot; title=&quot;èµ·å› &quot;&gt;&lt;/a&gt;èµ·å› &lt;/h2&gt;&lt;p&gt;Confluenceå¯¹äºä¼ä¸šæ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ–‡æ¡£ç®¡ç†å·¥å…·ï¼Œä½†æ˜¯æ¯æ¬¡æˆ‘åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘éƒ½è¦å»è¿›è¡Œä¸€éæ–‡æ¡£ç©ºé—´çš„ç›®å½•æŸ¥æ‰¾ã€‚&lt;br&gt;è™½ç„¶æä¾›äº†æœç´¢åŠŸèƒ½ï¼Œä½†æ˜¯æœç´¢çš„å»¶æ—¶ï¼Œä½¿ç”¨ä¾¿æ·åº¦ï¼Œéƒ½å­˜åœ¨ä¸€å®šçš„é—®é¢˜ã€‚ï¼ˆå“¦ï¼Œå¯¹äº†æˆ‘ä»¬çš„Confluenceæ˜¯æ¯”è¾ƒä½ç‰ˆæœ¬çš„ï¼Œå¤ªè€äº†ï¼Œä¸€æ¬¡æœç´¢50æ¡ï¼‰&lt;br&gt;é‚£ä¹ˆï¼Œæƒ³äº†ä¸€ä¸‹å¦‚ä½•å»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼ŒMacä¸­ä¸‡èƒ½çš„Alfred Workflowå°±æ˜¯ç”¨æ¥è§£å†³ä¸€ç³»åˆ—çš„å·¥ä½œæ•ˆç‡çš„é—®é¢˜çš„ã€‚&lt;br&gt;æ‰€ä»¥æˆ‘åœ¨å°è¯•èƒ½ä¸èƒ½ç”¨Alfred Workflowæ¥è¿›è¡Œæ–‡æ¡£æ ‡é¢˜çš„æœç´¢ã€‚&lt;br&gt;OKåšè¿™ä¸ªäº‹æƒ…ä¹‹å‰ï¼Œå…ˆæ‰¾ä¸‹ç›®å‰æœ‰æ²¡æœ‰å·²ç»å­˜åœ¨çš„åŒ…æ‹¿æ¥ç›´æ¥ä½¿ç”¨ã€‚&lt;br&gt;æ‰¾åˆ°äº†è¿™ä¸ª&lt;a href=&quot;https://github.com/skleinei/alfred-confluence&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Alfred Workflow&lt;/a&gt;ï¼Œä½†æ˜¯æŒ‰ç…§ä»–çš„è®¾ç½®å´å‘ç°æœç´¢ä¸äº†ç»“æœã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>OC ç–¯äººé™¢ - å¼•ç”¨è®¡æ•°</title>
    <link href="http://www.zhz.io/2018/05/05/OC-%E7%96%AF%E4%BA%BA%E9%99%A2-%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0/"/>
    <id>http://www.zhz.io/2018/05/05/OC-ç–¯äººé™¢-å¼•ç”¨è®¡æ•°/</id>
    <published>2018-05-05T07:08:33.000Z</published>
    <updated>2018-05-05T07:12:52.845Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ—©åœ¨MRCæ—¶ä»£ï¼Œå¼•ç”¨è®¡æ•°æ˜¯ç”±æˆ‘ä»¬å¼€å‘è€…è‡ªå·±æ§åˆ¶çš„ï¼Œä½†æ˜¯åˆ°äº†ARCæ—¶ä»£ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬åšäº†å¼•ç”¨è®¡æ•°ç®¡ç†è¿™ä¸€æ­¥ã€‚è¿™è¾¹çš„æè¿°ï¼Œå°±æ˜¯ä¸ºäº†è§£å¯†ï¼Œå¼•ç”¨è®¡æ•°æ˜¯å¦‚ä½•å®ç°çš„ã€‚å¦‚æœä¸çŸ¥é“ä»€ä¹ˆæ˜¯å¼•ç”¨è®¡æ•°ï¼Œè¯·å‚è€ƒå…¶ä»–äººçš„æ–‡ç« ~</p><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>æœ¬æ–‡çš„æ‰€æœ‰å†…å®¹å‡å·²ä¸‹è¿°æ ‡å‡†ä¸‹è¿›è¡Œçš„å®éªŒ</p><ul><li><a href="https://github.com/RetVal/objc-runtime" target="_blank" rel="noopener">objcæºç ï¼ˆå¯ç¼–è¯‘ç‰ˆæœ¬ï¼‰,tagå·ä¸º723ç‰ˆæœ¬</a></li><li><a href="https://github.com/nianran/objc-runtime/tree/Feature/translation" target="_blank" rel="noopener">ä¸ªäººå®éªŒçš„è·¯å¾„,åŒ…å«éƒ¨åˆ†Demoï¼Œä»¥åŠæºç æ³¨è§£ï¼Œæ¬¢è¿æŒ‡æ•™</a></li><li>Xcode Version 9.3 (9E145)</li><li>Hopper Disassembler v4</li><li>ä»¥æ¨¡æ‹Ÿå™¨ä¸ºå‡†çš„è¯æ˜¯x86_64ï¼Œä¸åŒæ¶æ„ä¼šæœ‰åŒºåˆ«</li><li>æœ¬æ¬¡å®éªŒå†…å®¹ï¼Œä¸æ¶‰åŠæŒ‡é’ˆä¼˜åŒ–ï¼ˆTaggedPointerï¼‰<a id="more"></a></li></ul><h2 id="ISA"><a href="#ISA" class="headerlink" title="ISA"></a>ISA</h2><p>åœ¨äº†è§£å¼•ç”¨è®¡æ•°å‰ï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ISAçš„isa_tçš„ç»“æ„ä½“ä¸­éƒ¨åˆ†å†…å®¹<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// ç”±äºæˆ‘ä»¬çš„å®éªŒæ˜¯åŸºäºx86_64çš„è¿™è¾¹å°±åˆ—ä¸¾äº†x86_64çš„ç»“æ„ä½“</div><div class="line">    struct &#123;</div><div class="line">        uintptr_t nonpointer        : 1;</div><div class="line">        uintptr_t has_assoc         : 1;</div><div class="line">        uintptr_t has_cxx_dtor      : 1;</div><div class="line">        uintptr_t shiftcls          : 44; // MACH_VM_MAX_ADDRESS 0x7fffffe00000</div><div class="line">        uintptr_t magic             : 6;</div><div class="line">        uintptr_t weakly_referenced : 1;</div><div class="line">        uintptr_t deallocating      : 1;</div><div class="line">        uintptr_t has_sidetable_rc  : 1;</div><div class="line">        uintptr_t extra_rc          : 8;</div><div class="line">#       define RC_ONE   (1ULL&lt;&lt;56)</div><div class="line">#       define RC_HALF  (1ULL&lt;&lt;7)</div><div class="line">    &#125;;</div></pre></td></tr></table></figure></p><p>å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„æ˜¯æœ‰ä¸¤ä¸ªå­—æ®µï¼Œæˆ‘ä»¬å…ˆæ¥åšä¸€ä¸‹ç®€å•çš„äº†è§£<em>extra_rc</em>å’Œ<em>has_sidetable_rc</em>,è¿™ä¸¤ä¸ªå˜é‡å°±æ˜¯ç”¨æ¥å­˜å‚¨å¼•ç”¨è®¡æ•°çš„å…³é”®å†…å®¹ã€‚<br><em>extra_rc</em> : ç”¨8ä½æ¥å­˜å‚¨å¼•ç”¨è®¡æ•°å¤§å° -&gt;256<br><em>has_sidetable_rc</em> : å¦‚æœ<em>extra_rc</em>ä¸å¤Ÿå­˜å‚¨äº†ï¼Œé‚£ä¹ˆå°±ä¼šæ ‡è®°<em>has_sidetable_rc</em>ä¸º1ï¼Œå¹¶ä¸”å­˜å‚¨åˆ°å¦å¤–ä¸€ä¸ªTableè¡¨ä¸­</p><h2 id="retain"><a href="#retain" class="headerlink" title="retain"></a>retain</h2><h3 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>ç”¨äºå¼•ç”¨è®¡æ•°åŠ 1çš„æ“ä½œçš„å‡½æ•°<br>retainå‡½æ•°å†…å®é™…æ˜¯è°ƒç”¨rootRetainå‡½æ•°ã€‚</p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">ALWAYS_INLINE <span class="keyword">id</span> </div><div class="line">objc_object::rootRetain(<span class="keyword">bool</span> tryRetain, <span class="keyword">bool</span> handleOverflow)</div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="keyword">bool</span> sideTableLocked = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">bool</span> transcribeToSideTable = <span class="literal">false</span>;</div><div class="line"></div><div class="line">    isa_t oldisa;</div><div class="line">    isa_t newisa;</div><div class="line"></div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">        transcribeToSideTable = <span class="literal">false</span>;</div><div class="line">        oldisa = LoadExclusive(&amp;isa.bits);</div><div class="line">        newisa = oldisa;</div><div class="line">        <span class="comment">// carry Flag</span></div><div class="line">        uintptr_t carry;</div><div class="line">        <span class="comment">// å…ˆå­˜å‚¨åœ¨extra_rcå­—æ®µä¸­</span></div><div class="line">        <span class="comment">// carryæ ‡è¯†è¶…è¿‡äº†256ä¹‹åä¼šå­˜å‚¨åœ¨å…¶ä»–åœ°æ–¹ å¹¶ä¸”extra_rcå‡åŠ è¿”å›carry ä¸º1</span></div><div class="line">        <span class="comment">// è¿™ä¸ªä»£ç æ²¡æ‰¾åˆ°æºç ï¼Œç½‘å€æ˜¯åˆ«äººçš„ç ”ç©¶æˆæœ</span></div><div class="line">        <span class="comment">// https://www.jianshu.com/p/18c3e88dfbf1</span></div><div class="line">        newisa.bits = addc(newisa.bits, RC_ONE, <span class="number">0</span>, &amp;carry);  <span class="comment">// extra_rc++</span></div><div class="line">        <span class="keyword">if</span> (slowpath(carry)) &#123;</div><div class="line">            <span class="comment">// newisa.extra_rc++ overflowed</span></div><div class="line">            <span class="keyword">if</span> (!handleOverflow) &#123;</div><div class="line">                ClearExclusive(&amp;isa.bits);</div><div class="line">                <span class="comment">// carryä¸º1çš„æ—¶å€™ï¼Œé‡æ–°è¿›å…¥rootRetainå‡½æ•°ï¼Œè¿›å…¥SideTableçš„åŠ å…¥</span></div><div class="line">                <span class="keyword">return</span> rootRetain_overflow(tryRetain);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (!tryRetain &amp;&amp; !sideTableLocked) sidetable_lock();</div><div class="line">            sideTableLocked = <span class="literal">true</span>;</div><div class="line">            transcribeToSideTable = <span class="literal">true</span>;</div><div class="line">            newisa.extra_rc = RC_HALF;</div><div class="line">            newisa.has_sidetable_rc = <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// å­˜å‚¨æ–°çš„bitsè¿›å…¥isa</span></div><div class="line">    &#125; <span class="keyword">while</span> (slowpath(!StoreExclusive(&amp;isa.bits, oldisa.bits, newisa.bits)));</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (slowpath(transcribeToSideTable)) &#123;</div><div class="line">        <span class="comment">// å­˜å‚¨ä¸€åŠçš„å®¹é‡åˆ°SideTableä¸­ï¼Œx86ä¸‹å³ä¸º128</span></div><div class="line">        sidetable_addExtraRC_nolock(RC_HALF);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (slowpath(!tryRetain &amp;&amp; sideTableLocked)) sidetable_unlock();</div><div class="line">    <span class="keyword">return</span> (<span class="keyword">id</span>)<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">NEVER_INLINE <span class="keyword">id</span> </div><div class="line">objc_object::rootRetain_overflow(<span class="keyword">bool</span> tryRetain)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> rootRetain(tryRetain, <span class="literal">true</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>æœ‰ç‚¹é•¿~ç®€åŒ–æˆæµç¨‹å›¾ï¼Œæ”¾åˆ°è¿™è¾¹äº†ï¼Œä»£ç å°±ä¸è´´äº†ã€‚</p><h3 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h3><p><img src="/resources/C8D636CA6528A23616F47E330C0BE509.png" alt="retain.png"></p><blockquote><p>æµç¨‹å›¾ä¸ºäº†æ–¹ä¾¿åŒºåˆ†ï¼Œåˆ†äº†ä¸¤æ¡çº¿ã€‚</p></blockquote><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>æ€»çš„æ¥è¯´<em>extra_rc</em>å’Œ<em>has_sidetable_rc</em>åŠ ä¸ŠSideTableæ¥æ§åˆ¶å¼•ç”¨è®¡æ•°çš„</li><li><em>extra_rc</em>å­˜å‚¨é‡æ¯”è¾ƒå°çš„è®¡æ•°æ ‡è¯†ï¼Œæº¢å‡ºåˆ™ç§»å‡ºä¸€éƒ¨åˆ†äº¤ç”±å¦å¤–ä¸¤ä¸ªå€¼</li><li><em>has_sidetable_rc</em>åªæ˜¯æ ‡è¯†æ˜¯å¦æœ‰SideTableçš„å­˜åœ¨ï¼Œå…·ä½“æº¢å‡ºçš„å€¼è¿˜æ˜¯å­˜å‚¨åœ¨SideTableä¸­çš„</li><li><em>SideTable</em>ï¼Œç”¨æ¥å­˜å‚¨æº¢å‡ºçš„å¼•ç”¨è®¡æ•°çš„Mapçš„ï¼Œå½“ç„¶ä»–è¿˜æœ‰å…¶ä»–ä½œç”¨ï¼Œè¿™è¾¹å°±åªè¯´æ˜è¿™ä¸ª</li></ul><blockquote><p>ç³»ç»Ÿæ˜¯å…è®¸é‡å†™retain/releaseè¿™äº›å‡½æ•°çš„ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨çœŸæ­£çš„rootRetainä¹‹å‰ä¼šåˆ¤æ–­æœ‰æ²¡æœ‰å®ç°è‡ªå®šä¹‰çš„retainå‡½æ•°<br>SideTableçš„å…·ä½“å®ç°éƒ¨åˆ†æ²¡æœ‰å…·ä½“æºç å°±ä¸æ·±ç©¶äº†ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„SideTableæ˜¯ç‹¬ç«‹çš„ï¼Œåªè¦äº†è§£è‡³æ­¤æˆ‘è§‰å¾—å·²ç»å¤Ÿäº†</p></blockquote><h2 id="release"><a href="#release" class="headerlink" title="release"></a>release</h2><h3 id="æè¿°-1"><a href="#æè¿°-1" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>ç”¨äºå¼•ç”¨è®¡æ•°å‡1çš„å‡½æ•°ï¼Œå½“å¼•ç”¨è®¡æ•°çœŸæ­£ä¸º0çš„æ—¶å€™ï¼Œåˆ™è°ƒç”¨çœŸæ­£çš„Release</p><h3 id="æµç¨‹å›¾-1"><a href="#æµç¨‹å›¾-1" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h3><p><img src="/resources/32AEF7ED85A3955A807C73BAB2D37C72.png" alt="release.png"></p><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>å¼•ç”¨è®¡æ•°å…ˆä»<em>extra_rc</em>ä¸­è¿›è¡Œå‡1æ“ä½œ</li><li>å¦‚æœ<em>extra_rc</em>ä¸º0ï¼Œé‚£ä¹ˆæ£€æŸ¥<em>SideTable</em>ï¼Œå¦‚æœ<em>SideTable</em>ä¸­æœ‰æ•°å€¼ï¼Œåˆ™å–å‡º<em>extra_rc</em>å®¹é‡ä¸€åŠçš„æ•°å€¼ï¼Œå­˜å…¥<em>extra_rc</em>ï¼Œå†åšå‡æ³•</li><li>å½“<em>extra_rc</em>å’Œ<em>SideTable</em>çš„å¼•ç”¨è®¡æ•°éƒ½ä¸º0çš„æ—¶å€™ï¼Œåˆ©ç”¨<em>msgSend</em>å‡½æ•°è¿›è¡ŒçœŸæ­£çš„deallocå‡½æ•°çš„è°ƒç”¨</li></ul><h2 id="å¼•ç”¨è®¡æ•°æ€»ç»“"><a href="#å¼•ç”¨è®¡æ•°æ€»ç»“" class="headerlink" title="å¼•ç”¨è®¡æ•°æ€»ç»“"></a>å¼•ç”¨è®¡æ•°æ€»ç»“</h2><p>å¼•ç”¨è®¡æ•°çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå±æ€§çš„åŠ å‡ä»¥åŠä¸€ä¸ªTableçš„å­˜å‚¨ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæ¯”è¾ƒé«˜æ·±çš„ä¸œè¥¿ã€‚åªå½“äº†è§£å³å¯~</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æ—©åœ¨MRCæ—¶ä»£ï¼Œå¼•ç”¨è®¡æ•°æ˜¯ç”±æˆ‘ä»¬å¼€å‘è€…è‡ªå·±æ§åˆ¶çš„ï¼Œä½†æ˜¯åˆ°äº†ARCæ—¶ä»£ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬åšäº†å¼•ç”¨è®¡æ•°ç®¡ç†è¿™ä¸€æ­¥ã€‚è¿™è¾¹çš„æè¿°ï¼Œå°±æ˜¯ä¸ºäº†è§£å¯†ï¼Œå¼•ç”¨è®¡æ•°æ˜¯å¦‚ä½•å®ç°çš„ã€‚å¦‚æœä¸çŸ¥é“ä»€ä¹ˆæ˜¯å¼•ç”¨è®¡æ•°ï¼Œè¯·å‚è€ƒå…¶ä»–äººçš„æ–‡ç« ~&lt;/p&gt;
&lt;h2 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡çš„æ‰€æœ‰å†…å®¹å‡å·²ä¸‹è¿°æ ‡å‡†ä¸‹è¿›è¡Œçš„å®éªŒ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/RetVal/objc-runtime&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;objcæºç ï¼ˆå¯ç¼–è¯‘ç‰ˆæœ¬ï¼‰,tagå·ä¸º723ç‰ˆæœ¬&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/nianran/objc-runtime/tree/Feature/translation&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ä¸ªäººå®éªŒçš„è·¯å¾„,åŒ…å«éƒ¨åˆ†Demoï¼Œä»¥åŠæºç æ³¨è§£ï¼Œæ¬¢è¿æŒ‡æ•™&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Xcode Version 9.3 (9E145)&lt;/li&gt;
&lt;li&gt;Hopper Disassembler v4&lt;/li&gt;
&lt;li&gt;ä»¥æ¨¡æ‹Ÿå™¨ä¸ºå‡†çš„è¯æ˜¯x86_64ï¼Œä¸åŒæ¶æ„ä¼šæœ‰åŒºåˆ«&lt;/li&gt;
&lt;li&gt;æœ¬æ¬¡å®éªŒå†…å®¹ï¼Œä¸æ¶‰åŠæŒ‡é’ˆä¼˜åŒ–ï¼ˆTaggedPointerï¼‰
    
    </summary>
    
    
      <category term="OC ç–¯äººé™¢" scheme="http://www.zhz.io/tags/OC-%E7%96%AF%E4%BA%BA%E9%99%A2/"/>
    
  </entry>
  
  <entry>
    <title>OC ç–¯äººé™¢ - Autorelease</title>
    <link href="http://www.zhz.io/2018/05/05/OC-%E7%96%AF%E4%BA%BA%E9%99%A2-Autorelease/"/>
    <id>http://www.zhz.io/2018/05/05/OC-ç–¯äººé™¢-Autorelease/</id>
    <published>2018-05-05T07:07:16.000Z</published>
    <updated>2018-05-08T09:59:30.761Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Autorelease-&gt;è‹¹æœåœ¨å†…å­˜ç®¡ç†æ–¹é¢çš„ä¼˜åŒ–ç­–ç•¥ï¼Œæ—¨åœ¨æ–¹ä¾¿å¼€å‘è€…æ›´åŠ è‰¯å¥½çš„ç®¡ç†å¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Œåšåˆ°OCå¯¹è±¡æ— éœ€å¼€å‘è€…æ‰‹åŠ¨è¿›è¡Œé‡Šæ”¾æ“ä½œã€‚<br>å…¶æ˜¯åœ¨OCä»MRCè½¬å˜ä¸ºARCä¸­é—´å½¢æˆçš„äº§ç‰©ã€‚</p><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>æœ¬æ–‡çš„æ‰€æœ‰å†…å®¹å‡å·²ä¸‹è¿°æ ‡å‡†ä¸‹è¿›è¡Œçš„å®éªŒ</p><ul><li><a href="https://github.com/RetVal/objc-runtime" target="_blank" rel="noopener">objcæºç ï¼ˆå¯ç¼–è¯‘ç‰ˆæœ¬ï¼‰,tagå·ä¸º723ç‰ˆæœ¬</a></li><li><a href="https://github.com/nianran/objc-runtime/tree/Feature/translation" target="_blank" rel="noopener">ä¸ªäººå®éªŒçš„è·¯å¾„,åŒ…å«éƒ¨åˆ†Demoï¼Œä»¥åŠæºç æ³¨è§£ï¼Œæ¬¢è¿æŒ‡æ•™</a></li><li>Xcode Version 9.3 (9E145)</li><li>Hopper Disassembler v4</li></ul><h2 id="ä»æœ€ç†Ÿæ‚‰çš„åœ°æ–¹å¼€å§‹"><a href="#ä»æœ€ç†Ÿæ‚‰çš„åœ°æ–¹å¼€å§‹" class="headerlink" title="ä»æœ€ç†Ÿæ‚‰çš„åœ°æ–¹å¼€å§‹"></a>ä»æœ€ç†Ÿæ‚‰çš„åœ°æ–¹å¼€å§‹</h2><p>mainå‡½æ•°ï¼Œæ•²è¿‡ä»£ç çš„éƒ½çŸ¥é“ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æ˜¯ä»mainå‡½æ•°å¼€å§‹çš„ï¼ˆå†™ä¸ªHello,world!,å“ˆå“ˆå“ˆï¼‰<br>OKï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»mainå‡½æ•°å¼€å§‹ï¼Œä¸‹é¢è´´çš„å°±æ˜¯mainå‡½æ•°åœ¨ç¼–è¯‘å‰å’Œç¼–è¯‘åï¼ˆåç¼–è¯‘å‡ºæ¥ï¼‰çš„å¯¹æ¯”<br><a id="more"></a><br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åŸä»£ç </span></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</div><div class="line">    <span class="keyword">@autoreleasepool</span> &#123;</div><div class="line">        testRetainCount();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">// Hopper åç¼–è¯‘åçš„ä»£ç </span></div><div class="line"><span class="keyword">int</span> _main(<span class="keyword">int</span> arg0, <span class="keyword">int</span> arg1) &#123;</div><div class="line">    <span class="keyword">void</span> *context = objc_autoreleasePoolPush();</div><div class="line">    _testRetainCount();</div><div class="line">    objc_autoreleasePoolPop(context);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>ä»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°@autoreleasepool{}è¿™ä¸ªä¸œè¥¿å®è´¨ä¸Šæ˜¯è¢«æ›¿æ¢æˆäº†ä»¥å‰ä»¥åçš„ä¸¤ä¸ªå‡½æ•°</p><ul><li>objc_autoreleasePoolPush()</li><li>objc_autoreleasePoolPop(void *)<br>OKï¼Œåœ¨è®²è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹è¿™ä¹ˆä¸€ä¸ªç±»AutoreleasePoolPage</li></ul><h2 id="AutoreleasePoolPage"><a href="#AutoreleasePoolPage" class="headerlink" title="AutoreleasePoolPage"></a>AutoreleasePoolPage</h2><h3 id="AutoreleasePoolPageç±»çš„ç®€ä»‹"><a href="#AutoreleasePoolPageç±»çš„ç®€ä»‹" class="headerlink" title="AutoreleasePoolPageç±»çš„ç®€ä»‹"></a>AutoreleasePoolPageç±»çš„ç®€ä»‹</h3><p>AutoreleasePoolPage(è‡ªåŠ¨é‡Šæ”¾æ± é¡µï¼Ÿè¿™ä¸ªç¿»è¯‘å¥½å¥‡æ€ªï¼Œæˆ‘ä»¬è¿™è¾¹å°±çº¦å®šä¸ºé‡Šæ”¾é¡µ/pageå§)ã€‚<br>é‚£ä¹ˆè¿™ä¸ªä¸œè¥¿æ˜¯ä»€ä¹ˆå‘¢ï¼Œå®ƒå…¶å®æ˜¯ç”¨æ¥ç®¡ç†éœ€è¦è‡ªåŠ¨é‡Šæ”¾å¯¹è±¡çš„ä¸€ä¸ª<a href="https://zh.wikipedia.org/zh-hans/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8" target="_blank" rel="noopener">åŒå‘é“¾è¡¨</a><br>OK,æˆ‘ä»¬ç›—ä¸ªå›¾ï¼Œå˜»å˜»<a href="https://blog.sunnyxx.com/2014/10/15/behind-autorelease/" target="_blank" rel="noopener">æ¥æº</a><br><img src="http://ww2.sinaimg.cn/mw690/51530583gw1elj2ugt21wj20f109m3zl.jpg" alt="AutoreleasePoolPageç±»"><br>ç®€å•ä»‹ç»ä¸€ä¸‹å…ƒç´ </p><ul><li>next:ä½œä¸ºä¸€ä¸ªæ¸¸æ ‡ï¼Œç”¨æ¥æŒ‡å®šä¸‹ä¸€ä¸ªä¼šè¢«æ·»åŠ è¿›æ¥çš„å¯¹è±¡çš„èµ·å§‹åœ°å€</li><li>thread:å½“å‰pageæ‰€åœ¨çš„çº¿ç¨‹ï¼ˆpageå’Œçº¿ç¨‹æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼‰</li><li>child/parent:åŒå‘é“¾è¡¨çš„ç¦å­—èŠ‚ç‚¹ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´æ˜çš„ã€‚</li><li>Size:ä¸€ä¸ªpageè¢«å®å®šä¹‰çš„SIZEé™åˆ¶åœ¨äº†4096å­—èŠ‚ï¼Œæ‰€ä»¥è¶…è¿‡4Kçš„è¯ï¼Œå°±ä¼šåˆ›å»ºæ–°çš„childpageæ¥å­˜å‚¨</li><li>depth:é“¾è¡¨æ·±åº¦ï¼Œæ ¹é“¾è¡¨ä¸º0ï¼Œåç»­æŒç»­+1</li></ul><p>OKï¼Œçœ‹å®Œäº†å›¾ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹AutoreleasePoolPageçš„æ„é€ å‡½æ•°<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ„é€ å‡½æ•°</span></div><div class="line">AutoreleasePoolPage(AutoreleasePoolPage *newParent) </div><div class="line">    : magic(), next(begin()), thread(pthread_self()),</div><div class="line">      parent(newParent), child(<span class="literal">nil</span>), </div><div class="line">      depth(parent ? <span class="number">1</span>+parent-&gt;depth : <span class="number">0</span>), </div><div class="line">      hiwat(parent ? parent-&gt;hiwat : <span class="number">0</span>)</div><div class="line">&#123; </div><div class="line">    <span class="keyword">if</span> (parent) &#123;</div><div class="line">        parent-&gt;check();</div><div class="line">        assert(!parent-&gt;child);</div><div class="line">        parent-&gt;unprotect();</div><div class="line">        parent-&gt;child = <span class="keyword">this</span>;</div><div class="line">        parent-&gt;protect();</div><div class="line">    &#125;</div><div class="line">    protect();</div><div class="line">&#125;</div><div class="line"><span class="comment">// beginå‡½æ•°</span></div><div class="line"><span class="keyword">id</span> * begin() &#123;</div><div class="line">    <span class="keyword">return</span> (<span class="keyword">id</span> *) ((uint8_t *)<span class="keyword">this</span>+<span class="keyword">sizeof</span>(*<span class="keyword">this</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><blockquote><p>Note: åœ¨C++ä¸­ï¼Œå†’å·åé¢æ˜¯èµ‹å€¼ï¼Œnext(begin())å°±æ˜¯next=begin()</p></blockquote><p> æœ€åï¼Œåœ¨å†…å­˜ä¸­çš„è¡¨ç°å°±ä¼šå¦‚ä¸‹å›¾æ‰€ç¤º,<a href="https://blog.sunnyxx.com/2014/10/15/behind-autorelease/" target="_blank" rel="noopener">æ¥æº</a><br><img src="http://ww2.sinaimg.cn/mw690/51530583gw1elj5gvphtqj20dy0cx756.jpg" alt="AutoreleasePoolPageå†…å­˜ä¸­çš„è¡¨ç°å½¢å¼"><br>ç»“åˆä»£ç å’Œä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ–°çš„pageçš„nextæŒ‡é’ˆè¢«æŒ‡å‘beginçš„ä½ç½®ï¼ˆå®ä¾‹å†…å­˜ä¹‹åï¼‰</p><h3 id="hotPage"><a href="#hotPage" class="headerlink" title="hotPage()"></a>hotPage()</h3><p>ä»€ä¹ˆæ˜¯hotPageå‘¢ï¼Ÿ<br>hotPageå°±æ˜¯å½“å‰å†…å­˜ä¸­æœ€æ´»è·ƒçš„é‚£ä¸€é¡µ,è¢«ç”¨æ¥å­˜å‚¨å½“å‰çº¿ç¨‹å¿«é€Ÿå­˜å‚¨çš„å¯¹è±¡çš„æ—¶å€™ä½¿ç”¨çš„ã€‚<br>è·å–çš„æ–¹å¼TLSï¼ˆThread Local Storageï¼‰ï¼Œè¿™å—å¹¶ä¸æ‡‚ï¼Œä¹Ÿä¸æƒ³æ·±ç©¶ï¼Œç®€å•æ˜äº†çš„ç†è§£å°±æ˜¯ä¸€ä¸ªå…¨å±€è¡¨ï¼Œç”¨keyæ¥æ¢å–valueï¼Œvalueå°±æ˜¯å½“å‰çš„æ´»è·ƒé¡µã€‚<br>å¦‚æœ‰å…´è¶£äº†è§£TLSå‚è€ƒ<a href="https://blog.sunnyxx.com/2014/10/15/behind-autorelease/" target="_blank" rel="noopener">å¤§ç¥åšå®¢</a></p><h2 id="å¯¹è±¡æ˜¯ä½•æ—¶è¢«åŠ å…¥åˆ°pageä¸­çš„å‘¢ï¼Ÿ"><a href="#å¯¹è±¡æ˜¯ä½•æ—¶è¢«åŠ å…¥åˆ°pageä¸­çš„å‘¢ï¼Ÿ" class="headerlink" title="å¯¹è±¡æ˜¯ä½•æ—¶è¢«åŠ å…¥åˆ°pageä¸­çš„å‘¢ï¼Ÿ"></a>å¯¹è±¡æ˜¯ä½•æ—¶è¢«åŠ å…¥åˆ°pageä¸­çš„å‘¢ï¼Ÿ</h2><h3 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h3><p>åœ¨å¼€å§‹è®²å¯¹è±¡æ˜¯æ€ä¹ˆè¢«åŠ å…¥é¡µä¸­ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªå®éªŒä¸­æ¥çœ‹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">void</span> * -[Person person](<span class="keyword">void</span> * <span class="keyword">self</span>, <span class="keyword">void</span> * _cmd) &#123;</div><div class="line">    var_18 = [[Person alloc] init];</div><div class="line">    var_28 = [var_18 <span class="keyword">retain</span>];</div><div class="line">    objc_storeStrong(var_18, <span class="number">0x0</span>);</div><div class="line">    rax = [var_28 autorelease];</div><div class="line">    <span class="keyword">return</span> rax;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (Person *)person &#123;</div><div class="line">    Person *person = [[Person alloc] init];</div><div class="line">    <span class="keyword">return</span> person;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> -[Person person1](<span class="keyword">void</span> * <span class="keyword">self</span>, <span class="keyword">void</span> * _cmd) &#123;</div><div class="line">    rdi = var_18;</div><div class="line">    [[Person alloc] init];</div><div class="line">    objc_storeStrong(rdi, <span class="number">0x0</span>);</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="keyword">void</span>)person1 &#123;</div><div class="line">    Person *person = [[Person alloc] init];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h3><p>å¯¹æ¯”ä¸¤ä¸ªå‡½æ•°personå’Œperson1å‡½æ•°ï¼Œä»åç¼–è¯‘å™¨çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯¹äºæ²¡æœ‰è¶…å‡ºä½œç”¨äºèŒƒå›´å‡½æ•°çš„å¯¹è±¡ï¼Œæ˜¯ä¸ä¼šè¢«åŠ å…¥åˆ°autoReleasePoolä¸­çš„ï¼Œä½†æ˜¯å¦‚æœä¼šè¶…å‡ºäº†å‡½æ•°ä½œç”¨äºèŒƒå›´çš„å€¼ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šå¸®åŠ©ä½ ä¸»åŠ¨åŠ ä¸ŠautoReleaseè¿™ä¸ªå‡½æ•°çš„ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹autoReleaseçš„å‡½æ•°è°ƒç”¨å…³ç³»</p><ul><li>[self autorelease]<ul><li>((id)self)-&gt;rootAutorelease();<ul><li>rootAutorelease2();<ul><li>AutoreleasePoolPage::autorelease((id)this); // thiså°±æ˜¯ocä¸­çš„self<ul><li>autoreleaseFast(obj) // objå°±æ˜¯ä¼ å…¥çš„self<ul><li>page-&gt;add(obj)<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">id</span> *autoreleaseFast(<span class="keyword">id</span> obj)</div><div class="line">&#123;</div><div class="line">    <span class="comment">// çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰¾åˆ°å½“å‰é¡µ</span></div><div class="line">    <span class="comment">// hotPage:ä»¥å…¨å±€çš„key(static pthread_key_t const key = AUTORELEASE_POOL_KEY;)å­˜å‚¨çš„ä¸€ä»½å®ä¾‹ï¼ŒåŠ¨æ€æ›´æ–°åŒå‘é¡µé“¾è¡¨ä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></div><div class="line">    <span class="comment">// éƒ½æ˜¯åŒä¸€ä¸ªå¥—è·¯</span></div><div class="line">    <span class="comment">//  1. å­˜åœ¨é¡µ è·³è½¬3</span></div><div class="line">    <span class="comment">//  2. ä¸å­˜åœ¨é¡µ åˆ›å»ºé¡µ è·³è½¬5</span></div><div class="line">    <span class="comment">//  3. é¡µæ˜¯å¦æ»¡äº† è·³è½¬5</span></div><div class="line">    <span class="comment">//  4. æ·»åŠ obj è·³è½¬6</span></div><div class="line">    <span class="comment">//  5. è®¾ç½®hotPage è·³è½¬4</span></div><div class="line">    <span class="comment">//  6. ç»“æŸ</span></div><div class="line">    AutoreleasePoolPage *page = hotPage(); <span class="comment">// æ‰¾åˆ°å½“å‰æ´»è·ƒçš„PoolPage</span></div><div class="line">    <span class="keyword">if</span> (page &amp;&amp; !page-&gt;full()) &#123;</div><div class="line">        <span class="comment">// å­˜åœ¨é¡µ, æœªæ»¡ -&gt; æ·»åŠ </span></div><div class="line">        <span class="keyword">return</span> page-&gt;add(obj);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (page) &#123;</div><div class="line">        <span class="comment">// å­˜åœ¨é¡µ, å·²æ»¡ -&gt; æ–°å»ºåæ·»åŠ </span></div><div class="line">        <span class="keyword">return</span> autoreleaseFullPage(obj, page);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// ä¸å­˜åœ¨é¡µ -&gt; æ–°å»ºé¡µåæ·»åŠ </span></div><div class="line">        <span class="keyword">return</span> autoreleaseNoPage(obj);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><p>å…¶å®addæ“ä½œå°±æ˜¯å°†objçš„æŒ‡é’ˆåŠ å…¥pageçš„nextçš„ä½ç½®ï¼Œç„¶ånextä½ç½®ä¸Šç§»<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">id</span> *add(<span class="keyword">id</span> obj)</div><div class="line">&#123;</div><div class="line">    assert(!full());</div><div class="line">    unprotect();</div><div class="line">    <span class="keyword">id</span> *ret = next;  <span class="comment">// faster than `return next-1` because of aliasing</span></div><div class="line">    *next++ = obj;</div><div class="line">    protect();</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><blockquote><p>objc_storeStrongå¢åŠ å¼•ç”¨è®¡æ•°çš„æ—¶å€™ä½¿ç”¨ï¼Œä½†æ˜¯è¿™è¾¹æ˜¯æˆå‘˜å˜é‡ï¼Œå¹¶ä¸ä¼šå¼•èµ·å¼•ç”¨è®¡æ•°çš„å¢åŠ </p></blockquote><h2 id="å¯¹è±¡åˆæ˜¯ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾çš„å‘¢ï¼Ÿ"><a href="#å¯¹è±¡åˆæ˜¯ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾çš„å‘¢ï¼Ÿ" class="headerlink" title="å¯¹è±¡åˆæ˜¯ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾çš„å‘¢ï¼Ÿ"></a>å¯¹è±¡åˆæ˜¯ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾çš„å‘¢ï¼Ÿ</h2><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°äº†ï¼Œå¯¹è±¡æ˜¯å¦‚ä½•è¢«åŠ å…¥åˆ°pageä¸­çš„ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦äº†è§£ï¼Œå¯¹è±¡çš„é‡Šæ”¾æ—¶æœº</p><h3 id="é‡Šæ”¾"><a href="#é‡Šæ”¾" class="headerlink" title="é‡Šæ”¾"></a>é‡Šæ”¾</h3><p>OKï¼Œé‚£ä¹ˆæˆ‘ä»¬å›åˆ°æ–‡ä¸­æœ€å¼€å§‹çš„é‚£ä¸¤ä¸ªå‡½æ•°<br>objc_autoreleasePoolPush()<br>objc_autoreleasePoolPop(content)<br>æ¯æ¬¡è°ƒç”¨objc_autoreleasePoolPushå…¶å®éƒ½æ˜¯åœ¨ç»™hotPageçš„æ ˆé¡¶æ·»åŠ ä¸€ä¸ªå“¨å…µå¯¹è±¡ï¼Œå€¼ä¸º0ï¼Œé‚£ä¹ˆå°±ä¼šå˜æˆè¿™ä¸ªæ ·å­<br>ï¼ˆç»§ç»­ç›—å›¾<a href="https://blog.sunnyxx.com/2014/10/15/behind-autorelease/" target="_blank" rel="noopener">æ¥æº</a>ï¼‰<br><img src="http://ww2.sinaimg.cn/large/51530583gw1elj5z7hawej20ji0dewff.jpg" alt="å“¨å…µå¯¹è±¡"><br>é‚£ä¹ˆ<em>objc_autoreleasePoolPush()</em>çš„è¿”å›å€¼å°±æ˜¯è¿™ä¸ªå“¨å…µå¯¹è±¡çš„åœ°å€ï¼Œåç»­å¯ä»¥æˆä¸º<em>objc_autoreleasePoolPop</em>çš„å…¥å‚è¿›è¡Œä½¿ç”¨,äºæ˜¯ä¹å°±æœ‰å¦‚ä¸‹ç»“è®º</p><ul><li>æ ¹æ®ä¼ å…¥çš„å“¨å…µå¯¹è±¡åœ°å€ï¼Œæ‰¾åˆ°å¯¹åº”çš„pageé¡µ</li><li>æ ¹æ®pageé¡µå’Œå“¨å…µåœ°å€ï¼Œå°†åœ¨å“¨å…µå¯¹è±¡æ·»åŠ æ—¶é—´åçš„å¯¹è±¡å…¨éƒ¨è°ƒç”¨releaseå‡½æ•°ï¼Œå¹¶é‡ç½®nextæŒ‡é’ˆ</li></ul><h3 id="autoReleaseå’Œrunloopçš„å…³ç³»"><a href="#autoReleaseå’Œrunloopçš„å…³ç³»" class="headerlink" title="autoReleaseå’Œrunloopçš„å…³ç³»"></a>autoReleaseå’Œrunloopçš„å…³ç³»</h3><p>è¿™å—å„¿æ²¡æœ‰ä»”ç»†çš„ç ”ç©¶ï¼ŒæŠ„ä¸€æŠ„åˆ«äººå†™çš„æè¿°,<a href="https://blog.csdn.net/u011619283/article/details/53783650" target="_blank" rel="noopener">æ¥æº</a><br>æˆ‘ä»¬æ€»æ˜¯çœ‹åˆ°æœ‰æ–‡ç« è¯´ç¨‹åºå¯åŠ¨åï¼Œè‹¹æœåœ¨ä¸»çº¿ç¨‹ RunLoop é‡Œæ³¨å†Œäº†ä¸¤ä¸ª Observerï¼š<br>ç¬¬ä¸€ä¸ª Observer ç›‘è§†çš„äº‹ä»¶æ˜¯ Entry(å³å°†è¿›å…¥Loop)ï¼Œå…¶å›è°ƒå†…ä¼šè°ƒç”¨ _objc_autoreleasePoolPush() åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ã€‚å…¶ order æ˜¯-2147483647ï¼Œä¼˜å…ˆçº§æœ€é«˜ï¼Œä¿è¯åˆ›å»ºé‡Šæ”¾æ± å‘ç”Ÿåœ¨å…¶ä»–æ‰€æœ‰å›è°ƒä¹‹å‰ã€‚<br>ç¬¬äºŒä¸ª Observer ç›‘è§†äº†ä¸¤ä¸ªäº‹ä»¶ï¼š BeforeWaiting(å‡†å¤‡è¿›å…¥ç¡çœ ) å’Œ Exit(å³å°†é€€å‡ºLoop)ï¼Œ<br>BeforeWaiting(å‡†å¤‡è¿›å…¥ç¡çœ )æ—¶è°ƒç”¨_objc_autoreleasePoolPop() å’Œ _objc_autoreleasePoolPush() é‡Šæ”¾æ—§çš„æ± å¹¶åˆ›å»ºæ–°æ± ï¼›<br>Exit(å³å°†é€€å‡ºLoop) æ—¶è°ƒç”¨ _objc_autoreleasePoolPop() æ¥é‡Šæ”¾è‡ªåŠ¨é‡Šæ”¾æ± ã€‚è¿™ä¸ª Observer çš„ order æ˜¯ 2147483647ï¼Œä¼˜å…ˆçº§æœ€ä½ï¼Œä¿è¯å…¶é‡Šæ”¾æ± å­å‘ç”Ÿåœ¨å…¶ä»–æ‰€æœ‰å›è°ƒä¹‹åã€‚<br>æ‰“å°å‡ºMainRunLoopï¼Œå¯ä»¥çœ‹åˆ°MainRunLoopçš„ Common mode Items ä¸­å°±æœ‰è¿™ä¸¤ä¸ªè§‚å¯Ÿè€…<br><img src="/resources/D35DF794164F53C79121DA4C53C3CA27.jpg" alt="IMAGE"></p><h2 id="æ‚é¡¹"><a href="#æ‚é¡¹" class="headerlink" title="æ‚é¡¹"></a>æ‚é¡¹</h2><p>ä¿è¯çº¿ç¨‹è®¿é—®å®‰å…¨ï¼Ÿ<br><a href="https://blog.csdn.net/roland_sun/article/details/33728955" target="_blank" rel="noopener">Linuxä¸­mprotect()å‡½æ•°çš„ç”¨æ³•</a><br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">protect();</div><div class="line">unprotect();</div></pre></td></tr></table></figure></p><p>objc_storeStrongçš„ç ”ç©¶<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> objc_storeStrong(<span class="keyword">id</span> *location, <span class="keyword">id</span> obj)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">id</span> prev = *location;</div><div class="line">    <span class="keyword">if</span> (obj == prev) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    objc_retain(obj);</div><div class="line">    *location = obj;</div><div class="line">    objc_release(prev);</div><div class="line">&#125;</div><div class="line"><span class="comment">// çœŸæ­£çš„setæ–¹æ³•ï¼Œæ˜¯ä¸ä¼šç›´æ¥returnæ‰çš„</span></div><div class="line">objc_storeStrong(<span class="number">0x0</span>, rax);</div><div class="line"></div><div class="line"><span class="comment">// ä¸´æ—¶å˜é‡ï¼Œä¼šç›´æ¥åœ¨å†…éƒ¨returnæ‰</span></div><div class="line">objc_storeStrong(var_8, <span class="number">0x0</span>);</div></pre></td></tr></table></figure></p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ol><li><a href="http://blog.sunnyxx.com/2014/10/15/behind-autorelease/" target="_blank" rel="noopener">é»‘å¹•èƒŒåçš„Autorelease</a></li><li><a href="https://blog.csdn.net/u011619283/article/details/53783650" target="_blank" rel="noopener">RunLoopæ€»ç»“ï¼šRunLoop ä¸GCD ã€Autorelease Poolä¹‹é—´çš„å…³ç³»</a></li></ol><!--å®šä¹‰-->]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Autorelease-&amp;gt;è‹¹æœåœ¨å†…å­˜ç®¡ç†æ–¹é¢çš„ä¼˜åŒ–ç­–ç•¥ï¼Œæ—¨åœ¨æ–¹ä¾¿å¼€å‘è€…æ›´åŠ è‰¯å¥½çš„ç®¡ç†å¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Œåšåˆ°OCå¯¹è±¡æ— éœ€å¼€å‘è€…æ‰‹åŠ¨è¿›è¡Œé‡Šæ”¾æ“ä½œã€‚&lt;br&gt;å…¶æ˜¯åœ¨OCä»MRCè½¬å˜ä¸ºARCä¸­é—´å½¢æˆçš„äº§ç‰©ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡çš„æ‰€æœ‰å†…å®¹å‡å·²ä¸‹è¿°æ ‡å‡†ä¸‹è¿›è¡Œçš„å®éªŒ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/RetVal/objc-runtime&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;objcæºç ï¼ˆå¯ç¼–è¯‘ç‰ˆæœ¬ï¼‰,tagå·ä¸º723ç‰ˆæœ¬&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/nianran/objc-runtime/tree/Feature/translation&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ä¸ªäººå®éªŒçš„è·¯å¾„,åŒ…å«éƒ¨åˆ†Demoï¼Œä»¥åŠæºç æ³¨è§£ï¼Œæ¬¢è¿æŒ‡æ•™&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Xcode Version 9.3 (9E145)&lt;/li&gt;
&lt;li&gt;Hopper Disassembler v4&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ä»æœ€ç†Ÿæ‚‰çš„åœ°æ–¹å¼€å§‹&quot;&gt;&lt;a href=&quot;#ä»æœ€ç†Ÿæ‚‰çš„åœ°æ–¹å¼€å§‹&quot; class=&quot;headerlink&quot; title=&quot;ä»æœ€ç†Ÿæ‚‰çš„åœ°æ–¹å¼€å§‹&quot;&gt;&lt;/a&gt;ä»æœ€ç†Ÿæ‚‰çš„åœ°æ–¹å¼€å§‹&lt;/h2&gt;&lt;p&gt;mainå‡½æ•°ï¼Œæ•²è¿‡ä»£ç çš„éƒ½çŸ¥é“ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æ˜¯ä»mainå‡½æ•°å¼€å§‹çš„ï¼ˆå†™ä¸ªHello,world!,å“ˆå“ˆå“ˆï¼‰&lt;br&gt;OKï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»mainå‡½æ•°å¼€å§‹ï¼Œä¸‹é¢è´´çš„å°±æ˜¯mainå‡½æ•°åœ¨ç¼–è¯‘å‰å’Œç¼–è¯‘åï¼ˆåç¼–è¯‘å‡ºæ¥ï¼‰çš„å¯¹æ¯”&lt;br&gt;
    
    </summary>
    
    
      <category term="OC ç–¯äººé™¢" scheme="http://www.zhz.io/tags/OC-%E7%96%AF%E4%BA%BA%E9%99%A2/"/>
    
  </entry>
  
  <entry>
    <title>OC ç–¯äººé™¢ - ISA</title>
    <link href="http://www.zhz.io/2018/05/05/OC-%E7%96%AF%E4%BA%BA%E9%99%A2-ISA/"/>
    <id>http://www.zhz.io/2018/05/05/OC-ç–¯äººé™¢-ISA/</id>
    <published>2018-05-05T07:06:17.000Z</published>
    <updated>2018-05-05T07:09:43.149Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»ISA"><a href="#ä»‹ç»ISA" class="headerlink" title="ä»‹ç»ISA"></a>ä»‹ç»ISA</h2><p>Emmm,è¿™ä¸ªå†™åˆ°åäº†ï¼Œéƒ½ä¸çŸ¥é“çœ‹ç¬¬å‡ éOrå†™ç¬¬å‡ éäº†ï¼Œä»¥å‰å…¬å¸åˆ†äº«çš„ï¼Œä¸èƒ½æ¬å‡ºæ¥ã€‚<br>å¤§å®¶ç›´æ¥çœ‹å¤§ç¥çš„åšå®¢å°±å¯ä»¥äº†ï¼Œåé¢çš„ä¸€äº›ï¼Œæˆ‘æ…¢æ…¢å†™ï¼Œå“ˆå“ˆå“ˆã€‚<br><a href="https://github.com/Draveness/analyze/blob/master/contents/objc/%E4%BB%8E%20NSObject%20%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BA%86%E8%A7%A3%20isa.md" target="_blank" rel="noopener">é“¾æ¥</a><br><a id="more"></a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä»‹ç»ISA&quot;&gt;&lt;a href=&quot;#ä»‹ç»ISA&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»ISA&quot;&gt;&lt;/a&gt;ä»‹ç»ISA&lt;/h2&gt;&lt;p&gt;Emmm,è¿™ä¸ªå†™åˆ°åäº†ï¼Œéƒ½ä¸çŸ¥é“çœ‹ç¬¬å‡ éOrå†™ç¬¬å‡ éäº†ï¼Œä»¥å‰å…¬å¸åˆ†äº«çš„ï¼Œä¸èƒ½æ¬å‡ºæ¥ã€‚&lt;br&gt;å¤§å®¶ç›´æ¥çœ‹å¤§ç¥çš„åšå®¢å°±å¯ä»¥äº†ï¼Œåé¢çš„ä¸€äº›ï¼Œæˆ‘æ…¢æ…¢å†™ï¼Œå“ˆå“ˆå“ˆã€‚&lt;br&gt;&lt;a href=&quot;https://github.com/Draveness/analyze/blob/master/contents/objc/%E4%BB%8E%20NSObject%20%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BA%86%E8%A7%A3%20isa.md&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;é“¾æ¥&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="OC ç–¯äººé™¢" scheme="http://www.zhz.io/tags/OC-%E7%96%AF%E4%BA%BA%E9%99%A2/"/>
    
  </entry>
  
  <entry>
    <title>2017å‚»ç“œå¼æ€»ç»“</title>
    <link href="http://www.zhz.io/2018/01/06/2017%E5%82%BB%E7%93%9C%E5%BC%8F%E6%80%BB%E7%BB%93/"/>
    <id>http://www.zhz.io/2018/01/06/2017å‚»ç“œå¼æ€»ç»“/</id>
    <published>2018-01-06T07:54:09.000Z</published>
    <updated>2018-02-11T09:58:09.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>OK~å·¥ä½œä¸€å¹´äº†å“ˆï¼Œåšå®¢ä¸€ç›´æ²¡æœ‰ç®¡ï¼Œç»„å†…äº‹æƒ…å¤ªå¤šï¼ˆå€Ÿå£ï¼Œå¤ªæ‡’ï¼‰ï¼Œè™½ç„¶å†™äº†ä¸€å †çš„æ–‡ç« ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨ç»„å†…å‘å¸ƒäº†ã€‚å¯¹å¤–ä¹ˆï¼Œéƒ¨åˆ†å—é™äºå…¬å¸åè®®ä¹‹ç±»çš„ï¼Œéƒ¨åˆ†æ˜¯æš‚æ—¶è§‰å¾—æ°´å¹³æœ‰é™ï¼ˆåæ­£ä¹Ÿæ²¡ä»€ä¹ˆäººçœ‹ä¹ˆï¼‰ã€‚</p><h2 id="å›é¡¾2016å¹´ç«‹çš„Flag-amp-Bad"><a href="#å›é¡¾2016å¹´ç«‹çš„Flag-amp-Bad" class="headerlink" title="å›é¡¾2016å¹´ç«‹çš„Flag &amp; Bad"></a>å›é¡¾2016å¹´ç«‹çš„Flag &amp; Bad</h2><ul><li>æ˜ç¡®è‡ªå·±çš„äººç”Ÿç›®æ ‡<br>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œåº”è¯¥è€ƒè™‘äº†å¾ˆä¹…æ‰å¯¹ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰ç»™è‡ªå·±ä¸€ä¸ªæ˜ç¡®çš„ç­”æ¡ˆã€‚<br>ä½†æ˜¯åº”è¯¥æœ‰äº†ä¸€ç³»åˆ—çš„ç›®æ ‡ã€‚<ol><li>è´¢åŠ¡è‡ªç”±ï¼Ÿä¸ä¸ä¸ï¼Œç²¾ç¥è‡ªç”±ã€‚åœ¨40å²ä»¥åèƒ½å¤Ÿè¾¾åˆ°ç²¾ç¥è‡ªç”±ï¼Œä¸å†å—é™äºç”Ÿæ´»ä¸­çš„ç§ç§å› ç´ çš„å¹²æ‰°ã€‚æ¯•ç«Ÿç²¾ç¥è‡ªç”±å–å†³äºä¸ªäººï¼Œæˆ‘è§‰å¾—æˆ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ„Ÿæ€§çš„äººï¼Œé’±è™½ç„¶æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œä½†æ˜¯é’±ä¹ˆï¼Œæˆ‘è§‰å¾—å¤Ÿç”¨å°±å¥½ã€‚è¿‡ä¸Šèˆ’èˆ’æœæœçš„å°æ—¥å­ã€‚ä½†æ˜¯åœ¨æ­¤ä¹‹å‰å°±å¿…é¡»è¦å¥½å¥½åŠªåŠ›æ‰å¯ä»¥</li><li>åœ¨æŠ€æœ¯ä¸Šæœ‰æ‰€çªç ´ï¼Œä¸ºåæ¥äººç•™ä¸‹ä¸€äº›çœŸæ­£æœ‰ç”¨çš„ä¸œè¥¿ï¼Œå†è€…æ˜¯æé«˜ä¸€äº›çŸ¥ååº¦ã€‚2018ï¼Œä¸€ä¸ªæœˆè‡³å°‘ä¸€ç¯‡ä»¥ä¸Šæœ‰å«é‡çš„æŠ€æœ¯åˆ†äº«ï¼Œä¸ºä¹‹åŠªåŠ›å§ï¼Œä¹Ÿåªèƒ½è¿™ä¹ˆè¯´ä¸€è¯´äº†ã€‚</li></ol></li><li>å»ä¸€æ¬¡æ—¥æœ¬<br>æ²¡å»ï¼Œå…¶ä»–åœ°æ–¹å€’æ˜¯å»äº†å¥½å‡ ä¸ªï¼Œå¯¹æˆ‘ä¸ªäººæ¥è¯´ä¹Ÿæ˜¯å¾ˆæ£’çš„ä½“éªŒã€‚</li><li>èƒ½å¤Ÿä»å®¹çš„åº”å¯¹å„ç§äº‹æƒ…<br>åœ¨è¿™ä¸ªæ–¹é¢ï¼Œæˆ‘è§‰å¾—ä¸ªäººåšçš„è¿˜å¯ä»¥ï¼Œç»ƒå°±äº†â€™Pocker Faceâ€™ï¼Œåªä¸è¿‡è¿˜æœ‰å¾…åŠ å¼ºå¿ƒç†æ‰¿å—èƒ½åŠ›å§ï¼Œä¸»è¦è¿˜æ˜¯é è¿™ä¸ªï¼Œå¿ƒç†æ‰¿å—èƒ½åŠ›å¥½äº†æ‰è¡Œã€‚ä¸ç„¶åº”å¯¹ä¸€äº›äº‹æƒ…çš„æ—¶å€™ï¼Œä¼šä¸çŸ¥æ‰€æªã€‚</li></ul><a id="more"></a><h2 id="æ— ç—•åŸ‹ç‚¹-amp-AOP"><a href="#æ— ç—•åŸ‹ç‚¹-amp-AOP" class="headerlink" title="æ— ç—•åŸ‹ç‚¹ &amp; AOP"></a>æ— ç—•åŸ‹ç‚¹ &amp; AOP</h2><p>åšå¥½äº†ï¼Œä½†æ˜¯äº§å“æ²¡æœ‰å¯ç”¨ï¼ˆæ€ªæˆ‘å’¯ï¼Ÿï¼‰ã€‚17å¹´å¹´åˆçš„æ—¶å€™ï¼Œä¸€ç›´éƒ½åœ¨åšè¿™æ–¹é¢çš„äº‹æƒ…ï¼Œç ”ç©¶å„ç§å¤§å…¬å¸çš„æ–¹æ¡ˆï¼Œç»ˆäºè€—æ—¶3ä¸ªæœˆçš„ä¿®ä¿®æ•´æ•´ï¼Œå‡ºäº†ä¸€ä¸ªå®Œæ•´çš„æ–¹æ¡ˆï¼Œä½†æ˜¯åŸ‹ç‚¹ç»„è¯´ç»´æŠ¤æˆæœ¬å¤ªå¤§äº†ï¼ˆé¡¹ç›®å¯åŠ¨æ—¶å€™ï¼Œå·²ç»æ˜ç¡®æå‡ºè¯´ç»´æŠ¤æˆæœ¬ä¼šå¾ˆå¤§ï¼Œå¤§è‡´åˆ†æ”¯æˆæœ¬å‡ºå¤„ï¼Œä¸æœ€åä¸€è‡´ã€‚ï¼‰ã€‚å“ï¼Œä¸è¯´è¿™äº›ä¼¤å¿ƒäº‹ï¼Œè™½ç„¶æ²¡æœ‰å¯ç”¨ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä¸ªäººè€Œè¨€è¿˜æ˜¯æœ‰å¾ˆå¤§çš„æ”¶è·çš„ï¼Œä¾‹å¦‚AOPç›¸å…³æŠŠAspectså®Œå…¨ç»™å¼„å®Œäº†ä¸€éï¼Œæ¢³ç†äº†è¡Œä¸šå†…çš„æ‰€æœ‰æ— ç—•åŸ‹ç‚¹çš„æ–¹æ¡ˆã€‚åŸºæœ¬æ¯ä¸ªæ–¹æ¡ˆéƒ½è¿›è¡Œäº†ä¸€ä¸ªå°è¯•ï¼Œç•™ä¸‹äº†å¾ˆå¤šäº§ç‰©ï¼Œå¯¹äºè‡ªå·±æœ‰äº†ä¸€ä¸ªå¾ˆå¤§çš„å¸®åŠ©ã€‚ä»ä¸­çš„Aspectsåº“åæ¥æ”¹äº†æ”¹ï¼Œä¹Ÿç”¨åˆ°äº†AOPåŸ‹ç‚¹ä¸Šï¼Œä¹Ÿç®—æ˜¯æœ‰æ‰€æ”¶è·å§ã€‚</p><h2 id="ç»„ä»¶åŒ–é™æ€åº“åˆ‡æ¢"><a href="#ç»„ä»¶åŒ–é™æ€åº“åˆ‡æ¢" class="headerlink" title="ç»„ä»¶åŒ–é™æ€åº“åˆ‡æ¢"></a>ç»„ä»¶åŒ–é™æ€åº“åˆ‡æ¢</h2><p>ç”±äºç»„å†…çš„è°ƒæ•´ï¼ŒåŸå…ˆçš„ç»„ä»¶åŒ–é™æ€åº“åˆ‡æ¢æ–¹æ¡ˆä¹Ÿé€æ¸å¼€å§‹æœ‰äº†ä¸€äº›å˜åŒ–ï¼Œä»åŸå…ˆçš„åˆ©ç”¨â€™s.prepare_commandâ€™å‘½ä»¤ï¼Œåˆ°ç°åœ¨çš„åˆ©ç”¨:http/:gitçš„åˆ‡æ¢ã€‚åˆ©ç”¨Cocoapodsçš„Configå•ä¾‹ä¹Ÿè¾¾åˆ°äº†æ¸…ç†ç¼“å­˜çš„åŠŸèƒ½ï¼Œè¾¾åˆ°ä¸šåŠ¡äººå‘˜æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹æ¸…ç†ç¼“å­˜ï¼Œä»è€Œè¿›è¡Œåˆ‡æ¢å·¥ä½œï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆå¯èƒ½ä¼šå±€é™äºtagçš„æƒ…å†µï¼Œåœ¨å…¶ä»–åˆ†æ”¯ä¸‹çš„æƒ…å†µå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚åº”è¯¥ä¼šéœ€è¦å¦å¤–çš„ä¸€äº›è°ƒæ•´ã€‚æ¯•ç«Ÿç°åœ¨åšçš„é™æ€åº“çš„SHAæ ¡éªŒä¹Ÿæ²¡æœ‰åšã€‚</p><p>ç›˜ç‚¹ä¸€ä¸‹å·²ç»åšå¥½çš„åŠŸèƒ½</p><ul><li>æºç å’Œé™æ€åº“å®Œå…¨ç‹¬ç«‹ç®¡ç†ï¼ˆåæœŸå¦‚æœæ²¡æœ‰æºç æƒé™çš„åŒå­¦è®¿é—®ï¼Œä¼šç›´æ¥æŒ‡å‘é™æ€åº“ï¼‰</li><li>podspecæ— éœ€é…ç½®ä»»ä½•ä¸œè¥¿ï¼Œä¸€åˆ‡éƒ½åœ¨ä¸Šä¼ tagç‰ˆæœ¬çš„æ—¶å€™è¿›è¡Œéœ€è¦ç»‘å®š</li><li>ä½¿ç”¨s.sourceæ›¿æ¢åŸå…ˆçš„s.prepare_commandçš„ä¸‹è½½æ–¹å¼ï¼Œè®©ä½¿ç”¨ä¸Šæ›´åŠ åŸç”ŸpodåŒ–</li><li>åšäº†ä¸€ä¸ªRuby Gemä¸“é—¨æ¥æ‰“åŒ…é™æ€åº“ï¼ˆåŸå…ˆçš„Shellè¢«åºŸå¼ƒæ‰äº†ï¼Œä¸å¥½ç»´æŠ¤ï¼‰</li><li>æ‰“åŒ…å¥½çš„é™æ€åº“æš´éœ²å‡ºç‰¹æ®Šæºæ–‡ä»¶ï¼ˆå“‡è¿™ä¸ªé‡åˆ°äº†å¥½å¤šå‘ï¼Œæ¯”å¦‚è¯´dummnyæ–‡ä»¶ï¼Œæ—¥ä¹è´­ï¼‰</li><li>å®Œæ•´çš„å­é¡¹ç›®æ‰“åŒ…é™æ€åº“åˆ†åŒ…</li><li>å¼‚æ­¥æ‰“åŒ…é™æ€åº“ï¼Œè¾¾åˆ°å•æœºå­å¤šä¸ªRunneråœ¨è·‘ä¹Ÿä¸ä¼šå‡ºé—®é¢˜ã€‚ï¼ˆç›®æ ‡æ˜¯å¤šæœºå­ï¼‰</li></ul><p>ç›˜ç‚¹ä¸€ä¸‹2018å¹´ç»„ä»¶åŒ–é™æ€åº“åˆ‡æ¢è¦åšçš„</p><ul><li>ZIPæ–‡ä»¶çš„SHAæ ¡éªŒï¼ˆè¿™ä¸ªä¼šå¯¹åˆ†æ”¯æ‰“åŒ…æœ‰å¸®åŠ©ï¼Œä½†æ˜¯è¿˜æ²¡å®Œå…¨ç ”ç©¶ï¼‰</li><li>æ‰“åŒ…ç³»ç»Ÿç›‘æ§ï¼ˆä¸»è¦å…¬å¸çš„gitlabä¸€ç›´ä¸å‡çº§ï¼Œæ‹–æ…¢äº†è¿™ä¸ªï¼‰</li><li>GEMæäº¤ä»£ç åï¼Œè‡ªåŠ¨åŒ–è¿›è¡Œæµ‹è¯•ã€‚ï¼ˆ17å¹´å†™è„šæœ¬çš„æ—¶å€™ï¼Œæœ€ç—›è‹¦çš„å°±æ˜¯æµ‹è¯•ï¼Œä¸€ä¸ªä¸ªæµ‹è¯•è¿‡å»ï¼Œæ‰‹åŠ¨çš„ã€‚ã€‚ã€‚ã€‚:-)ï¼‰</li><li>åˆ†æ”¯æ‰“åŒ…é™æ€åº“</li></ul><h2 id="æŠ•èµ„æ–¹é¢"><a href="#æŠ•èµ„æ–¹é¢" class="headerlink" title="æŠ•èµ„æ–¹é¢"></a>æŠ•èµ„æ–¹é¢</h2><p>emmmï¼Œè¯´å®Œäº†æŠ€æœ¯ç›¸å…³ï¼Œæ¥èŠä¸€èŠæŠ•èµ„ç›¸å…³å§ï¼Œ17å¹´å¯¹äºæŠ•èµ„ï¼Œæœ‰äºæœ‰èµšã€‚æœ€ä¸»è¦çš„åº”è¯¥è¿˜æ˜¯é€šè¿‡äºæŸå’Œç›ˆåˆ©è°ƒæ•´å¥½äº†å¿ƒæ€ã€‚<br>16å¹´çš„é’±éƒ½åœ¨å€ºåˆ¸åŸºé‡‘é‡Œé¢ï¼Œ17å¹´åŸºæœ¬éƒ½åœ¨51å§ï¼ˆä¿å®ˆå‹æŠ•èµ„å“ˆå“ˆï¼Œä¿æŒå¹´åŒ–8%å·¦å³å“ˆå“ˆã€‚ï¼‰ã€‚51å› ä¸ºæœ‰ä¸ªæœ‹å‹åœ¨ï¼Œè¿˜æ˜¯æŒºä¿¡ä»»è¿™å®¶ä¼ä¸šçš„ã€‚OKï¼Œè¿™äº›äº‹ç¨³å®šçš„æŠ•èµ„é¡¹ç›®ï¼ŒæœŸé—´æˆ‘ä¹Ÿç¨å¾®æ‹¿å‡ºå‡ ä¸‡åœ¨å…¶ä»–æ–¹é¢è¿›è¡Œäº†å°è¯•ï¼Œèµ·åˆå¤§éƒ¨åˆ†é’±åœ¨å€ºåˆ¸åŸºé‡‘çš„æ—¶å€™ï¼Œæœ‰ä¸€éƒ¨åˆ†çš„é’±æŠ•å…¥åˆ°äº†å…¶ä»–ç±»å‹åŸºé‡‘æ–¹å‘ã€‚å› ä¸ºä¸äº†è§£è¡Œæƒ…ï¼Œçæ¯”ä¹±æŠ•ï¼Œå¯¼è‡´åæ¥äºæŸç¨‹åº¦è¶…è¿‡20%ï¼Œè‚¡å¸‚åŸºé‡‘æ·±ä¸å¯æµ‹ï¼Œæˆ‘å†³å®šæš‚æ—¶è¿›è¡Œé€€å‡ºï¼Œå¤šäº†è§£äº†è§£è‚¡å¸‚åŸºé‡‘çš„è§„åˆ™ä¹‹åå†ç»§ç»­è¿›å…¥è¿™ä¸ªåœˆå­å†…ã€‚<br>17å¹´å¹´æœ«çš„æ—¶å€™ï¼Œå¼€å§‹è¿›å…¥å¸åœˆã€‚å½“æ—¶æ˜¯10ä¸‡å·¦å³è½¯å¦¹å¸çš„æ¯”ç‰¹å¸ã€‚åœ¨localé‚£è¾¹äº¤æ˜“åï¼Œ1.1ä¸‡æ‹¿åˆ°äº†å·®ä¸å¤š0.1ä¸ªå·¦å³çš„BTCï¼Œå¼€å§‹äº†æˆ‘çš„æŠ„å¸ä¹‹æ—…ã€‚åœ¨ç»å†å¤šæ¬¡ä¹°å–çš„äºæŸåï¼Œå¼€å§‹é€æ¸äº†è§£äº†å¸‚åœºè¡Œæƒ…ï¼Œä¸è´ªå°±èƒ½è·åˆ©ï¼Œå“ˆå“ˆã€‚é¡¶å³°çš„æ—¶å€™åº”è¯¥æ˜¯åˆ°äº†1.6WRMBå·¦å³äº†å§ã€‚ç„¶åæœ€è¿‘BTCå¼€å§‹ç–¯ç‹‚å¤§è·Œï¼Œè°ƒæ•´äº†ä¸‹å¿ƒæ€ã€‚æ²¡æœ‰å¤ªå¤šæ“ä½œï¼Œæ”¾ç€å°±æ”¾ç€å§ï¼Œæˆ‘è¿˜æ˜¯æŒºçœ‹å¥½è¿™ä¸€å—çš„ã€‚è™½ç„¶æŠ•çš„ä¹Ÿä¸å¤šã€‚</p><h2 id="æ—…æ¸¸"><a href="#æ—…æ¸¸" class="headerlink" title="æ—…æ¸¸"></a>æ—…æ¸¸</h2><p>å»äº†åƒå²›æ¹–ã€é»„å±±ã€å“ˆå°”å†°ï¼ˆ2018å¹´1æœˆä»½å»çš„ï¼Œå†™æ€»ç»“ä¹‹å‰å»äº†ï¼Œä¹Ÿç®—è¿›å»å§ï¼‰ï¼Œè™½ç„¶æ²¡æœ‰è¾¾åˆ°æœ€å¼€å§‹å»æ—¥æœ¬çš„ç›®æ ‡ï¼Œä½†æ˜¯è¿™å‡ æ¬¡è¡Œç¨‹å¯¹æˆ‘æ¥è¯´éƒ½ç‰¹åˆ«å°è±¡æ·±åˆ»ã€‚ç»„ç»‡èƒ½åŠ›çœŸçš„ç‰¹åˆ«é‡è¦ï¼Œè¿˜æœ‰é€‚å½“çš„æå‰å·¥ä½œè¦åšã€‚ä½ èƒ½æƒ³è±¡220å…¬é‡Œç«Ÿç„¶éœ€è¦å¼€7ä¸ªå°æ—¶å·¦å³å—ï¼Ÿä»–ä»¬é‚£è¾¹çš„è·¯ä¸æ˜¯æŒ‰ç…§100ç æ¥ç®—çš„ï¼Œæœ‰äº›åœ°æ–¹æ˜¯åªèƒ½å¼€åˆ°30ç ã€‚ç¬é—´å°±æƒŠå‘†äº†ã€‚ç”±äºå‡†å¤‡çš„ä¸å¤Ÿå……åˆ†ï¼Œäºšå¸ƒåŠ›æ»‘é›ªä¹Ÿæ²¡æœ‰å»ã€‚è¿™ä¸ªå€’æ˜¯éå¸¸çš„é—æ†¾å§ã€‚<br>ç²¾æ‰“ç»†ç®—ã€‚å»æ—…æ¸¸çœŸçš„è¦ç²¾æ‰“ç»†ç®—ï¼Œé²œæ˜çš„æ —å­ï¼Œæˆ‘å»å“ˆå°”å†°4å¤©èŠ±äº†3500ã€‚æˆ‘çš„ç¬¬ä¸€ä½æœ‹å‹ï¼Œå“ˆå°”æ»¨/åŒ—äº¬ã€‚7å¤©çš„ä¸ªäººæ¸¸ï¼ŒåªèŠ±äº†4300ã€‚ç¬¬äºŒä½æœ‹å‹å“ˆå°”æ»¨/æ¼ æ²³/åŒ—äº¬ï¼Œ11å¤©ï¼Œ5500ï¼Œå¥¹è·Ÿæˆ‘è¯´å¥¹è·Ÿä»–è€å…¬çš„æœºç¥¨éƒ½æ˜¯150å—é’±çš„ï¼Œæˆ‘ç¬é—´æƒŠå‘†äº†ã€‚</p><h3 id="å¯¹äº2018å¹´çš„å±•æœ›"><a href="#å¯¹äº2018å¹´çš„å±•æœ›" class="headerlink" title="å¯¹äº2018å¹´çš„å±•æœ›"></a>å¯¹äº2018å¹´çš„å±•æœ›</h3><p>2018ï¼Œå°‘ç«‹ç‚¹FLAGå§ï¼Œè´µåœ¨åšæŒã€‚</p><ul><li>åšæŒçœ‹ä¹¦ï¼Œçœ‹å®Œ12æœ¬ä¹¦å§ï¼Œä¸€ä¸ªæœˆä¸€æœ¬ã€‚</li><li>æå‡ä¸‹è‹±è¯­æ°´å¹³ã€‚</li></ul><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>NO PAINS, NO GAINS.  Hello 2018.</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;OK~å·¥ä½œä¸€å¹´äº†å“ˆï¼Œåšå®¢ä¸€ç›´æ²¡æœ‰ç®¡ï¼Œç»„å†…äº‹æƒ…å¤ªå¤šï¼ˆå€Ÿå£ï¼Œå¤ªæ‡’ï¼‰ï¼Œè™½ç„¶å†™äº†ä¸€å †çš„æ–‡ç« ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨ç»„å†…å‘å¸ƒäº†ã€‚å¯¹å¤–ä¹ˆï¼Œéƒ¨åˆ†å—é™äºå…¬å¸åè®®ä¹‹ç±»çš„ï¼Œéƒ¨åˆ†æ˜¯æš‚æ—¶è§‰å¾—æ°´å¹³æœ‰é™ï¼ˆåæ­£ä¹Ÿæ²¡ä»€ä¹ˆäººçœ‹ä¹ˆï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å›é¡¾2016å¹´ç«‹çš„Flag-amp-Bad&quot;&gt;&lt;a href=&quot;#å›é¡¾2016å¹´ç«‹çš„Flag-amp-Bad&quot; class=&quot;headerlink&quot; title=&quot;å›é¡¾2016å¹´ç«‹çš„Flag &amp;amp; Bad&quot;&gt;&lt;/a&gt;å›é¡¾2016å¹´ç«‹çš„Flag &amp;amp; Bad&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ˜ç¡®è‡ªå·±çš„äººç”Ÿç›®æ ‡&lt;br&gt;åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œåº”è¯¥è€ƒè™‘äº†å¾ˆä¹…æ‰å¯¹ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰ç»™è‡ªå·±ä¸€ä¸ªæ˜ç¡®çš„ç­”æ¡ˆã€‚&lt;br&gt;ä½†æ˜¯åº”è¯¥æœ‰äº†ä¸€ç³»åˆ—çš„ç›®æ ‡ã€‚&lt;ol&gt;
&lt;li&gt;è´¢åŠ¡è‡ªç”±ï¼Ÿä¸ä¸ä¸ï¼Œç²¾ç¥è‡ªç”±ã€‚åœ¨40å²ä»¥åèƒ½å¤Ÿè¾¾åˆ°ç²¾ç¥è‡ªç”±ï¼Œä¸å†å—é™äºç”Ÿæ´»ä¸­çš„ç§ç§å› ç´ çš„å¹²æ‰°ã€‚æ¯•ç«Ÿç²¾ç¥è‡ªç”±å–å†³äºä¸ªäººï¼Œæˆ‘è§‰å¾—æˆ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ„Ÿæ€§çš„äººï¼Œé’±è™½ç„¶æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œä½†æ˜¯é’±ä¹ˆï¼Œæˆ‘è§‰å¾—å¤Ÿç”¨å°±å¥½ã€‚è¿‡ä¸Šèˆ’èˆ’æœæœçš„å°æ—¥å­ã€‚ä½†æ˜¯åœ¨æ­¤ä¹‹å‰å°±å¿…é¡»è¦å¥½å¥½åŠªåŠ›æ‰å¯ä»¥&lt;/li&gt;
&lt;li&gt;åœ¨æŠ€æœ¯ä¸Šæœ‰æ‰€çªç ´ï¼Œä¸ºåæ¥äººç•™ä¸‹ä¸€äº›çœŸæ­£æœ‰ç”¨çš„ä¸œè¥¿ï¼Œå†è€…æ˜¯æé«˜ä¸€äº›çŸ¥ååº¦ã€‚2018ï¼Œä¸€ä¸ªæœˆè‡³å°‘ä¸€ç¯‡ä»¥ä¸Šæœ‰å«é‡çš„æŠ€æœ¯åˆ†äº«ï¼Œä¸ºä¹‹åŠªåŠ›å§ï¼Œä¹Ÿåªèƒ½è¿™ä¹ˆè¯´ä¸€è¯´äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;å»ä¸€æ¬¡æ—¥æœ¬&lt;br&gt;æ²¡å»ï¼Œå…¶ä»–åœ°æ–¹å€’æ˜¯å»äº†å¥½å‡ ä¸ªï¼Œå¯¹æˆ‘ä¸ªäººæ¥è¯´ä¹Ÿæ˜¯å¾ˆæ£’çš„ä½“éªŒã€‚&lt;/li&gt;
&lt;li&gt;èƒ½å¤Ÿä»å®¹çš„åº”å¯¹å„ç§äº‹æƒ…&lt;br&gt;åœ¨è¿™ä¸ªæ–¹é¢ï¼Œæˆ‘è§‰å¾—ä¸ªäººåšçš„è¿˜å¯ä»¥ï¼Œç»ƒå°±äº†â€™Pocker Faceâ€™ï¼Œåªä¸è¿‡è¿˜æœ‰å¾…åŠ å¼ºå¿ƒç†æ‰¿å—èƒ½åŠ›å§ï¼Œä¸»è¦è¿˜æ˜¯é è¿™ä¸ªï¼Œå¿ƒç†æ‰¿å—èƒ½åŠ›å¥½äº†æ‰è¡Œã€‚ä¸ç„¶åº”å¯¹ä¸€äº›äº‹æƒ…çš„æ—¶å€™ï¼Œä¼šä¸çŸ¥æ‰€æªã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="æ€»ç»“" scheme="http://www.zhz.io/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>RNæ™´æ˜è§†é¢‘å­¦ä¹ ç¬”è®° - ç¬¬å››ç« </title>
    <link href="http://www.zhz.io/2017/10/11/%E6%99%B4%E6%98%8E%E8%A7%86%E9%A2%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E5%9B%9B%E7%AB%A0/"/>
    <id>http://www.zhz.io/2017/10/11/æ™´æ˜è§†é¢‘å­¦ä¹ ç¬”è®°-ç¬¬å››ç« /</id>
    <published>2017-10-11T02:29:14.000Z</published>
    <updated>2018-02-12T02:30:14.005Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸæ–‡æ¡£"><a href="#è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸæ–‡æ¡£" class="headerlink" title="è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸæ–‡æ¡£"></a>è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸæ–‡æ¡£</h3><p><a href="https://www.race604.com/react-native-component-lifecycle/" target="_blank" rel="noopener">åšå®¢</a></p><h3 id="å…¶ä»–Tips"><a href="#å…¶ä»–Tips" class="headerlink" title="å…¶ä»–Tips"></a>å…¶ä»–Tips</h3><ul><li>renderä¸­åªåšä¸æ¸²æŸ“æœ‰å…³çš„æ“ä½œï¼Œåªè¯»å–ã€ä¸ä¿®æ”¹ä»»ä½•æ•°æ®ï¼ˆä¸´æ—¶å˜é‡é™¤å¤–ï¼‰<ul><li>å› ä¸ºç•Œé¢çš„æ›´æ”¹æ˜¯ç»å¸¸çš„ï¼Œæ‰€ä»¥renderæ˜¯ç»å¸¸è§¦å‘çš„</li><li>æ‰€ä»¥å¦‚æœä½ æœ‰ä¿®æ”¹æ•°æ®ç­‰æ“ä½œï¼Œå°±ä¼šå¤šæ¬¡è§¦å‘ï¼Œä½¿ç»“æœéš¾ä»¥é¢„æ–™</li><li>æ¯”å¦‚ä½ æ‰§è¡ŒsetStateï¼Œé‚£ä¹ˆsetStateåˆè§¦å‘renderï¼Œå°±ä¼šå¯¼è‡´æ­»å¾ªç¯</li></ul></li><li>éšç»„ä»¶åŠ è½½åªæ‰§è¡Œä¸€æ¬¡çš„æ“ä½œï¼Œæ”¾åœ¨WillMountæˆ–è€…DidMountä¸­<ul><li>æ¯”å¦‚è¿œç¨‹å–é¦–é¡µæ•°æ®ï¼ˆfetchï¼‰ï¼Œæ¯”å¦‚å¼¹å‡ºæç¤ºæ¡†</li></ul></li><li>è®°å¾—åœ¨WillUnmountä¸­é”€æ¯å®šæ—¶å™¨å’Œä¸€äº›è®¢é˜…äº‹ä»¶</li><li>propså‘ç”Ÿå˜åŒ–ï¼Œä½¿ç”¨WillReceivePropsæ¥å¤„ç†ï¼ˆæ¯”å¦‚å°†å˜åŠ¨åŒæ­¥ç»™stateï¼‰</li></ul><a id="more"></a><h2 id="ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡"><a href="#ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡" class="headerlink" title="ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡"></a>ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡</h2><h3 id="å­˜åœ¨çš„æƒ…å†µ"><a href="#å­˜åœ¨çš„æƒ…å†µ" class="headerlink" title="å­˜åœ¨çš„æƒ…å†µ"></a>å­˜åœ¨çš„æƒ…å†µ</h3><ol><li>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶è¿›è¡Œè°ƒç”¨ï¼Œä¼ é€’</li><li>å­ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡</li><li>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶è¿›è¡Œé€šä¿¡</li><li>å…¨å±€è·¨ä»»æ„ç»„ä»¶é—´é€šä¿¡</li></ol><h3 id="çˆ¶ç»„ä»¶å‘å­ç»„ä»¶è¿›è¡Œè°ƒç”¨ï¼Œä¼ é€’-å­ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡"><a href="#çˆ¶ç»„ä»¶å‘å­ç»„ä»¶è¿›è¡Œè°ƒç”¨ï¼Œä¼ é€’-å­ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡" class="headerlink" title="çˆ¶ç»„ä»¶å‘å­ç»„ä»¶è¿›è¡Œè°ƒç”¨ï¼Œä¼ é€’/å­ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡"></a>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶è¿›è¡Œè°ƒç”¨ï¼Œä¼ é€’/å­ç»„ä»¶ä¹‹é—´çš„ç›¸äº’é€šä¿¡</h3><ol><li>çˆ¶ç»„ä»¶å°†è‡ªèº«çš„stateä½œä¸ºå­ç»„ä»¶çš„å±æ€§propsè¿›è¡Œä¼ é€’ï¼Œçˆ¶ç»„ä»¶è°ƒç”¨setState,äºæ˜¯å­ç»„ä»¶çš„propsç›¸åº”å˜åŒ–</li><li>é€šè¿‡ä½¿ç”¨è¿›è¡Œè°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨èå†™æ³•</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;CountDown ref=&#123;</div><div class="line">        instance =&gt; this.countDown = instance</div><div class="line">    &#125; /&gt;</div><div class="line">    )  </div><div class="line">  &#125;</div><div class="line">  componentDidMount() &#123;</div><div class="line">    this.countDown.add(10086);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">// ä¸æ¨èå†™æ³•</div><div class="line">class App extends Component &#123;</div><div class="line">  render() &#123;</div><div class="line">    return (</div><div class="line">      &lt;CountDown ref=&#123;</div><div class="line">        instance =&gt; this.countDown = instance</div><div class="line">    &#125; /&gt;</div><div class="line">    )  </div><div class="line">  &#125;</div><div class="line">  componentDidMount() &#123;</div><div class="line">    this.countDown.add(10086);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ol><h3 id="å­ç»„ä»¶å‘çˆ¶ç»„ä»¶è¿›è¡Œé€šä¿¡"><a href="#å­ç»„ä»¶å‘çˆ¶ç»„ä»¶è¿›è¡Œé€šä¿¡" class="headerlink" title="å­ç»„ä»¶å‘çˆ¶ç»„ä»¶è¿›è¡Œé€šä¿¡"></a>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶è¿›è¡Œé€šä¿¡</h3><ol><li>çˆ¶ç»„ä»¶å°†å‡½æ•°ä½œä¸ºpropsä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶åœ¨éœ€è¦çš„æ—¶å€™è¿›è¡Œè°ƒç”¨ï¼Œå¯ä»¥å°†æ•°æ®ä½œä¸ºå‡½æ•°å‚æ•°è¿›è¡Œå›ä¼ <ul><li>ç±»ä¼¼äºiOSä¸­çš„block<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountDown</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  state = &#123;</div><div class="line">    <span class="attr">count</span>: <span class="keyword">this</span>.props.time,</div><div class="line">  &#125;;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">const</span> &#123; count &#125; = <span class="keyword">this</span>.state;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">        &lt;Text&gt;&#123;count&#125;&lt;/Text&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">  add = <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;</div><div class="line">      <span class="attr">count</span>: <span class="keyword">this</span>.state.count + time</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">  componentDidMount() &#123;</div><div class="line">    <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">const</span> &#123; count &#125; = <span class="keyword">this</span>.state;</div><div class="line">      <span class="keyword">if</span> (count === <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">this</span>.props.timeout &amp;&amp; <span class="keyword">this</span>.props.timeout( <span class="number">1</span> );</div><div class="line">        <span class="keyword">return</span> clearInterval(<span class="keyword">this</span>.timer);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">this</span>.setState(&#123;</div><div class="line">        <span class="attr">count</span>: count - <span class="number">1</span>,</div><div class="line">      &#125;);</div><div class="line">    &#125;, <span class="number">1000</span>);</div><div class="line">  &#125;</div><div class="line">  componentWillUnmount() &#123;</div><div class="line">    clearInterval(<span class="keyword">this</span>.timer);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  addTime = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">this</span>.countDown.add(<span class="number">5</span>)</div><div class="line">  &#125;</div><div class="line">  timeOut = <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</div><div class="line">    alert(<span class="string">'çˆ¸çˆ¸çŸ¥é“äº†'</span> + params)</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;View&gt;</div><div class="line">        &lt;TouchableOpacity onPress=&#123;this.addTime&#125;&gt;</div><div class="line">          å»¶é•¿åç§’</div><div class="line">        &lt;/TouchableOpacity&gt;</div><div class="line">        &lt;CountDown ref=&#123; countdown =&gt; this.countDown = countdown&#125; time = '3' timeout=&#123;this.timeOut&#125; /&gt;</div><div class="line">      &lt;/View&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">AppRegistry.registerComponent('App', () =&gt; App)</div></pre></td></tr></table></figure></li></ul></li></ol><blockquote><p>Note</p><ol><li>è·ŸiOSä¸€æ ·å¦‚æœä¸€ä¸ªä¼ å…¥çš„å‡½æ•°ï¼ˆiOSä¸ºBlockï¼‰ï¼ŒåŠ ä¸Šäº†æ‹¬å·ï¼Œé‚£ä¹ˆå³ä¼šå˜æˆå‡½æ•°è°ƒç”¨</li><li>æ ¹æ®1ï¼Œåœ¨åŠ¨æ€åˆ—è¡¨ä¸­ï¼Œæƒ³ä¼ å…¥å¯¹åº”å‚æ•°å°±æ¯”è¾ƒå›°éš¾ï¼Œæ‰€ä»¥æœ‰ä»¥ä¸‹æ–¹æ³•</li></ol></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// å¦‚ä½•ä¼ å…¥å‚æ•°ä»¥åŒºåˆ†ä¸åŒçš„ç‚¹å‡»å‘¢ï¼Ÿ</div><div class="line">arr.map(d =&gt; &lt;Text key=&#123;d.id&#125; onPress=&#123;this.handlePress&#125;&gt;&#123;d.text&#125;&lt;/Text&gt;)</div><div class="line">// é”™è¯¯ä½¿ç”¨ï¼Œè¿™ä¹ˆåšä¼šç›´æ¥æ‰§è¡Œ</div><div class="line">arr.map(d =&gt; &lt;Text key=&#123;d.id&#125; onPress=&#123;this.handlePress(d.id)&#125;&gt;&#123;d.text&#125;&lt;/Text&gt;)</div><div class="line"></div><div class="line">// æ­£ç¡®ä½¿ç”¨</div><div class="line">arr.map(d =&gt; &lt;Text key=&#123;d.id&#125; onPress=&#123;() =&gt; this.handlePress(d.id)&#125;&gt;&#123;d.text&#125;&lt;/Text&gt;)</div><div class="line">arr.map(d =&gt; &lt;Text key=&#123;d.id&#125; onPress=&#123;this.handlePress.bind(this, d.id)&#125;&gt;&#123;d.text&#125;&lt;/Text&gt;)</div><div class="line">æ­£ç¡®ï¼ç®­å¤´å‡½æ•°æˆ–bindéƒ½ä¼šç”Ÿæˆæ–°å‡½æ•°ã€‚ä¼ å…¥å‚æ•°ä»¥é—­åŒ…çš„å½¢å¼â€œå°å­˜â€ï¼Œç•™å¾…è°ƒç”¨ã€‚</div></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæœ‰ä¸ªå‘ï¼Œçˆ¶ç±»ä¼ åˆ°å­ç±»ï¼Œå› ä¸ºå‡½æ•°è¢«bindæˆ–è€…ç®­å¤´å‡½æ•°é‡æ–°è¿›è¡Œäº†åŒ…è£…ï¼Œæ‰€ä»¥åœ¨ä¼ å‚çš„æ—¶å€™ï¼Œç”¨åœ¨æ–°çš„å‚æ•°é‡Œé¢é‡æ–°æ·»åŠ å‚æ•°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å®ä¾‹ä»£ç </span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountDown</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  state = &#123;</div><div class="line">    <span class="attr">count</span>: <span class="keyword">this</span>.props.time,</div><div class="line">  &#125;;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">const</span> &#123; count &#125; = <span class="keyword">this</span>.state;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">        &lt;Text&gt;&#123;count&#125;&lt;/Text&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">  add = <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;</div><div class="line">      <span class="attr">count</span>: <span class="keyword">this</span>.state.count + time</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">  componentDidMount() &#123;</div><div class="line">    <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">const</span> &#123; count &#125; = <span class="keyword">this</span>.state;</div><div class="line">      <span class="keyword">if</span> (count === <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">this</span>.props.timeout &amp;&amp; <span class="keyword">this</span>.props.timeout(<span class="string">"123"</span>);</div><div class="line">        <span class="keyword">return</span> clearInterval(<span class="keyword">this</span>.timer);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">this</span>.setState(&#123;</div><div class="line">        <span class="attr">count</span>: count - <span class="number">1</span>,</div><div class="line">      &#125;);</div><div class="line">    &#125;, <span class="number">1000</span>);</div><div class="line">  &#125;</div><div class="line">  componentWillUnmount() &#123;</div><div class="line">    clearInterval(<span class="keyword">this</span>.timer);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  addTime = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">this</span>.countDown.add(<span class="number">5</span>)</div><div class="line">  &#125;</div><div class="line">  timeOut = <span class="function">(<span class="params">params1,params2</span>) =&gt;</span> &#123;</div><div class="line">    alert(<span class="string">'çˆ¸çˆ¸çŸ¥é“äº†'</span> + params1 + params2)</div><div class="line">  &#125;</div><div class="line">  state = &#123;</div><div class="line">    <span class="attr">arr</span>: [<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>]</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;View&gt;</div><div class="line">        &#123;</div><div class="line">          this.state.arr.map (i =&gt; &#123;</div><div class="line">            return &lt;CountDown key=&#123;i&#125; time=&#123;i&#125; timeout=&#123;(child) =&gt; this.timeOut(i,child)&#125;/&gt;</div><div class="line">          &#125;)</div><div class="line">        &#125;</div><div class="line">      &lt;/View&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">AppRegistry.registerComponent('App', () =&gt; App)</div></pre></td></tr></table></figure></p></blockquote><h3 id="åŒå‘é€šä¿¡"><a href="#åŒå‘é€šä¿¡" class="headerlink" title="åŒå‘é€šä¿¡"></a>åŒå‘é€šä¿¡</h3><ol><li>å…¨å±€æ—¶é—´è®¢é˜…ç³»ç»Ÿï¼ˆEventEmitterï¼‰</li><li>ï¼ˆFluxç³»ï¼‰å•å‘æ•°æ®æµæ¡†æ¶<ul><li>flux</li><li>reflux</li><li>alt</li><li>redux</li></ul></li><li>åŒå‘æ•°æ®æµç‹‚é˜¶<ul><li>mobx</li></ul></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;a href=&quot;#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ&quot; class=&quot;headerlink&quot; title=&quot;ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;/a&gt;ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ&lt;/h2&gt;&lt;h3 id=&quot;è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸæ–‡æ¡£&quot;&gt;&lt;a href=&quot;#è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸæ–‡æ¡£&quot; class=&quot;headerlink&quot; title=&quot;è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸæ–‡æ¡£&quot;&gt;&lt;/a&gt;è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸæ–‡æ¡£&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://www.race604.com/react-native-component-lifecycle/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;åšå®¢&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;å…¶ä»–Tips&quot;&gt;&lt;a href=&quot;#å…¶ä»–Tips&quot; class=&quot;headerlink&quot; title=&quot;å…¶ä»–Tips&quot;&gt;&lt;/a&gt;å…¶ä»–Tips&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;renderä¸­åªåšä¸æ¸²æŸ“æœ‰å…³çš„æ“ä½œï¼Œåªè¯»å–ã€ä¸ä¿®æ”¹ä»»ä½•æ•°æ®ï¼ˆä¸´æ—¶å˜é‡é™¤å¤–ï¼‰&lt;ul&gt;
&lt;li&gt;å› ä¸ºç•Œé¢çš„æ›´æ”¹æ˜¯ç»å¸¸çš„ï¼Œæ‰€ä»¥renderæ˜¯ç»å¸¸è§¦å‘çš„&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥å¦‚æœä½ æœ‰ä¿®æ”¹æ•°æ®ç­‰æ“ä½œï¼Œå°±ä¼šå¤šæ¬¡è§¦å‘ï¼Œä½¿ç»“æœéš¾ä»¥é¢„æ–™&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚ä½ æ‰§è¡ŒsetStateï¼Œé‚£ä¹ˆsetStateåˆè§¦å‘renderï¼Œå°±ä¼šå¯¼è‡´æ­»å¾ªç¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;éšç»„ä»¶åŠ è½½åªæ‰§è¡Œä¸€æ¬¡çš„æ“ä½œï¼Œæ”¾åœ¨WillMountæˆ–è€…DidMountä¸­&lt;ul&gt;
&lt;li&gt;æ¯”å¦‚è¿œç¨‹å–é¦–é¡µæ•°æ®ï¼ˆfetchï¼‰ï¼Œæ¯”å¦‚å¼¹å‡ºæç¤ºæ¡†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®°å¾—åœ¨WillUnmountä¸­é”€æ¯å®šæ—¶å™¨å’Œä¸€äº›è®¢é˜…äº‹ä»¶&lt;/li&gt;
&lt;li&gt;propså‘ç”Ÿå˜åŒ–ï¼Œä½¿ç”¨WillReceivePropsæ¥å¤„ç†ï¼ˆæ¯”å¦‚å°†å˜åŠ¨åŒæ­¥ç»™stateï¼‰&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="RN" scheme="http://www.zhz.io/tags/RN/"/>
    
  </entry>
  
  <entry>
    <title>RNæ™´æ˜è§†é¢‘å­¦ä¹ ç¬”è®° - ç¬¬ä¸‰ç« </title>
    <link href="http://www.zhz.io/2017/09/12/RN%E6%99%B4%E6%98%8E%E8%A7%86%E9%A2%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%89%E7%AB%A0/"/>
    <id>http://www.zhz.io/2017/09/12/RNæ™´æ˜è§†é¢‘å­¦ä¹ ç¬”è®°-ç¬¬ä¸‰ç« /</id>
    <published>2017-09-12T02:24:25.000Z</published>
    <updated>2018-02-12T02:27:45.983Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ReactJSå’ŒReactNative"><a href="#ReactJSå’ŒReactNative" class="headerlink" title="ReactJSå’ŒReactNative"></a>ReactJSå’ŒReactNative</h2><h3 id="ä¸¤è€…åŒºåˆ«æ¯”è¾ƒ"><a href="#ä¸¤è€…åŒºåˆ«æ¯”è¾ƒ" class="headerlink" title="ä¸¤è€…åŒºåˆ«æ¯”è¾ƒ"></a>ä¸¤è€…åŒºåˆ«æ¯”è¾ƒ</h3><p><img src="/resources/44D051F354FFBF35A300E1F8C731FD9B.jpg" alt="IMAGE"></p><ul><li>æœ€é‡è¦çš„åŒºåˆ«è«è¿‡äºæ˜¯æ§ä»¶æ–¹é¢çš„åŒºåˆ«ï¼Œå¯¹åº”çš„åˆ†åˆ«æ˜¯å¯¹åº”å¹³å°çš„ç»„ä»¶<a id="more"></a></li></ul><p><img src="/resources/DDDD7F748054B8B26D999CBAED87BAC7.jpg" alt="IMAGE"></p><ul><li>ReactNativeæä¾›è½¬åŒ–çš„æ¡¥æ¢</li></ul><h3 id="è§„èŒƒ-è§„åˆ™"><a href="#è§„èŒƒ-è§„åˆ™" class="headerlink" title="è§„èŒƒ/è§„åˆ™"></a>è§„èŒƒ/è§„åˆ™</h3><p>å€Ÿé‰´ä¸XHTML</p><ol><li>å¼€å§‹å’Œç»“æŸæ ‡ç­¾é…å¯¹<br>&lt;ç»„ä»¶&gt;ooxx&lt;/ç»„ä»¶&gt;</li><li>æ— å†…å®¹çš„ç»„ä»¶æ ‡ç­¾åº”å†™ä¸ºè‡ªå°é—­å½¢å¼<br>&lt;ç»„ä»¶&gt;&lt;/ç»„ä»¶&gt; åº”å†™ä¸º &lt;ç»„ä»¶ /&gt;</li><li><p>å¯è‡ªå®šä¹‰å±æ€§ï¼Œå­—ç¬¦ä¸²å€¼åº”ä½¿ç”¨åŒå¼•å·ï¼Œå…¶ä»–å€¼ç”¨{}æ‹¬èµ·æ¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Person age=&#123;<span class="number">30</span>&#125; sex=â€œmaleâ€ married=&#123;<span class="literal">true</span>&#125; /&gt;</div></pre></td></tr></table></figure></li><li><p>å¸ƒå°”å±æ€§å¯çœç•¥å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Person married /&gt; ç­‰ä»·äº &lt;Person married=&#123;<span class="literal">true</span>&#125; /&gt;</div></pre></td></tr></table></figure></li><li><p>Render(æ¸²æŸ“)å¿…é¡»æ˜¯å•ä¸€èŠ‚ç‚¹<br><img src="/resources/EF0E754011E0D0BED63225A48E19617B.jpg" alt="IMAGE"></p></li><li><p>ç©ºå€¼ä¼šè¢«è‡ªåŠ¨å¿½ç•¥æ‰</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;div /&gt; </div><div class="line">&lt;div&gt;&lt;/div&gt; </div><div class="line">&lt;div&gt;&#123;false&#125;&lt;/div&gt; </div><div class="line">&lt;div&gt;&#123;null&#125;&lt;/div&gt; </div><div class="line">&lt;div&gt;&#123;undefined&#125;&lt;/div&gt; </div><div class="line">&lt;div&gt;&#123;true&#125;&lt;/div&gt;</div><div class="line"></div><div class="line">// æŠ€å·§ æ˜¾ç¤ºå’Œéšè—ç»„ä»¶</div><div class="line">&lt;View&gt;</div><div class="line">&#123; showWarning &amp;&amp; &lt;Text&gt;FBI warning&lt;/Text&gt; &#125;</div><div class="line">&lt;/View&gt;</div></pre></td></tr></table></figure></li><li><p>ç»„ä»¶å¿…é¡»å·²å¤§å†™å¼€å¤´<br><img src="/resources/A7778B71E3034ACDAB3F3FD994D0BE2A.jpg" alt="IMAGE"></p></li><li>æ–‡æœ¬å¿…é¡»å†™åœ¨Textçš„ç»„ä»¶å†…<br><img src="/resources/B526EFC8D8E70CE825608A0B338F7B4C.jpg" alt="IMAGE"></li><li>æ³¨é‡Šçš„å†™æ³•<br><img src="/resources/AC476BD3FECD7F5E58F30C30C56577CF.jpg" alt="IMAGE"></li><li>åªèƒ½åµŒå…¥è¡¨è¾¾å¼<br><img src="/resources/EDB686DFCD64EBEB3E6378E6931F1049.jpg" alt="IMAGE"></li></ol><h2 id="åˆè¯†Reactç»„ä»¶åŒ–å¼€å‘"><a href="#åˆè¯†Reactç»„ä»¶åŒ–å¼€å‘" class="headerlink" title="åˆè¯†Reactç»„ä»¶åŒ–å¼€å‘"></a>åˆè¯†Reactç»„ä»¶åŒ–å¼€å‘</h2><h3 id="åœ¨çº¿æ¨¡æ‹Ÿå™¨"><a href="#åœ¨çº¿æ¨¡æ‹Ÿå™¨" class="headerlink" title="åœ¨çº¿æ¨¡æ‹Ÿå™¨"></a>åœ¨çº¿æ¨¡æ‹Ÿå™¨</h3><p><a href="http://dabbott.github.io/react-native-web-player/" target="_blank" rel="noopener">ç»ƒä¹ åŸºç¡€çš„æ¨¡æ‹Ÿå™¨</a></p><h3 id="ç¤ºä¾‹ä¸€"><a href="#ç¤ºä¾‹ä¸€" class="headerlink" title="ç¤ºä¾‹ä¸€"></a>ç¤ºä¾‹ä¸€</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å¯¼å…¥å¼€å‘æ‰€éœ€è¦çš„åº“</span></div><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  AppRegistry,</div><div class="line">  StyleSheet,</div><div class="line">  Text,</div><div class="line">  View,</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></div><div class="line"></div><div class="line"><span class="comment">// Classç±»ä¸­ä¼šé»˜è®¤å¸¦æœ‰propsï¼Œå¯ä»¥è¿›è¡Œè°ƒç”¨è·å–</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodMorning</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> defaultProps = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'somebody'</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">static</span> propTypes = &#123;</div><div class="line"><span class="attr">name</span>:  React.propTypes.string,   <span class="comment">// çº¦å®šéœ€è¦çš„ç±»å‹ï¼ˆä¸ºå­—ç¬¦ä¸²ï¼‰</span></div><div class="line">&#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="comment">// ç»“æ„å¼è¯­æ³•</span></div><div class="line">      &lt;Text&gt;Good morning, &#123;<span class="keyword">this</span>.props.name&#125;!&lt;/Text&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Methodä¸­å¿…é¡»è¦æ‰‹åŠ¨å»æŒ‡å®šä¸€ä¸‹</span></div><div class="line"><span class="comment">// å¦‚æœçš„è¿™é‡Œå†™äº†asdé‚£ä¹ˆä¸‹é¢ä¹Ÿè¦æ”¹æˆasd</span></div><div class="line"><span class="comment">// å¦‚æœè¿™è¾¹æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œé»˜è®¤æ˜¯å–ç¬¬ä¸€ä¸ªå‚æ•°å»å–å€¼</span></div><div class="line"><span class="keyword">const</span> GoodEvening = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;Text&gt;Good evening, &#123;props.name&#125;&lt;/Text&gt;</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ç”Ÿå‘½ä¸€ä¸ªç»„ä»¶ Appæ˜¯åå­—</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;View&gt;</div><div class="line">        &lt;GoodMorning name="Sir" /&gt;</div><div class="line">        &lt;GoodEvening name="Madam" /&gt;</div><div class="line">      &lt;/View &gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">AppRegistry.registerComponent('App', () =&gt; App)</div></pre></td></tr></table></figure><ul><li>å±æ€§ä½¿ç”¨å°ç»“<ul><li>åœ¨ç±»ä¸­ï¼Œå±æ€§ä¸ºé»˜è®¤é…ç½®ï¼Œä¸éœ€è¦å»å†™ï¼Œ</li><li>åœ¨æ–¹æ³•ä¸­ï¼Œå±æ€§è¦è‡ªå·±å»å£°æ˜,é»˜è®¤å–ç¬¬ä¸€ä¸ªå‚æ•°å½“åšæ˜¯å±æ€§çš„è°ƒç”¨ç±»</li><li>åœ¨ä½¿ç”¨å±æ€§çš„æ—¶å€™ï¼Œå¿…é¡»åŠ å…¥å¤§æ‹¬å·ï¼Œæ‰å¯ä»¥è¿›è¡Œè°ƒç”¨</li></ul></li><li>defaultProps æ˜¯ç”¨æ¥è®¾ç½®å±æ€§çš„é»˜è®¤å€¼çš„ã€‚</li><li>propTypes æ˜¯ç”¨æ¥çº¦æŸè®¾ç½®çš„å±æ€§çš„ç±»å‹çš„ï¼Œè¿™ä¸ªåªåœ¨å¼€å‘é˜¶æ®µæœ‰æ•ˆï¼Œå‘å¸ƒé˜¶æ®µä¼šè¢«è‡ªåŠ¨ç§»é™¤</li></ul><h3 id="å˜é‡ä½œç”¨äº"><a href="#å˜é‡ä½œç”¨äº" class="headerlink" title="å˜é‡ä½œç”¨äº"></a>å˜é‡ä½œç”¨äº</h3><ul><li>å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼Œåªèƒ½å‡½æ•°å†…è¯»å†™ï¼Œå‡½æ•°è¿è¡Œå®Œåé”€æ¯ï¼ˆé—­åŒ…é™¤å¤–ï¼‰</li><li>classå†…çš„æˆå‘˜å˜é‡ï¼Œåœ¨å•ä¸ªclassçš„å®ä¾‹å†…è¯»å†™ï¼Œå®ä¾‹é”€æ¯æ—¶ä¸€å¹¶é”€æ¯<ul><li>ä½¿ç”¨æ—¶ä¸è¦å¿˜è®°this.</li></ul></li><li>classå†…çš„é™æ€æˆå‘˜å˜é‡ï¼Œåœ¨æ‰€æœ‰classçš„å®ä¾‹å†…å…±äº«ï¼Œä¸ä¼šè‡ªåŠ¨é”€æ¯<ul><li>å…¶ä»–æ¨¡å—å¯é€šè¿‡æ­¤classè®¿é—®ï¼ˆç±»publicï¼‰</li></ul></li><li>classå¤–çš„å˜é‡ï¼Œåœ¨æ‰€æœ‰classçš„å®ä¾‹å†…å…±äº«ï¼ˆå…¬æœ‰ï¼‰ï¼Œä¸ä¼šè‡ªåŠ¨é”€æ¯<ul><li>é™¤éæ˜ç¡®exportï¼Œå¦åˆ™å…¶ä»–æ¨¡å—ä¸å¯è®¿é—®ï¼ˆç±»privateï¼‰</li></ul></li><li>globalå…¨å±€å˜é‡ï¼Œä»»ä½•åœ°æ–¹å¯è¯»å†™ï¼ˆç±»æµè§ˆå™¨çš„windowï¼‰ï¼Œä¸ä¼šè‡ªåŠ¨é”€æ¯<ul><li>global.test = 1;åˆ™ä¹‹åçš„ä»»ä½•åœ°æ–¹å¯alert(global.test)æˆ–alert(test)</li></ul></li></ul><h3 id="å„ç§å˜é‡çš„å†™æ³•"><a href="#å„ç§å˜é‡çš„å†™æ³•" class="headerlink" title="å„ç§å˜é‡çš„å†™æ³•"></a>å„ç§å˜é‡çš„å†™æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">global.d = <span class="number">0</span>;<span class="comment">// å…¨å±€å˜é‡</span></div><div class="line"><span class="keyword">const</span> c = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];<span class="comment">// åœ¨å½“å‰æ–‡ä»¶éƒ½å¯ä»¥è®¿é—®</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodMorning</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  </div><div class="line">  <span class="comment">// æˆå‘˜å˜é‡</span></div><div class="line">  <span class="comment">// æ¨èå†™æ³•</span></div><div class="line">  a = <span class="number">1</span> <span class="comment">// æˆå‘˜å˜é‡å†™æ³•ï¼Œæ³¨æ„æ²¡æœ‰varæˆ–è€…let</span></div><div class="line">  </div><div class="line">  <span class="comment">// å¹¶ä¸æ¨èçš„å†™æ³•</span></div><div class="line">  <span class="keyword">constructor</span>(props) &#123; <span class="comment">// æ„é€ å‡½æ•°</span></div><div class="line"><span class="keyword">super</span>(props);  <span class="comment">// ç…§æŠ„å³å¯ï¼Œä¸å¯çœç•¥</span></div><div class="line"><span class="keyword">this</span>.a = <span class="number">1</span>;    </div><div class="line">&#125;</div><div class="line"></div><div class="line">  <span class="comment">// é™æ€å˜é‡ å¯ä»¥ç›´æ¥é€šè¿‡ç±»åæ¥è®¿é—®ï¼ŒGoodMorning.defaultProps</span></div><div class="line">  <span class="keyword">static</span> b = <span class="number">2</span>;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;Text&gt;Good morning, &#123;this.props.name&#125;!&lt;/Text&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">  method1()&#123;</div><div class="line">    <span class="comment">// å› ä¸ºæ˜¯å®ä¾‹çš„æˆå‘˜å˜é‡ï¼Œæ‰€æœ‰åŠ å…¥thisæ‰å¯ä»¥ä½¿ç”¨</span></div><div class="line">    <span class="keyword">this</span>.a;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹äºŒï¼Œä½¿ç”¨mapè¿›è¡Œåˆ—è¡¨çš„å¾ªç¯åˆ›å»º"><a href="#ç¤ºä¾‹äºŒï¼Œä½¿ç”¨mapè¿›è¡Œåˆ—è¡¨çš„å¾ªç¯åˆ›å»º" class="headerlink" title="ç¤ºä¾‹äºŒï¼Œä½¿ç”¨mapè¿›è¡Œåˆ—è¡¨çš„å¾ªç¯åˆ›å»º"></a>ç¤ºä¾‹äºŒï¼Œä½¿ç”¨mapè¿›è¡Œåˆ—è¡¨çš„å¾ªç¯åˆ›å»º</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  AppRegistry,</div><div class="line">  StyleSheet,</div><div class="line">  Text,</div><div class="line">  View,</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodMorning</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;Text&gt;Good morning, &#123;this.props.name&#125;!&lt;/Text&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> names = [<span class="string">'name1'</span>, <span class="string">'name2'</span>, <span class="string">'name3'</span>,<span class="string">'name4'</span>]</div><div class="line"><span class="keyword">const</span> GoodEvening = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;Text&gt;Good evening, &#123;props.name&#125;&lt;/Text&gt;</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;View&gt;</div><div class="line">        &#123;</div><div class="line">          // å› ä¸ºè™šæ‹ŸDOMçš„éœ€è¦æ¯”è¾ƒå·®å¼‚ï¼Œä½¿ç”¨keyæ–¹ä¾¿DOMè¿›è¡Œå·®å¼‚çš„æ¯”è¾ƒï¼Œkeyç›´æ¥æ”¾åœ¨ç›´æ¥å®¹å™¨ä¸Šé¢</div><div class="line">          names.map(name =&gt; &lt;GoodMorning key=&#123;name&#125;  name=&#123;name&#125; /&gt;)</div><div class="line">        </div><div class="line">        &#125;</div><div class="line">      &lt;/View &gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">AppRegistry.registerComponent('App', () =&gt; App)</div></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹ä¸‰ï¼Œç‚¹èµç¤ºä¾‹"><a href="#ç¤ºä¾‹ä¸‰ï¼Œç‚¹èµç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹ä¸‰ï¼Œç‚¹èµç¤ºä¾‹"></a>ç¤ºä¾‹ä¸‰ï¼Œç‚¹èµç¤ºä¾‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  AppRegistry,</div><div class="line">  StyleSheet,</div><div class="line">  Text,</div><div class="line">  View,</div><div class="line">  Image,</div><div class="line">  TouchableOpacity,</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  state = &#123;</div><div class="line">    <span class="attr">likes</span>: <span class="number">0</span>,</div><div class="line">  &#125;;</div><div class="line">  onPress = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> &#123; likes &#125; = <span class="keyword">this</span>.state;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;</div><div class="line">      <span class="attr">likes</span>: likes + <span class="number">1</span>,</div><div class="line">    &#125;);</div><div class="line">  &#125;;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;View style=&#123;styles.container&#125;&gt;</div><div class="line">        &lt;TouchableOpacity onPress=&#123;this.onPress&#125;&gt;</div><div class="line">          &lt;Image</div><div class="line">            style=&#123;styles.image&#125;</div><div class="line">            source=&#123;&#123;</div><div class="line">              uri: 'https://github.com/facebook/react-native/blob/master/Examples/UIExplorer/js/Thumbnails/like.png?raw=true',</div><div class="line">            &#125;&#125;</div><div class="line">          /&gt;</div><div class="line">        &lt;/TouchableOpacity&gt;</div><div class="line">        &lt;Text&gt;&#123;this.state.likes&#125;&lt;/Text&gt;</div><div class="line">      &lt;/View&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const styles = StyleSheet.create(&#123;</div><div class="line">  container: &#123;</div><div class="line">    flex: 1,</div><div class="line">    justifyContent: 'center',</div><div class="line">    alignItems: 'center',</div><div class="line">    backgroundColor: '#F5FCFF',</div><div class="line">  &#125;,</div><div class="line">  image: &#123;</div><div class="line">    width: 65,</div><div class="line">    height: 65,</div><div class="line">  &#125;,</div><div class="line">&#125;)</div><div class="line"></div><div class="line">AppRegistry.registerComponent('App', () =&gt; App)</div></pre></td></tr></table></figure><p>æ€»ç»“</p><ul><li>ä¸€åˆ‡ç•Œé¢çš„å˜åŒ–éƒ½æ˜¯å› ä¸ºstateå˜åŒ–è€Œå¼•èµ·çš„</li><li>ä½†æ˜¯stateçš„ä¿®æ”¹å¿…é¡»é€šè¿‡setStateè¿›è¡Œä¿®æ”¹</li><li>ç›´æ¥é€šè¿‡ä¿®æ”¹å±æ€§å€¼æ˜¯æ— æ•ˆçš„ï¼Œä¾‹å¦‚this.state.likes = 100;è¿™æ ·çš„ç›´æ¥èµ‹å€¼ä¿®æ”¹æ˜¯æ— æ•ˆçš„</li><li>setStateæ˜¯ä¸€ä¸ªmergeåˆå¹¶æ“ä½œï¼Œåªä¿®æ”¹æŒ‡å®šçš„å±æ€§ï¼Œä¸å½±å“å…¶ä»–å±æ€§</li><li><p>setStateæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œä¿®æ”¹ä¹‹åå¹¶ä¸èƒ½é©¬ä¸Šä¿®æ”¹ç”Ÿæ•ˆã€‚</p><ul><li>æ¯”å¦‚è¯´åœ¨setStateä¹‹åé©¬ä¸Šè¿è¡Œalertï¼Œè¿›è¡Œæ•°å­—çš„æ˜¾ç¤ºï¼Œè¿™ä¸ªæ—¶å€™æ˜¯é”™çš„<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// é”™è¯¯ç¤ºä¾‹</span></div><div class="line">onPress = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> &#123; likes &#125; = <span class="keyword">this</span>.state;</div><div class="line">  <span class="keyword">this</span>.setState(&#123;</div><div class="line">    <span class="attr">likes</span>: likes + <span class="number">1</span>,</div><div class="line">  &#125;);</div><div class="line">  alert(<span class="keyword">this</span>.state.like);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ­£ç¡®ç¤ºä¾‹</span></div><div class="line">onPress = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> &#123; likes &#125; = <span class="keyword">this</span>.state;</div><div class="line">  <span class="keyword">const</span> newLikes = likes + <span class="number">1</span>;</div><div class="line">  <span class="keyword">this</span>.setState(&#123;</div><div class="line">    <span class="attr">likes</span>: newLikes,</div><div class="line">  &#125;);</div><div class="line">  alert(newLikes);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></li></ul><h3 id="ä¸ºä»€ä¹ˆè¦å¼•å…¥Stateçš„æ¦‚å¿µ"><a href="#ä¸ºä»€ä¹ˆè¦å¼•å…¥Stateçš„æ¦‚å¿µ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¼•å…¥Stateçš„æ¦‚å¿µ"></a>ä¸ºä»€ä¹ˆè¦å¼•å…¥Stateçš„æ¦‚å¿µ</h3><p><img src="/resources/9F302D689DC97C4B7A739579EFE09BCA.jpg" alt="IMAGE"><br>å¦‚å›¾æ‰€ç¤ºï¼Œè™šæ‹ŸDOMçš„ä¿®æ”¹åªæ˜¯ä¸€ä¸ªå¢é‡æ›´æ–°ï¼Œæ¯”è¾ƒå¾—å‡ºå‰å’Œåçš„å·®å¼‚ï¼Œè®¡ç®—å‡ºdiffï¼Œç„¶åå»é‡æ–°æ¸²æŸ“å·®å¼‚éƒ¨åˆ†<br><img src="/resources/E105DA6EEC89A567AC63D8E805575EB1.jpg" alt="IMAGE"><br><img src="/resources/361B31527F3ECE475B3705A81659E72C.jpg" alt="IMAGE"><br>Keyçš„ä½¿ç”¨æ–¹ä¾¿äº†DOMè®¡ç®—å‡ºå·®å¼‚éƒ¨åˆ†ï¼Œå¯¹å·®å¼‚éƒ¨åˆ†å¯ä»¥è¿›è¡Œæ›´æ–¹ä¾¿çš„æ¯”è¾ƒã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><h3 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h3><p><a href="https://facebook.github.io/react/docs/introducing-jsx.html" target="_blank" rel="noopener">Introducint JSX</a><br><a href="https://facebook.github.io/react/docs/jsx-in-depth.html" target="_blank" rel="noopener">JSX In Depth</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ReactJSå’ŒReactNative&quot;&gt;&lt;a href=&quot;#ReactJSå’ŒReactNative&quot; class=&quot;headerlink&quot; title=&quot;ReactJSå’ŒReactNative&quot;&gt;&lt;/a&gt;ReactJSå’ŒReactNative&lt;/h2&gt;&lt;h3 id=&quot;ä¸¤è€…åŒºåˆ«æ¯”è¾ƒ&quot;&gt;&lt;a href=&quot;#ä¸¤è€…åŒºåˆ«æ¯”è¾ƒ&quot; class=&quot;headerlink&quot; title=&quot;ä¸¤è€…åŒºåˆ«æ¯”è¾ƒ&quot;&gt;&lt;/a&gt;ä¸¤è€…åŒºåˆ«æ¯”è¾ƒ&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/resources/44D051F354FFBF35A300E1F8C731FD9B.jpg&quot; alt=&quot;IMAGE&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ€é‡è¦çš„åŒºåˆ«è«è¿‡äºæ˜¯æ§ä»¶æ–¹é¢çš„åŒºåˆ«ï¼Œå¯¹åº”çš„åˆ†åˆ«æ˜¯å¯¹åº”å¹³å°çš„ç»„ä»¶
    
    </summary>
    
    
      <category term="RN" scheme="http://www.zhz.io/tags/RN/"/>
    
  </entry>
  
  <entry>
    <title>RNæ™´æ˜è§†é¢‘å­¦ä¹ ç¬”è®° - ç¬¬äºŒç« </title>
    <link href="http://www.zhz.io/2017/09/10/%E6%99%B4%E6%98%8E%E8%A7%86%E9%A2%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%BA%8C%E7%AB%A0/"/>
    <id>http://www.zhz.io/2017/09/10/æ™´æ˜è§†é¢‘å­¦ä¹ ç¬”è®°-ç¬¬äºŒç« /</id>
    <published>2017-09-10T08:51:50.000Z</published>
    <updated>2018-02-12T02:28:16.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŸç”Ÿ-Hybird-RN"><a href="#åŸç”Ÿ-Hybird-RN" class="headerlink" title="åŸç”Ÿ/Hybird/RN"></a>åŸç”Ÿ/Hybird/RN</h2><h3 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h3><table><thead><tr><th>å½¢å¼</th><th>ä»‹ç»</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>åŸç”Ÿ</td><td>ä½¿ç”¨åŸç”Ÿè¯­è¨€è¿›è¡Œç¼–å†™å¼€å‘</td><td>æ€§èƒ½å¥½/æœ‰ç”Ÿæ€åœˆçš„ä¼˜åŠ¿ç‚¹</td><td>å„ä¸ªå¹³å°æœ‰å„è‡ªçš„è¯­è¨€ï¼Œå­¦ä¹ æˆæœ¬å¤§ï¼Œä¸å…¼å®¹</td></tr><tr><td>Hybrid Appæ··åˆå¼€å‘</td><td>ä½¿ç”¨å‰æ®µä»£ç ï¼Œåœ¨å„ä¸ªå¹³å°ä¸Šæœ‰ä»–çš„å®¹å™¨WebViewï¼Œåˆ©ç”¨ä»–è¿›è¡Œæ¸²æŸ“</td><td>è·¨å¹³å°ï¼Œé€‚åˆç®€å•åº”ç”¨</td><td>æ€§èƒ½ä¸æ˜¯å¾ˆå¥½ </td></tr><tr><td>RN</td><td>è¾ƒäºå‰é¢ä¸¤è€…ä¹‹é—´ï¼Œä½¿ç”¨JSå¼€å‘ï¼Œç¿»è¯‘æˆåŸç”Ÿç»„ä»¶è¿›è¡Œå±•ç¤º</td><td>å­¦ä¹ æˆæœ¬ä½ï¼Œå¤©ç„¶è·¨å¹³å°ï¼Œæ— å®¡æ ¸çƒ­æ›´æ–°ï¼Œå…·æœ‰ä¼˜ç§€çš„ç¤¾åŒºèƒ½åŠ›ï¼ˆå¼€æºåº“ï¼‰</td><td>æ€§èƒ½</td><td></td></tr></tbody></table><h2 id="ECMAScript"><a href="#ECMAScript" class="headerlink" title="ECMAScript"></a>ECMAScript</h2><p>åè¯è§£é‡Šï¼šECMAScriptæ˜¯ä¸€ç§ç”±Ecmaå›½é™…ï¼ˆå‰èº«ä¸ºæ¬§æ´²è®¡ç®—æœºåˆ¶é€ å•†åä¼š,è‹±æ–‡åç§°æ˜¯European Computer Manufacturers Associationï¼‰é€šè¿‡ECMA-262æ ‡å‡†åŒ–çš„è„šæœ¬ç¨‹åºè®¾è®¡è¯­è¨€ã€‚è¿™ç§è¯­è¨€åœ¨ä¸‡ç»´ç½‘ä¸Šåº”ç”¨å¹¿æ³›ï¼Œå®ƒå¾€å¾€è¢«ç§°ä¸ºJavaScriptæˆ–JScriptï¼Œä½†å®é™…ä¸Šåä¸¤è€…æ˜¯ECMA-262æ ‡å‡†çš„å®ç°å’Œæ‰©å±•ã€‚</p><p>ç®€å•çš„è¯´ï¼šECMAScriptæ˜¯ä¸€ç§æ ‡å‡†æ–‡æœ¬è¯­æ³•ï¼ŒJSæ˜¯æ ¹æ®å…¶è¿›è¡Œè®¾è®¡çš„</p><a id="more"></a><h3 id="å˜é‡å’Œå¸¸é‡ç”Ÿå‘½"><a href="#å˜é‡å’Œå¸¸é‡ç”Ÿå‘½" class="headerlink" title="å˜é‡å’Œå¸¸é‡ç”Ÿå‘½"></a>å˜é‡å’Œå¸¸é‡ç”Ÿå‘½</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> greeting = <span class="string">'hi'</span>; <span class="comment">// æ–°å¼å†™æ³•ï¼Œæ¨èä½¿ç”¨</span></div><div class="line"><span class="keyword">var</span> greeting1 = <span class="string">'hi1'</span>;  <span class="comment">//è€å¼å†™æ³•ï¼Œä¸æ¨èä½¿ç”¨</span></div><div class="line"><span class="keyword">const</span> answer = <span class="number">4</span>;</div><div class="line"><span class="comment">// å¤šä¸ªç”Ÿå‘½ç®€å•äº›å‘</span></div><div class="line"><span class="keyword">let</span> a = <span class="string">'1'</span>; b = <span class="string">'2'</span>;</div><div class="line"><span class="comment">// æ²¡æœ‰å£°æ˜æˆ–è€…å£°æ˜åæ²¡æœ‰èµ‹å€¼çš„å˜é‡å€¼ä¸ºå¸¸é‡</span></div></pre></td></tr></table></figure><h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(a,b) =&gt; a+b;</div></pre></td></tr></table></figure><ul><li><p>classå¤–éƒ¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> å‡½æ•°å = <span class="function">(<span class="params">å‚æ•°</span>) =&gt;</span> &#123; å†…éƒ¨é€»è¾‘ &#125;;</div></pre></td></tr></table></figure></li><li><p>classå†…éƒ¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    æ–¹æ³•å = <span class="function">(<span class="params">å‚æ•°</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// å†…éƒ¨é€»è¾‘</span></div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><blockquote><p>å¯èƒ½å¹¶ä¸æ˜¯å¾ˆä¹ æƒ¯è¿™ç§å†™æ³•ï¼Œè”æƒ³æ–¹æ¡ˆ<br>f(x) = Ï€x^2<br>(x) =&gt; 3.14 <em> x </em> x<br>è¾“å…¥ =&gt; è¾“å‡º<br>å‚æ•° =&gt; è¿”å›è¡¨è¾¾å¼</p></blockquote><ul><li>Tips:è¿™é‡Œæœ‰ä¸ªå‘ï¼Œå¦‚æœç®­å¤´å‡½æ•°çš„ä»£ç å—éƒ¨åˆ†ä½¿ç”¨äº†å¤§æ‹¬å·ï¼Œåˆ™æ­¤æ—¶åˆ‡è«å¿˜äº†ä½¿ç”¨returnè¯­å¥è¿”å›ï¼š</li><li>() =&gt; 1          // è¿”å›1</li><li>() =&gt; { 1 }         // è¿”å› undefined</li><li>() =&gt; { return 1; }    // è¿”å›1</li></ul><h3 id="æ‰©å±•è¿ç®—ç¬¦"><a href="#æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦"></a>æ‰©å±•è¿ç®—ç¬¦</h3><p>â€¦æ‰©å±•è¿ç®—ç¬¦å¥½æ¯”æ˜¯æŠŠä¸€ä¸ªå‹ç¼©åŒ…ç»™è§£å‹åˆ°å½“å‰ç›®å½•<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ•°ç»„</span></div><div class="line">    <span class="comment">// æ•°ç»„</span></div><div class="line">    <span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">    <span class="built_in">console</span>.log(...a)     <span class="comment">// 1 2 3 </span></div><div class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>, ...a, <span class="number">5</span>) <span class="comment">// 1 1 2 3 5</span></div><div class="line"></div><div class="line">    <span class="comment">// å¯¹è±¡</span></div><div class="line">    <span class="keyword">let</span> z = &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span> &#125;; </div><div class="line">    <span class="keyword">let</span> n = &#123; ...z &#125;; </div><div class="line">    <span class="built_in">console</span>.log(n)<span class="comment">// &#123; a: 3, b: 4 &#125;</span></div></pre></td></tr></table></figure></p><h3 id="è§£æ„"><a href="#è§£æ„" class="headerlink" title="è§£æ„"></a>è§£æ„</h3><p>å¯ä»¥æƒ³è±¡æˆä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿçš„ä»å¯¹è±¡ä¸­è·å–æ•°æ®<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ•°ç»„</span></div><div class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"><span class="built_in">console</span>.log(a, b, c); <span class="comment">//  1 2 3</span></div><div class="line"></div><div class="line"><span class="comment">// å¯¹è±¡</span></div><div class="line"><span class="keyword">var</span> props = &#123; <span class="attr">checked</span>: <span class="literal">false</span>, <span class="attr">data</span>: &#123; <span class="attr">count</span>: <span class="number">3</span>, <span class="attr">price</span>: <span class="number">100</span> &#125; &#125;; </div><div class="line"><span class="comment">// ä»propsä¸­æ‹¿åˆ°checkedçš„å€¼å’Œcountå€¼</span></div><div class="line"><span class="keyword">var</span> &#123; checked, <span class="attr">data</span>: &#123; count &#125; &#125; = props;</div><div class="line"><span class="built_in">console</span>.log(checked, count);<span class="comment">// false  3</span></div></pre></td></tr></table></figure></p><h3 id="æ•°ç»„çš„æ–°å¢æ–¹æ³•"><a href="#æ•°ç»„çš„æ–°å¢æ–¹æ³•" class="headerlink" title="æ•°ç»„çš„æ–°å¢æ–¹æ³•"></a>æ•°ç»„çš„æ–°å¢æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ•°ç»„æŸ¥æ‰¾å…ƒç´ </span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">2</span>); <span class="comment">// true </span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">4</span>); <span class="comment">// false</span></div><div class="line"><span class="comment">// å­—ç¬¦ä¸²ä¹Ÿå¯ç”¨</span></div><div class="line">â€˜helloâ€™.includes(â€˜hellâ€™);<span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// mapè¿”å›ç­‰é•¿çš„æ–°æ•°ç»„</span></div><div class="line"><span class="keyword">let</span> odds = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</div><div class="line"><span class="keyword">let</span> evens = odds.map(<span class="function"><span class="params">i</span> =&gt;</span> i + <span class="number">1</span>);  <span class="comment">// [2, 4, 6, 8, 10]</span></div><div class="line"></div><div class="line"><span class="comment">// ä½¿ç”¨æ ‡è®°æŠ€å·§</span></div><div class="line"><span class="keyword">let</span> names = [â€˜tomâ€™, â€˜jerryâ€™];</div><div class="line"><span class="keyword">let</span> nameTags = names.map(<span class="function"><span class="params">n</span> =&gt;</span> &lt;Text&gt;&#123;n&#125;&lt;<span class="regexp">/Text&gt;)</span></div></pre></td></tr></table></figure><h3 id="æ¨èä¹¦ç±"><a href="#æ¨èä¹¦ç±" class="headerlink" title="æ¨èä¹¦ç±"></a>æ¨èä¹¦ç±</h3><ol><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide" target="_blank" rel="noopener">MDNï¼ˆMozillaå¼€å‘è€…ç½‘ç»œï¼‰</a></li><li><a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">ECMAScript 6 å…¥é—¨ï¼ˆé˜®ä¸€å³°ï¼‰</a></li></ol><h2 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h2><h3 id="ä¸ºä»€ä¹ˆRNéœ€è¦Node-js"><a href="#ä¸ºä»€ä¹ˆRNéœ€è¦Node-js" class="headerlink" title="ä¸ºä»€ä¹ˆRNéœ€è¦Node.js"></a>ä¸ºä»€ä¹ˆRNéœ€è¦Node.js</h3><ol><li>æä¾›React Packagerçš„è¿è¡Œç¯å¢ƒ</li><li>æä¾›npmåŒ…ç®¡ç†å™¨æ¥å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å— (node_modules)</li><li>æä¾›ä¸€äº›å¯å‚è€ƒçš„ä»£ç è§„èŒƒï¼ˆcommonjsï¼‰</li></ol><h3 id="RNçš„åŸºæœ¬æ¶æ„"><a href="#RNçš„åŸºæœ¬æ¶æ„" class="headerlink" title="RNçš„åŸºæœ¬æ¶æ„"></a>RNçš„åŸºæœ¬æ¶æ„</h3><p><img src="/resources/A28F86AE1A1C71F1FC29711BAA78B8E0.jpg" alt="IMAGE"></p><h3 id="npmä½¿ç”¨"><a href="#npmä½¿ç”¨" class="headerlink" title="npmä½¿ç”¨"></a>npmä½¿ç”¨</h3><ol><li>npmä¾èµ–äºåŒçº§ç›®å½•ä¸‹ä¸€ä¸ªpackage.jsonæ–‡ä»¶è¿›è¡Œï¼Œä»“åº“çš„ä¸‹è½½å’Œä¾èµ–ç®¡ç†ã€‚æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¯ä»¥ä½¿ç”¨npm initè¿›è¡Œåˆ›å»º</li><li>npm install (npm i)åŒ…å®‰è£…å™¨<ul><li>é™„åŠ å‘½ä»¤ -gï¼Œå®‰è£…åœ¨ç³»ç»Ÿæ ¹ç›®å½•ä¸­ï¼Œæ¯”å¦‚è¯´react-native-cli</li><li>â€“save/-S æŸ¥æ‰¾ä»“åº“ä¸­æŸæŸåº“çš„æ–¹æ³•ä¸‹è½½ï¼Œå¹¶ä¸”å®‰è£…ï¼Œå¡«å†™è¿›å…¥package.jsonæ–‡ä»¶</li></ul></li><li>npmä¸‹è½½çš„åº“éƒ½ä¼šå­˜æ”¾åœ¨åŒçº§ç›®å½•ä¸‹çš„node_modulesæ–‡ä»¶å¤¹ä¸­ï¼Œæ­¤æ–‡ä»¶å¤¹éšç”¨éšè£…ï¼ŒåŸåˆ™ä¸Šä¸å¤åˆ¶ã€ä¸ç§»åŠ¨ã€ä¸ä¿®æ”¹ã€ä¸ä¸Šä¼ </li></ol><h3 id="å¯¼å…¥å¯¼å‡ºæ¦‚å¿µ"><a href="#å¯¼å…¥å¯¼å‡ºæ¦‚å¿µ" class="headerlink" title="å¯¼å…¥å¯¼å‡ºæ¦‚å¿µ"></a>å¯¼å…¥å¯¼å‡ºæ¦‚å¿µ</h3><ol><li>JSæœ¬èº«æ²¡æœ‰æ¨¡å—çš„æ¦‚å¿µï¼Œä»–ä»¬ä¹‹é—´æ˜¯æ— æ³•è‡ªç”±å¼•ç”¨çš„ã€‚æ‰€ä»¥node.jsåˆ¶å®šäº†commonjsæ¨¡å—è´µæ–¹ï¼Œæ–¹ä¾¿äº†æ‹†åˆ†å’Œå¼•ç”¨ä»£ç <a href="https://nodejs.org/docs/latest/api/modules.html" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></li><li><p>æä¾›ä¸¤ç§å¼•ç”¨çš„è¯­æ³•</p><ul><li><p>ES5 ä¸æ¨è</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = moduleA;      <span class="comment">// a.jså¯¼å‡ºmoduleAæ¨¡å—</span></div><div class="line"><span class="keyword">var</span> moduleA = <span class="built_in">require</span>(â€™./aâ€™)  <span class="comment">// åŒçº§ç›®å½•ä¸‹çš„Bæ¨¡å—å¯¼å…¥moduleAæ¨¡å—</span></div></pre></td></tr></table></figure></li><li><p>ES6 æ¨èä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> moduleA;    <span class="comment">// a.jså¯¼å‡ºæ¨¡å—A</span></div><div class="line"><span class="keyword">import</span> moduleA <span class="keyword">from</span> â€™./aâ€™  <span class="comment">// b.jsç›®å½•ä¸‹å¯¼å…¥åŒçº§ç›®å½•çš„a.jsæ–‡ä»¶çš„æŸä¸ªæ¨¡å—</span></div></pre></td></tr></table></figure></li></ul></li><li><p>æ¨¡å—æŸ¥æ‰¾/å¼•ç”¨è§„åˆ™ï¼š</p><ul><li>require(â€˜ooxxâ€™) â€“ å¼•ç”¨node_modules/ooxx/index.jsï¼Œæˆ–æ˜¯node_modules/ooxx/package.jsonä¸­mainå­—æ®µæ‰€æŒ‡å®šçš„jsæ–‡ä»¶</li><li>require(â€˜./aâ€™) â€“ å¼•ç”¨åŒç›®å½•ä¸‹çš„a.jsæ–‡ä»¶ã€‚æ³¨æ„ ./ ä¸èƒ½çœç•¥ï¼Œ.jsåç¼€å¯å†™å¯ä¸å†™</li><li>require(â€˜../a/bâ€™) â€“ å¼•ç”¨çˆ¶ç›®å½•ä¸­çš„aç›®å½•ä¸­çš„b.jsæ–‡ä»¶ï¼›è‹¥bä¸ºç›®å½•åï¼Œåˆ™æŸ¥æ‰¾å¼•ç”¨bç›®å½•ä¸­çš„index.jsæ–‡ä»¶ã€‚</li></ul></li></ol><blockquote><p>npmä»“åº“æ˜¯éœ€è¦ç¿»å¢™çš„ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…çš„æ·˜å®æº,ä½¿ç”¨ä¸‹è¿°å‘½ä»¤è¿›è¡Œæºçš„åˆ‡æ¢<br>npm config set registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a> â€“global<br>npm config set disturl <a href="https://npm.taobao.org/dist" target="_blank" rel="noopener">https://npm.taobao.org/dist</a> â€“global</p></blockquote><h2 id="çŸ¥è¯†ç‚¹å‚¨å¤‡"><a href="#çŸ¥è¯†ç‚¹å‚¨å¤‡" class="headerlink" title="çŸ¥è¯†ç‚¹å‚¨å¤‡"></a>çŸ¥è¯†ç‚¹å‚¨å¤‡</h2><ol><li>æ‰€æœ‰çš„JSæ–‡ä»¶ï¼Œéƒ½ä¼šè¢«packageæ‰“åŒ…æ•´åˆè¿›å…¥main.jsbundleæ–‡ä»¶ä¸­ã€‚</li><li>main.jsbundleæ–‡ä»¶å¯ä»¥é€šè¿‡pushby/codepushï¼ˆå¾®è½¯ï¼‰è¿›è¡Œå‘å¸ƒåçš„çƒ­æ›´æ–°ã€‚</li></ol><h2 id="ä¹¦ç±ç½‘ç«™æ¨èæ¨è"><a href="#ä¹¦ç±ç½‘ç«™æ¨èæ¨è" class="headerlink" title="ä¹¦ç±ç½‘ç«™æ¨èæ¨è"></a>ä¹¦ç±ç½‘ç«™æ¨èæ¨è</h2><h3 id="JSç›¸å…³"><a href="#JSç›¸å…³" class="headerlink" title="JSç›¸å…³"></a>JSç›¸å…³</h3><ol><li>JavaScript æƒå¨æŒ‡å—ï¼ˆç¬¬6ç‰ˆï¼‰</li><li>JavaScript é«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬3ç‰ˆï¼‰</li><li>JavaScript è¯­è¨€ç²¾ç²¹</li></ol><blockquote><p>1å’Œ2ä¸ºåŸºç¡€ï¼ŒäºŒé€‰ä¸€å»çœ‹ï¼Œ3ä¸ºä½¿ç”¨æŠ€å·§ä¸Šçš„ä¸€äº›ä¸œè¥¿</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;åŸç”Ÿ-Hybird-RN&quot;&gt;&lt;a href=&quot;#åŸç”Ÿ-Hybird-RN&quot; class=&quot;headerlink&quot; title=&quot;åŸç”Ÿ/Hybird/RN&quot;&gt;&lt;/a&gt;åŸç”Ÿ/Hybird/RN&lt;/h2&gt;&lt;h3 id=&quot;å¯¹æ¯”&quot;&gt;&lt;a href=&quot;#å¯¹æ¯”&quot; class=&quot;headerlink&quot; title=&quot;å¯¹æ¯”&quot;&gt;&lt;/a&gt;å¯¹æ¯”&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å½¢å¼&lt;/th&gt;
&lt;th&gt;ä»‹ç»&lt;/th&gt;
&lt;th&gt;ä¼˜åŠ¿&lt;/th&gt;
&lt;th&gt;åŠ£åŠ¿&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åŸç”Ÿ&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨åŸç”Ÿè¯­è¨€è¿›è¡Œç¼–å†™å¼€å‘&lt;/td&gt;
&lt;td&gt;æ€§èƒ½å¥½/æœ‰ç”Ÿæ€åœˆçš„ä¼˜åŠ¿ç‚¹&lt;/td&gt;
&lt;td&gt;å„ä¸ªå¹³å°æœ‰å„è‡ªçš„è¯­è¨€ï¼Œå­¦ä¹ æˆæœ¬å¤§ï¼Œä¸å…¼å®¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Hybrid Appæ··åˆå¼€å‘&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨å‰æ®µä»£ç ï¼Œåœ¨å„ä¸ªå¹³å°ä¸Šæœ‰ä»–çš„å®¹å™¨WebViewï¼Œåˆ©ç”¨ä»–è¿›è¡Œæ¸²æŸ“&lt;/td&gt;
&lt;td&gt;è·¨å¹³å°ï¼Œé€‚åˆç®€å•åº”ç”¨&lt;/td&gt;
&lt;td&gt;æ€§èƒ½ä¸æ˜¯å¾ˆå¥½ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RN&lt;/td&gt;
&lt;td&gt;è¾ƒäºå‰é¢ä¸¤è€…ä¹‹é—´ï¼Œä½¿ç”¨JSå¼€å‘ï¼Œç¿»è¯‘æˆåŸç”Ÿç»„ä»¶è¿›è¡Œå±•ç¤º&lt;/td&gt;
&lt;td&gt;å­¦ä¹ æˆæœ¬ä½ï¼Œå¤©ç„¶è·¨å¹³å°ï¼Œæ— å®¡æ ¸çƒ­æ›´æ–°ï¼Œå…·æœ‰ä¼˜ç§€çš„ç¤¾åŒºèƒ½åŠ›ï¼ˆå¼€æºåº“ï¼‰&lt;/td&gt;
&lt;td&gt;æ€§èƒ½&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;ECMAScript&quot;&gt;&lt;a href=&quot;#ECMAScript&quot; class=&quot;headerlink&quot; title=&quot;ECMAScript&quot;&gt;&lt;/a&gt;ECMAScript&lt;/h2&gt;&lt;p&gt;åè¯è§£é‡Šï¼šECMAScriptæ˜¯ä¸€ç§ç”±Ecmaå›½é™…ï¼ˆå‰èº«ä¸ºæ¬§æ´²è®¡ç®—æœºåˆ¶é€ å•†åä¼š,è‹±æ–‡åç§°æ˜¯European Computer Manufacturers Associationï¼‰é€šè¿‡ECMA-262æ ‡å‡†åŒ–çš„è„šæœ¬ç¨‹åºè®¾è®¡è¯­è¨€ã€‚è¿™ç§è¯­è¨€åœ¨ä¸‡ç»´ç½‘ä¸Šåº”ç”¨å¹¿æ³›ï¼Œå®ƒå¾€å¾€è¢«ç§°ä¸ºJavaScriptæˆ–JScriptï¼Œä½†å®é™…ä¸Šåä¸¤è€…æ˜¯ECMA-262æ ‡å‡†çš„å®ç°å’Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•çš„è¯´ï¼šECMAScriptæ˜¯ä¸€ç§æ ‡å‡†æ–‡æœ¬è¯­æ³•ï¼ŒJSæ˜¯æ ¹æ®å…¶è¿›è¡Œè®¾è®¡çš„&lt;/p&gt;
    
    </summary>
    
    
      <category term="RN" scheme="http://www.zhz.io/tags/RN/"/>
    
  </entry>
  
  <entry>
    <title>ReactiveCocoa - ä¿¡å·ç±»åˆ†æ</title>
    <link href="http://www.zhz.io/2017/08/18/ReactiveCocoa%E4%BF%A1%E5%8F%B7%E7%B1%BB%E5%88%86%E6%9E%90/"/>
    <id>http://www.zhz.io/2017/08/18/ReactiveCocoaä¿¡å·ç±»åˆ†æ/</id>
    <published>2017-08-18T03:06:40.000Z</published>
    <updated>2018-02-12T03:09:02.682Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¿¡å·ç±»åŸºç¡€æ¦‚å¿µåŠåŸç†"><a href="#ä¿¡å·ç±»åŸºç¡€æ¦‚å¿µåŠåŸç†" class="headerlink" title="ä¿¡å·ç±»åŸºç¡€æ¦‚å¿µåŠåŸç†"></a>ä¿¡å·ç±»åŸºç¡€æ¦‚å¿µåŠåŸç†</h2><h3 id="ä¿¡å·ç±»çš„é›†æˆå…³ç³»å›¾"><a href="#ä¿¡å·ç±»çš„é›†æˆå…³ç³»å›¾" class="headerlink" title="ä¿¡å·ç±»çš„é›†æˆå…³ç³»å›¾"></a>ä¿¡å·ç±»çš„é›†æˆå…³ç³»å›¾</h3><p><img src="/resources/FA1CDE683EA35A1CCDBAB883F9B0A64D.jpg" alt="IMAGE"></p><a id="more"></a><h3 id="RACSrteam"><a href="#RACSrteam" class="headerlink" title="RACSrteam"></a>RACSrteam</h3><ul><li>è§£é‡Šï¼šæ‰€æœ‰ä¿¡å·çš„çˆ¶ç±»</li><li>ä½œç”¨ï¼šå»ºç«‹ä¿¡å·ä¹‹é—´çš„é“¾æ¥ï¼Œä¾‹å¦‚map/filter/zipå‡½æ•°</li><li>ä½¿ç”¨æ¡ˆä¾‹ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦å»åˆ›å»ºå®ƒï¼Œç›´æ¥åˆ›å»ºä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li></ul><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å·²Emptyä¸ºä¾‹ã€‚</span></div><div class="line">+ (__kindof RACStream *)empty &#123;</div><div class="line"><span class="built_in">NSString</span> *reason = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@ must be overridden by subclasses"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd)];</div><div class="line"><span class="keyword">@throw</span> [<span class="built_in">NSException</span> exceptionWithName:<span class="built_in">NSInternalInconsistencyException</span> reason:reason userInfo:<span class="literal">nil</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="RACSignal"><a href="#RACSignal" class="headerlink" title="RACSignal"></a>RACSignal</h2><h3 id="ç»¼è¿°"><a href="#ç»¼è¿°" class="headerlink" title="ç»¼è¿°"></a>ç»¼è¿°</h3><p>RACEmptySignal/RACReturnSignal/RACErrorSignal/RACDynamicSignaléƒ½æ˜¯å¯¹äºRACSignalçš„è¡¥å……ï¼Œå¸®å…¶å®Œå–„å·²æœ‰çš„æ–¹æ³•</p><h3 id="RACEmptySignal"><a href="#RACEmptySignal" class="headerlink" title="RACEmptySignal"></a>RACEmptySignal</h3><ul><li>è§£é‡Šï¼šç©ºä¿¡å·ï¼Œç”¨æ¥å®ç°RACSignalçš„ +empty æ–¹æ³•</li><li>ä½œç”¨ï¼šåœ¨ä¸€äº›ä¿¡å·çš„åˆ›å»ºçš„æ—¶å€™ï¼Œä¸èƒ½è¿”å›nilï¼Œéœ€è¦è¿”å›ä¸€ä¸ªç©ºä¿¡å·</li><li>åŸç†ï¼šåœ¨ä½¿ç”¨+[RACSignal empty]æ–¹æ³•çš„æ—¶å€™ï¼Œå…¶å†…éƒ¨è½¬åˆ°äº†RACEmptySignal</li></ul><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">RACSignal</span> (<span class="title">RACStream</span>)</span></div><div class="line">+ (RACSignal *)empty &#123;</div><div class="line"><span class="keyword">return</span> [RACEmptySignal empty];</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">RACEmptySignal</span></span></div><div class="line">+ (RACSignal *)empty &#123;</div><div class="line"><span class="keyword">return</span> [[[<span class="keyword">self</span> alloc] init] setNameWithFormat:<span class="string">@"+empty"</span>];</div><div class="line">&#125;</div><div class="line">- (RACDisposable *)subscribe:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line"><span class="built_in">NSCParameterAssert</span>(subscriber != <span class="literal">nil</span>);</div><div class="line"></div><div class="line"><span class="keyword">return</span> [RACScheduler.subscriptionScheduler schedule:^&#123;</div><div class="line">[subscriber sendCompleted];</div><div class="line">&#125;];</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure><ul><li>ä½¿ç”¨æ¡ˆä¾‹ï¼š<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">_buttonCommand = [[RACCommand alloc] initWithSignalBlock:^RACSignal * _Nonnull(<span class="keyword">id</span>  _Nullable input) &#123;</div><div class="line">            @strongify(<span class="keyword">self</span>);</div><div class="line">            RACSignal *signal = ...;</div><div class="line">            <span class="comment">// æ ¹æ®æ¡ç«‹æ¡ˆæ¥åˆ›å»ºä¿¡å·</span></div><div class="line">            <span class="keyword">return</span> signal;</div><div class="line">        &#125;];</div></pre></td></tr></table></figure></li></ul><blockquote><p>Note: ä¸ºäº†ç¯‡å¹…é—®é¢˜ï¼Œä¸Šé¢çš„åˆ›å»ºå‡½æ•°æ–¹æ³•éƒ½è¢«åˆ å‡è¿‡ï¼ŒåŒºåˆ«åªåœ¨äºDEBUGå’ŒREALSEæƒ…å†µä¸‹æ˜¯å¤Ÿä¸ºå•ä¾‹ï¼Œå…¶ä»–æ²¡æœ‰é—®é¢˜</p></blockquote><h3 id="RACReturnSignal"><a href="#RACReturnSignal" class="headerlink" title="RACReturnSignal"></a>RACReturnSignal</h3><ul><li>è§£é‡Šï¼šä¸€å…ƒä¿¡å·ï¼Œç”¨æ¥å®ç° RACSignal çš„ +return: æ–¹æ³•ï¼›</li><li>ä½œç”¨ï¼šé€šå¸¸ç”¨äºä¿¡å·çš„è½¬æ¢æ“ä½œï¼Œå¹³å¸¸ç”¨çš„ä¸å¤š</li><li><p>åŸç†ï¼šåœ¨ä½¿ç”¨+[RACSignal return:]æ–¹æ³•çš„æ—¶å€™ï¼Œå…¶å†…éƒ¨è½¬åˆ°äº†RACReturnSignal</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">+ (RACSignal *)<span class="keyword">return</span>:(<span class="keyword">id</span>)value &#123;</div><div class="line">RACReturnSignal *signal = [[<span class="keyword">self</span> alloc] init];</div><div class="line">signal-&gt;_value = value;</div><div class="line"><span class="keyword">return</span> signal;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (RACDisposable *)subscribe:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line">    <span class="keyword">return</span> [RACScheduler.subscriptionScheduler schedule:^&#123;</div><div class="line">        [subscriber sendNext:<span class="keyword">self</span>.value];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@weakify(<span class="keyword">self</span>);</div><div class="line"> [[[<span class="keyword">self</span>.tf_age rac_textSignal] flattenMap:^RACStream *(<span class="keyword">id</span> value) &#123;</div><div class="line">     <span class="keyword">return</span> [RACReturnSignal <span class="keyword">return</span>:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"å¹´é¾„æ˜¯:%@"</span>,value]];</div><div class="line"> &#125;] subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">     @strongify(<span class="keyword">self</span>);</div><div class="line">     <span class="keyword">self</span>.lb_age.text = x;</div><div class="line"> &#125;];</div></pre></td></tr></table></figure></li></ul><h3 id="RACErrorSignal"><a href="#RACErrorSignal" class="headerlink" title="RACErrorSignal"></a>RACErrorSignal</h3><ul><li>è§£é‡Šï¼šä¸€å…ƒä¿¡å·ï¼Œç”¨æ¥å®ç° RACSignal çš„ +error: æ–¹æ³•ï¼›</li><li>ä½œç”¨ï¼šé€šå¸¸ç”¨äºè®¢é˜…è¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯</li><li><p>åŸç†ï¼šåœ¨ä½¿ç”¨+[RACSignal error:]æ–¹æ³•çš„æ—¶å€™ï¼Œå…¶å†…éƒ¨è½¬åˆ°äº†RACErrorSignal</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">+ (RACSignal *)error:(<span class="built_in">NSError</span> *)error &#123;</div><div class="line">RACErrorSignal *signal = [[<span class="keyword">self</span> alloc] init];</div><div class="line">signal-&gt;_error = error;</div><div class="line"><span class="keyword">return</span> signal;</div><div class="line">&#125;</div><div class="line"><span class="comment">// è®¢é˜…è€…ç›´æ¥ä¼šæ”¶åˆ°Errorä¿¡å·</span></div><div class="line">- (RACDisposable *)subscribe:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line">    <span class="keyword">return</span> [RACScheduler.subscriptionScheduler schedule:^&#123;</div><div class="line">        [subscriber sendError:<span class="keyword">self</span>.error];</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">+ (RACSignal *)userRegister:(<span class="built_in">NSString</span> *)loginId</div><div class="line">                   authCode:(<span class="built_in">NSString</span> *)authCode</div><div class="line">                   password:(<span class="built_in">NSString</span> *)password &#123;</div><div class="line">    <span class="keyword">if</span> (![HZLoginModuleUtils checkPassword:password]) &#123;</div><div class="line">        <span class="keyword">return</span> [RACSignal error:[<span class="built_in">NSError</span> errorWithDomain:<span class="string">@"HZLoginModule"</span></div><div class="line">                                                    code:<span class="number">1</span></div><div class="line">                                                userInfo:@&#123;<span class="string">@"message"</span>:<span class="string">@"å¯†ç æ ¼å¼"</span>&#125;]];</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// balabalabala</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><h3 id="RACDynamicSignal"><a href="#RACDynamicSignal" class="headerlink" title="RACDynamicSignal"></a>RACDynamicSignal</h3><ul><li>è§£é‡Šï¼šåŠ¨æ€ä¿¡å·ï¼Œä½¿ç”¨ä¸€ä¸ª block æ¥å®ç°è®¢é˜…è¡Œä¸ºï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ RACSignal çš„ +createSignal: æ–¹æ³•æ—¶åˆ›å»ºçš„å°±æ˜¯è¯¥ç±»çš„å®ä¾‹ï¼›</li><li>ä½œç”¨ï¼šæ¯æ—¶æ¯åˆ»ç”¨çš„å†·ä¿¡å·éƒ½æ˜¯è¿™ä¹ˆåˆ›å»ºçš„</li><li>åŸç†ï¼š<ol><li>åœ¨ä½¿ç”¨+[RACSignal createSignal:]æ–¹æ³•çš„æ—¶å€™ï¼Œå…¶å†…éƒ¨è½¬åˆ°äº†RACDynamicSignal</li><li>RACDynamicSignal copyäº†ä¸€ä»½Block</li><li>åœ¨RACDynamicSignalæ”¶åˆ°è®¢é˜…çš„æ—¶å€™ï¼Œé€šè¿‡RACPassthroughSubscriberåŒ…è£…è®¢é˜…è€…å’Œdisposableå°†å…¶è¿›è¡ŒåŒ…è£…</li><li>åŒ…è£…å®Œæˆä¹‹åï¼Œå»ºç«‹Schedulerè¿›è¡ŒBlockæ‰§è¡Œ</li><li>æä¾›disposeæ–¹æ³•ç»™å¤–ç•Œï¼Œå¯ä»¥éšæ—¶è¿›è¡Œä¿¡å·çš„é”€æ¯ã€‚æ³¨æ„è¿™ä¸ªdisposeæ˜¯å¤åˆçš„disposeä¸æ˜¯ä½ è‡ªå·±æŒ‡å®šçš„äº†ã€‚<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">+ (RACSignal *)createSignal:(RACDisposable * (^)(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber))didSubscribe &#123;</div><div class="line">RACDynamicSignal *signal = [[<span class="keyword">self</span> alloc] init];</div><div class="line">signal-&gt;_didSubscribe = [didSubscribe <span class="keyword">copy</span>];</div><div class="line"><span class="keyword">return</span> [signal setNameWithFormat:<span class="string">@"+createSignal:"</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (RACDisposable *)subscribe:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line"><span class="built_in">NSCParameterAssert</span>(subscriber != <span class="literal">nil</span>);</div><div class="line">  <span class="comment">// è¿™é‡Œæœ‰ä¸€ä¸ªRACCompoundDisposableï¼Œè¿™æ˜¯ä¸€ä¸ªRACDisposableï¼Œåªä¸è¿‡RACCompoundDisposableå¯ä»¥å­˜æ”¾å¤šä¸ªRACDisposable ã€‚å½“RACCompoundDisposable æ‰§è¡Œdisposeæ–¹æ³•æ—¶ï¼Œå®ƒæ‰€å­˜æ”¾çš„disposableéƒ½ä¼šè¢«é‡Šæ”¾ã€‚</span></div><div class="line">RACCompoundDisposable *disposable = [RACCompoundDisposable compoundDisposable];</div><div class="line"><span class="comment">// è®¢é˜…è€…æ¯ä¸€æ¬¡è®¢é˜…ä¿¡å·æ˜¯äº§ç”Ÿä¸€ä¸ª Disposable ï¼Œå¹¶å°†å…¶ä¸æ­¤æ¬¡è®¢é˜…å…³è”èµ·æ¥ï¼Œé€šè¿‡è£…é¥°å™¨ RACPassthroughSubscriber æ¥åšåˆ°ï¼Œè£…é¥°å™¨çš„åŠŸèƒ½å¦‚ä¸‹:</span></div><div class="line"><span class="comment">//  - åŒ…è£…çœŸæ­£çš„è®¢é˜…è€…ï¼Œä½¿è‡ªå·±æˆä¸ºè®¢é˜…è€…çš„æ›¿ä»£è€…</span></div><div class="line">  <span class="comment">//  - å°†çœŸæ­£çš„è®¢é˜…è€…ä¸ä¸€ä¸ªè®¢é˜…æ—¶äº§ç”Ÿçš„ Disposable å…³è”èµ·æ¥ã€‚</span></div><div class="line">subscriber = [[RACPassthroughSubscriber alloc] initWithSubscriber:subscriber signal:<span class="keyword">self</span> disposable:disposable];</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.didSubscribe != <span class="literal">NULL</span>) &#123;</div><div class="line">  <span class="comment">// å°†å½“å‰çš„è¿è¡Œè½¬æ¥åˆ°RACSchedulerè¿›è¡Œ</span></div><div class="line">RACDisposable *schedulingDisposable = [RACScheduler.subscriptionScheduler schedule:^&#123;</div><div class="line">  <span class="comment">// è°ƒç”¨çœŸæ­£çš„è®¢é˜…ï¼Œä½†æ˜¯ä¼ é€’çš„å¹¶éä¹‹å‰çš„è®¢é˜…è€…ï¼Œè€Œæ˜¯è£…é¥°å™¨</span></div><div class="line">RACDisposable *innerDisposable = <span class="keyword">self</span>.didSubscribe(subscriber);</div><div class="line">[disposable addDisposable:innerDisposable];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">[disposable addDisposable:schedulingDisposable];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">return</span> disposable;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ol></li></ul><blockquote><p>Note:RACDynamicSignal ä½¿ç”¨ RACPassthroughSubscriber ,è®¢é˜…è€…è£…é¥°å™¨ç›´æ¥ä¼ªè£…æˆçœŸæ­£çš„è®¢é˜…å™¨ï¼Œä¼ ç»™ didSubscribe è¿™ä¸ª block ä½¿ç”¨ã€‚åœ¨è¿™ä¸ª block ä¸­ï¼Œä¼šæœ‰ä¸€äº›äº‹ä»¶å‘é€ç»™è®¢é˜…è€…è£…é¥°å™¨ï¼Œè€Œè¿™ä¸ªè®¢é˜…è€…è£…é¥°å™¨åˆ™æ ¹æ® disposable çš„çŠ¶æ€æ¥æ¥å†³å®šæ˜¯å¦è½¬å‘ç»™çœŸæ­£çš„è®¢é˜…è€…ã€‚disposable ä½œä¸ºè¿”å›å€¼ï¼Œè¿”å›ç»™å¤–éƒ¨ï¼Œä¹Ÿå°±æ˜¯è¯´èƒ½å¤Ÿä»å¤–éƒ¨æ¥å–æ¶ˆè¿™ä¸ªè®¢é˜…äº†ã€‚</p></blockquote><ul><li>ä½¿ç”¨æ¡ˆä¾‹ï¼š<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">RACSignal *aSignal = [RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">    <span class="comment">// æ­¤å¤„subscriberä¸ºè½¬æ¢åçš„subscriber</span></div><div class="line">   [subscriber sendNext:<span class="string">@"abc"</span>];</div><div class="line">   [subscriber sendCompleted];</div><div class="line"></div><div class="line">   <span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line">       <span class="built_in">NSLog</span>(<span class="string">@"disposable"</span>);</div><div class="line">   &#125;];</div><div class="line">&#125;];</div></pre></td></tr></table></figure></li></ul><h3 id="RACChannelTerminal"><a href="#RACChannelTerminal" class="headerlink" title="RACChannelTerminal"></a>RACChannelTerminal</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åŒå‘ç»‘å®šè¿™ä»¶äº‹æƒ…ã€‚<br><img src="/resources/41863AF8A61873D1D38D72BF3C38FC69.jpg" alt="IMAGE"><br>æˆ‘ä»¬å¦‚ä½•å®ç°ä¿¡å·ä»Aä¼ åˆ°Bï¼Œåˆå¯ä»¥ä»Bä¼ åˆ°Aå‘¢ã€‚åˆ©ç”¨ä¿¡å·çš„åŒå‘ä¼ é€’çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨RACSubjectï¼Œè¿™æ ·Aå‘çš„ä¿¡å·Bå°±èƒ½æ¥åˆ°ï¼Œè€Œä¸”Bå‘çš„ä¿¡å·Aä¹Ÿèƒ½å¤Ÿæ¥æ”¶åˆ°ã€‚<br><img src="/resources/3333985DB5A5A590D5966CFDDFDC34A6.jpg" alt="IMAGE"><br>è¿™æ ·ä¹Ÿæœ‰ä¸ªé—®é¢˜ï¼Œå› ä¸ºAæ˜¯Subjectçš„è®¢é˜…è€…åˆæ˜¯æ¥å—è€…ï¼ŒAå‘é€ç»™Bçš„ä¸œè¥¿ï¼ŒAä¹ŸåŒæ ·ä¼šè¢«æ¥å—åˆ°ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ã€‚</p><ul><li>è§£é‡Šï¼šä¸ºäº†è§£å†³æ•°æ®åŒå‘ä¼ é€’ï¼Œç‰¹åˆ«è®¾è®¡çš„ä¸€ä¸ªç±»</li><li>ä½œç”¨ï¼šä¸Šé¢å·²ç»æœ‰æè¿°ä¸å†è¯´äº†</li><li>æ¡ˆä¾‹ï¼š<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å»ºç«‹åŒå‘ç»‘å®šæ–¹å¼1</span></div><div class="line">RACChannelTo(<span class="keyword">self</span>,string1) = RACChannelTo(<span class="keyword">self</span>,string2);</div><div class="line"><span class="comment">// å»ºç«‹åŒå‘ç»‘å®šæ–¹å¼2</span></div><div class="line"><span class="keyword">self</span>.channel1 = [[RACKVOChannel alloc] initWithTarget:<span class="keyword">self</span> keyPath:<span class="string">@"string1"</span> nilValue:<span class="literal">nil</span>];</div><div class="line"><span class="keyword">self</span>.channel2 = [[RACKVOChannel alloc] initWithTarget:<span class="keyword">self</span> keyPath:<span class="string">@"string2"</span> nilValue:<span class="literal">nil</span>];</div><div class="line"><span class="keyword">self</span>.channel1[<span class="string">@"followingTerminal"</span>] = <span class="keyword">self</span>.channel2[<span class="string">@"followingTerminal"</span>];</div></pre></td></tr></table></figure></li></ul><blockquote><p>æ–¹æ¡ˆ2åªæ˜¯æ–¹æ¡ˆ1çš„å±•å¼€ï¼Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„éƒ½æ˜¯RACKVOChannelã€‚æ‰€ä»¥ä»¥æ­¤ä¸ºä¾‹</p></blockquote><ul><li>è®¢é˜…å…³ç³»<br><img src="/resources/8053428106F17C5443DC8D72D019093C.jpg" alt="IMAGE"><br>ç‰¹åˆ«è§£é‡Šï¼š</li></ul><ol><li>leadä¸­çš„valueç­‰äºfollowçš„other<br>3=7 4=6 10=12 11=13</li><li>åŒä¸€ä¸ªTerminalä¸­çš„ä¿¡å·ä¸ä¼šè¿›è¡Œäº’ç›¸ä¼ é€’ï¼Œå› ä¸ºä½¿ç”¨ignoreValuesè¿›è¡Œäº†å¿½ç•¥(åªæ˜¯æåŠå¤§å¯å¿½ç•¥è¿™æ¡è§„åˆ™)</li><li>string1å’Œstring2å¹¶ä¸æ˜¯çœŸæ­£çš„è®¢é˜…è€…ã€‚è¿™è¾¹åªæ˜¯ä¸ºäº†æ˜¾ç¤ºæ–¹ä¾¿ç»™å¤§å®¶æ¼”ç¤ºè¿™ä¹ˆå†™äº†ã€‚<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">RACChannel</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)init &#123;</div><div class="line"><span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line"></div><div class="line">RACReplaySubject *leadingSubject = [[RACReplaySubject replaySubjectWithCapacity:<span class="number">0</span>] setNameWithFormat:<span class="string">@"leadingSubject"</span>];</div><div class="line">RACReplaySubject *followingSubject = [[RACReplaySubject replaySubjectWithCapacity:<span class="number">1</span>] setNameWithFormat:<span class="string">@"followingSubject"</span>];</div><div class="line"></div><div class="line">[[leadingSubject ignoreValues] subscribe:followingSubject];</div><div class="line">[[followingSubject ignoreValues] subscribe:leadingSubject];</div><div class="line"></div><div class="line">  <span class="comment">// ç»“åˆä¸‹é¢çš„Terminalåˆå§‹åŒ–ï¼Œå³å¯çœ‹åˆ°leafçš„valueå’Œfollowçš„otheræ˜¯ç›¸ç­‰çš„</span></div><div class="line">_leadingTerminal = [[[RACChannelTerminal alloc] initWithValues:leadingSubject otherTerminal:followingSubject] setNameWithFormat:<span class="string">@"leadingTerminal"</span>];</div><div class="line">_followingTerminal = [[[RACChannelTerminal alloc] initWithValues:followingSubject otherTerminal:leadingSubject] setNameWithFormat:<span class="string">@"followingTerminal"</span>];</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">RACChannelTerminal</span></span></div><div class="line">- (<span class="keyword">instancetype</span>)initWithValues:(RACSignal *)values otherTerminal:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)otherTerminal &#123;</div><div class="line"><span class="built_in">NSCParameterAssert</span>(values != <span class="literal">nil</span>);</div><div class="line"><span class="built_in">NSCParameterAssert</span>(otherTerminal != <span class="literal">nil</span>);</div><div class="line">    </div><div class="line"><span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line"></div><div class="line">_values = values;</div><div class="line">_otherTerminal = otherTerminal;</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></li></ol><ul><li>å‘é€æµç¨‹</li></ul><ol><li>String1å¼€å§‹å‘å‡ºäº†å±æ€§æ”¹å˜çš„ä¿¡å·ã€‚</li><li>ç”±1.2.3è¿™ä¸ªvalueè®¢é˜…è€…è¿›è¡Œä¿¡å·çš„æ¥æ”¶</li><li>ç”±äº3=7ï¼Œ3åˆæ˜¯çƒ­ä¿¡å·ï¼Œæ”¶åˆ°ä¿¡å·åè¿›è¡Œä¿¡å·è½¬å‘å‘é€ç»™13è¿™ä¸ªè®¢é˜…è€…</li><li>ç”±äº13=11ï¼Œ11ä¸ºçƒ­ä¿¡å·ï¼Œæ”¶åˆ°ä¿¡å·åï¼Œå‘é€ç»™è®¢é˜…è€…ã€‚æ‰§è¡ŒsetValue:ForKey:å°†å€¼è¿›è¡Œä¼ é€’</li></ol><ul><li>çœ‹ä¸‹ä»£ç <br>æ­¥éª¤1ä¸­çš„å…³é”®ä»£ç <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è¿™æ®µæ˜¯KVCæ³¨å†Œå±æ€§å˜åŒ–ä¹‹åçš„ä¿¡å·å›è°ƒå¤„ç†</span></div><div class="line">RACDisposable *observationDisposable = [strongTarget rac_observeKeyPath:keyPath options:<span class="built_in">NSKeyValueObservingOptionInitial</span> observer:<span class="literal">nil</span> block:^(<span class="keyword">id</span> value, <span class="built_in">NSDictionary</span> *change, <span class="built_in">BOOL</span> causedByDealloc, <span class="built_in">BOOL</span> affectedOnlyLastComponent) &#123;</div><div class="line"><span class="keyword">if</span> (!causedByDealloc &amp;&amp; affectedOnlyLastComponent &amp;&amp; <span class="keyword">self</span>.currentThreadData.ignoreNextUpdate) &#123;</div><div class="line">[<span class="keyword">self</span> destroyCurrentThreadData];</div><div class="line"><span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line">    <span class="comment">// äº¤ç»™äº†leadingTerminalè¿›è¡Œä¿¡å·è½¬å‘</span></div><div class="line">[<span class="keyword">self</span>.leadingTerminal sendNext:value];</div><div class="line">&#125;];</div></pre></td></tr></table></figure></li></ul><p>åœ¨Terminalä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®terminalåªæ˜¯ä½œä¸ºåŒ…è£…è€Œå·²ï¼ŒçœŸæ­£å‘é€å’Œè®¢é˜…æ—¶ç”±valueå’Œotheræ¥è¿›è¡Œè®¢é˜…å’Œå‘é€çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">@implementation RACChannelTerminal</div><div class="line"></div><div class="line">#pragma mark Lifecycle</div><div class="line"></div><div class="line">- (instancetype)initWithValues:(RACSignal *)values otherTerminal:(id&lt;RACSubscriber&gt;)otherTerminal &#123;</div><div class="line">NSCParameterAssert(values != nil);</div><div class="line">NSCParameterAssert(otherTerminal != nil);</div><div class="line">    </div><div class="line">self = [super init];</div><div class="line"></div><div class="line">_values = values;</div><div class="line">_otherTerminal = otherTerminal;</div><div class="line"></div><div class="line">return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#pragma mark RACSignal</div><div class="line"></div><div class="line">- (RACDisposable *)subscribe:(id&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line">return [self.values subscribe:subscriber];</div><div class="line">&#125;</div><div class="line"></div><div class="line">#pragma mark &lt;RACSubscriber&gt;</div><div class="line"></div><div class="line">- (void)sendNext:(id)value &#123;</div><div class="line">[self.otherTerminal sendNext:value];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)sendError:(NSError *)error &#123;</div><div class="line">[self.otherTerminal sendError:error];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)sendCompleted &#123;</div><div class="line">[self.otherTerminal sendCompleted];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)didSubscribeWithDisposable:(RACCompoundDisposable *)disposable &#123;</div><div class="line">[self.otherTerminal didSubscribeWithDisposable:disposable];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p><p>æ­¥éª¤4ä¸­çš„å…³é”®ä»£ç ï¼š<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[[<span class="keyword">self</span>.leadingTerminal</div><div class="line">finally:^&#123;</div><div class="line">[observationDisposable dispose];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line"><span class="built_in">NSObject</span> *object = (keyPathComponentsCount &gt; <span class="number">1</span> ? [<span class="keyword">self</span>.target valueForKeyPath:keyPathByDeletingLastKeyPathComponent] : <span class="keyword">self</span>.target);</div><div class="line"><span class="keyword">if</span> (object == <span class="literal">nil</span>) <span class="keyword">return</span>;</div><div class="line"></div><div class="line">[<span class="keyword">self</span> createCurrentThreadData];</div><div class="line"><span class="keyword">self</span>.currentThreadData.ignoreNextUpdate = <span class="literal">YES</span>;</div><div class="line">      <span class="comment">// å¯ä»¥çœ‹åˆ°æ”¶åˆ°ä¿¡å·åï¼Œè¿›è¡ŒsetValue:forKey:è¿›è¡Œèµ‹å€¼</span></div><div class="line">[object setValue:x ?: nilValue forKey:lastKeyPathComponent];</div><div class="line">&#125; error:^(<span class="built_in">NSError</span> *error) &#123;</div><div class="line"><span class="built_in">NSCAssert</span>(<span class="literal">NO</span>, <span class="string">@"Received error in %@: %@"</span>, <span class="keyword">self</span>, error);</div><div class="line"></div><div class="line"><span class="comment">// Log the error if we're running with assertions disabled.</span></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"Received error in %@: %@"</span>, <span class="keyword">self</span>, error);</div><div class="line">&#125;];</div></pre></td></tr></table></figure></p><h2 id="çƒ­ä¿¡å·"><a href="#çƒ­ä¿¡å·" class="headerlink" title="çƒ­ä¿¡å·"></a>çƒ­ä¿¡å·</h2><h3 id="RACSubject"><a href="#RACSubject" class="headerlink" title="RACSubject"></a>RACSubject</h3><p>äº†è§£RACSubjectå…ˆæ‰¯ä¸€æ‰¯çƒ­å†·ä¿¡å·æ¦‚å¿µ<br>å†·ä¿¡å·:å†·ä¿¡å·åªä¼šåœ¨è¢«è®¢é˜…æ—¶ï¼Œå‘è®¢é˜…è€…å‘é€é€šçŸ¥ã€‚<br>çƒ­ä¿¡å·:çƒ­ä¿¡å·ä¼šåœ¨ä»»æ„æ—¶é—´å‘é€å‡ºä¿¡å·ï¼Œå‘æ‰€æœ‰è®¢é˜…è€…å‘é€ã€‚<br>ä¸¾ä¸ªè´­ä¹°æŠ¥çº¸çš„ğŸŒ°<br>å†·ä¿¡å·ï¼šä½ æ¯æ¬¡å»æ‚è´§é“ºè´­ä¹°æŠ¥çº¸ï¼Œæ‰ä¼šæ‹¿åˆ°æŠ¥çº¸<br>çƒ­ä¿¡å·ï¼šä½ å‘æŠ¥ç¤¾è®¢é˜…æŠ¥çº¸ï¼ŒæŠ¥ç¤¾ä¼šä¸»åŠ¨æ¯å¤©æ—©ä¸Šç»™ä½ å‘æŠ¥çº¸ï¼Œä¸ç®¡ä½ è¦ä¸è¦æ¥å—ï¼Œéƒ½ç»™ä½ å‘é€</p><p>åŒºåˆ«ä¹‹å¤„å†·ä¿¡å·ä¼šç›´æ¥å»å‘é€è®¢é˜…å†…å®¹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (RACDisposable *)subscribe:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line"><span class="keyword">self</span>.didSubscribe(subscriber);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>è€Œçƒ­ä¿¡å·å¹¶ä¸ä¼šåŠæ—¶å‘é€è®¢é˜…å†…å®¹ï¼Œè€Œæ˜¯åœ¨æ¨é€æ•°æ®çš„æ—¶å€™ï¼Œéå†è®¢é˜…äººï¼Œè¿›è¡Œæ•°æ®çš„æ¨é€<br>ç›—ä¸€å¼ å›¾æ¥ç”¨ä¸€ä¸‹<a href="http://draveness.me/racsubject.html" target="_blank" rel="noopener">å‡ºå¤„</a><br><img src="/resources/3D51143DC6F75B2AEE05C2D59C8CCFEA.jpg" alt="IMAGE"><br>è®¢é˜…è¿‡ç¨‹</p><ol><li>åˆå§‹åŒ–ä¸€ä¸ªè£…é¥°å™¨</li><li>å°†è®¢é˜…è€…åŠ å…¥å½“å‰è®¢é˜…è€…æ•°ç»„å†…</li><li>åˆ›å»ºdisposableï¼Œåœ¨è®¢é˜…è€…è¢«é”€æ¯ï¼ˆæŒ‡çš„æ˜¯è¢«disposeï¼‰çš„åŒæ—¶ï¼Œå°†è®¢é˜…è€…ä»è®¢é˜…åˆ—è¡¨ä¸­è¿›è¡Œç§»é™¤<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (RACDisposable *)subscribe:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line">RACCompoundDisposable *disposable = [RACCompoundDisposable compoundDisposable];</div><div class="line">subscriber = [[RACPassthroughSubscriber alloc] initWithSubscriber:subscriber signal:<span class="keyword">self</span> disposable:disposable];</div><div class="line"></div><div class="line"><span class="built_in">NSMutableArray</span> *subscribers = <span class="keyword">self</span>.subscribers;</div><div class="line"><span class="keyword">@synchronized</span> (subscribers) &#123;</div><div class="line">[subscribers addObject:subscriber];</div><div class="line">&#125;</div><div class="line"></div><div class="line">[disposable addDisposable:[RACDisposable disposableWithBlock:^&#123;</div><div class="line"><span class="keyword">@synchronized</span> (subscribers) &#123;</div><div class="line"><span class="built_in">NSUInteger</span> index = [subscribers indexOfObjectWithOptions:<span class="built_in">NSEnumerationReverse</span> passingTest:^ <span class="built_in">BOOL</span> (<span class="keyword">id</span>&lt;RACSubscriber&gt; obj, <span class="built_in">NSUInteger</span> index, <span class="built_in">BOOL</span> *stop) &#123;</div><div class="line"><span class="keyword">return</span> obj == subscriber;</div><div class="line">&#125;];</div><div class="line"></div><div class="line"><span class="keyword">if</span> (index != <span class="built_in">NSNotFound</span>) [subscribers removeObjectAtIndex:index];</div><div class="line">&#125;</div><div class="line">&#125;]];</div><div class="line"></div><div class="line"><span class="keyword">return</span> disposable;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ol><p><img src="/resources/BC332BF723353C86210F9DA243BB76E3.jpg" alt="IMAGE"><br>å‘é€æ¶ˆæ¯çš„è¿‡ç¨‹</p><ol><li>éå†å½“å‰è®¢é˜…è€…åˆ—è¡¨ä¸­æœ‰å“ªäº›å…ƒç´ </li><li>å‘è®¢é˜…è€…å‘é€è®¢é˜…çš„æ¶ˆæ¯<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)sendNext:(<span class="keyword">id</span>)value &#123;</div><div class="line">[<span class="keyword">self</span> enumerateSubscribersUsingBlock:^(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">[subscriber sendNext:value];</div><div class="line">&#125;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)sendError:(<span class="built_in">NSError</span> *)error &#123;</div><div class="line">[<span class="keyword">self</span>.disposable dispose];</div><div class="line"></div><div class="line">[<span class="keyword">self</span> enumerateSubscribersUsingBlock:^(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">[subscriber sendError:error];</div><div class="line">&#125;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)sendCompleted &#123;</div><div class="line">[<span class="keyword">self</span>.disposable dispose];</div><div class="line"></div><div class="line">[<span class="keyword">self</span> enumerateSubscribersUsingBlock:^(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">[subscriber sendCompleted];</div><div class="line">&#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ol><p>å†·ä¿¡å·çš„ä½¿ç”¨<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"ğŸ˜œ"</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">[signal subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x); </div><div class="line">&#125;];</div></pre></td></tr></table></figure></p><p>è¾“å‡º<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HZReactiveCocoaTest_Example[<span class="number">52485</span>:<span class="number">35373322</span>] ğŸ˜œ</div></pre></td></tr></table></figure></p><p>çƒ­ä¿¡å·çš„ä½¿ç”¨<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line"></div><div class="line"><span class="comment">// Subscriber 1</span></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"1st Sub: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">1</span>];</div><div class="line"></div><div class="line"><span class="comment">// Subscriber 2</span></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"2nd Sub: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">2</span>];</div><div class="line"></div><div class="line"><span class="comment">// Subscriber 3</span></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"3rd Sub: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">3</span>];</div><div class="line">[subject sendCompleted];</div></pre></td></tr></table></figure></p><p>è¾“å‡º<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">HZReactiveCocoaTest_Example[<span class="number">52559</span>:<span class="number">35393828</span>] <span class="number">1</span>st Sub: <span class="number">1</span></div><div class="line">HZReactiveCocoaTest_Example[<span class="number">52559</span>:<span class="number">35393828</span>] <span class="number">1</span>st Sub: <span class="number">2</span></div><div class="line">HZReactiveCocoaTest_Example[<span class="number">52559</span>:<span class="number">35393828</span>] <span class="number">2</span>nd Sub: <span class="number">2</span></div><div class="line">HZReactiveCocoaTest_Example[<span class="number">52559</span>:<span class="number">35393828</span>] <span class="number">1</span>st Sub: <span class="number">3</span></div><div class="line">HZReactiveCocoaTest_Example[<span class="number">52559</span>:<span class="number">35393828</span>] <span class="number">2</span>nd Sub: <span class="number">3</span></div><div class="line">HZReactiveCocoaTest_Example[<span class="number">52559</span>:<span class="number">35393828</span>] <span class="number">3</span>rd Sub: <span class="number">3</span></div></pre></td></tr></table></figure></p><p>ç›—ä¸€å¼ å›¾æ¥ç”¨ä¸€ä¸‹<a href="http://draveness.me/racsubject.html" target="_blank" rel="noopener">å‡ºå¤„</a><br><img src="/resources/AD49783AEA246D939670EF5FE1E5B0CA.jpg" alt="IMAGE"><br>çƒ­ä¿¡å·ä¸ä¼šå†è®¢é˜…çš„æ—¶å€™å‘è®¢é˜…äººå»å‘é€æ¶ˆæ¯ï¼Œåªä¼šåœ¨æ¶ˆæ¯å‘é€å‡ºå»æ—¶å€™ï¼Œå‘è®¢é˜…è€…å‘é€æ¶ˆæ¯</p><h3 id="RACGroupedSignal"><a href="#RACGroupedSignal" class="headerlink" title="RACGroupedSignal"></a>RACGroupedSignal</h3><ul><li>è§£é‡Šï¼šåˆ†ç»„ä¿¡å·ï¼Œç”¨æ¥å®ç° RACSignal çš„åˆ†ç»„åŠŸèƒ½ï¼›</li><li>ä½œç”¨ï¼šä¿¡å·ä¸­åŒ…å«ä¸€ä¸ªkeyçš„å±æ€§ï¼Œç”¨æ¥åˆ†ç»„</li><li><p>åŸç†ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">instancetype</span>)signalWithKey:(<span class="keyword">id</span>&lt;<span class="built_in">NSCopying</span>&gt;)key &#123;</div><div class="line">RACGroupedSignal *subject = [<span class="keyword">self</span> subject];</div><div class="line">subject.key = key;</div><div class="line"><span class="keyword">return</span> subject;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li><li><p>æ¡ˆä¾‹ï¼š</p><ol><li>é…åˆgroupBy:transform:è¿›è¡Œä¿¡å·çš„ç»„åˆ</li><li>æ‰€æœ‰æ•°å­—å¤§äº3çš„ç”Ÿæˆä¸€ä¸ªgoodä¸ºkeyçš„RACGroupedSignalï¼Œå°äº3çš„ä¼šç”Ÿæˆä¸€ä¸ªbadçš„RACGroupedSignal<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber)</div><div class="line">                         &#123;</div><div class="line">                             [subscriber sendNext:@<span class="number">1</span>];</div><div class="line">                             [subscriber sendNext:@<span class="number">2</span>];</div><div class="line">                             [subscriber sendNext:@<span class="number">3</span>];</div><div class="line">                             [subscriber sendNext:@<span class="number">4</span>];</div><div class="line">                             [subscriber sendNext:@<span class="number">5</span>];</div><div class="line">                             [subscriber sendCompleted];</div><div class="line">                             <span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line">                                 <span class="built_in">NSLog</span>(<span class="string">@"signal dispose"</span>);</div><div class="line">                             &#125;];</div><div class="line">                         &#125;];</div><div class="line">    <span class="comment">// è¿™æ®µä»£ç è¿˜æ— æ³•å®Œå…¨è§£é‡Šï¼Œå…³äºfilteræœºåˆ¶æ–¹é¢è¿˜ä¸æ˜¯å¾ˆæ‡‚ï¼Œå†ç ”ç©¶ç ”ç©¶</span></div><div class="line">    RACSignal *signalGroup = [signalA groupBy:^<span class="keyword">id</span>&lt;<span class="built_in">NSCopying</span>&gt;(<span class="built_in">NSNumber</span> *object) &#123;</div><div class="line">        <span class="keyword">return</span> object.integerValue &gt; <span class="number">3</span> ? <span class="string">@"good"</span> : <span class="string">@"bad"</span>;</div><div class="line">    &#125; transform:^<span class="keyword">id</span>(<span class="built_in">NSNumber</span> * object) &#123;</div><div class="line">        <span class="keyword">return</span> @(object.integerValue * <span class="number">10</span>);</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">    [[[signalGroup filter:^<span class="built_in">BOOL</span>(RACGroupedSignal *value) &#123;</div><div class="line">        <span class="keyword">return</span> [(<span class="built_in">NSString</span> *)value.key isEqualToString:<span class="string">@"good"</span>];</div><div class="line">    &#125;] flatten]subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"subscribeNext: %@"</span>, x);</div><div class="line">    &#125;];</div></pre></td></tr></table></figure></li></ol></li></ul><p>è¾“å‡º<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">HZReactiveCocoaTest_Example[<span class="number">55955</span>:<span class="number">37029147</span>] subscribeNext: <span class="number">40</span></div><div class="line">HZReactiveCocoaTest_Example[<span class="number">55955</span>:<span class="number">37029147</span>] subscribeNext: <span class="number">50</span></div><div class="line">HZReactiveCocoaTest_Example[<span class="number">55955</span>:<span class="number">37029147</span>] signal dispose</div></pre></td></tr></table></figure></p><h3 id="RACBehaviorSubject"><a href="#RACBehaviorSubject" class="headerlink" title="RACBehaviorSubject"></a>RACBehaviorSubject</h3><ul><li>è§£é‡Šï¼šRACBehaviorSubjectæ˜¯å¯¹RACSubjectçš„æ‰©å……</li><li>ä½œç”¨ï¼šåœ¨è®¢é˜…æ—¶ä¼šå‘è®¢é˜…è€…å‘é€æœ€æ–°çš„æ¶ˆæ¯ï¼Œå†…éƒ¨ä¼šä¿å­˜ä¸€ä¸ªcurrentValueå³æ¶ˆæ¯çš„æœ€æ–°å€¼</li><li>åŸç†ï¼šå†…éƒ¨æœ‰ä¸€ä¸ªcurrentValueå±æ€§å°†æ•°æ®è¿›è¡Œä¿å­˜ã€‚æ¯æ¬¡sendNextçš„æ—¶å€™å°±ä¼šå°†å…¶è¿›è¡Œå‘é€</li><li><p>æ³¨æ„ç‚¹ï¼šæ¯æ¬¡è®¢é˜…çš„æ—¶å€™ï¼Œä¼šé»˜è®¤çš„å»å‘é€ä¸€æ¬¡sendNext:</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="keyword">id</span> currentValue;</div><div class="line">- (<span class="keyword">void</span>)sendNext:(<span class="keyword">id</span>)value &#123;</div><div class="line"><span class="keyword">@synchronized</span> (<span class="keyword">self</span>) &#123;</div><div class="line"><span class="keyword">self</span>.currentValue = value;</div><div class="line">[<span class="keyword">super</span> sendNext:value];</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">- (RACDisposable *)subscribe:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line">RACDisposable *subscriptionDisposable = [<span class="keyword">super</span> subscribe:subscriber];</div><div class="line">RACDisposable *schedulingDisposable = [RACScheduler.subscriptionScheduler schedule:^&#123;</div><div class="line"><span class="keyword">@synchronized</span> (<span class="keyword">self</span>) &#123;</div><div class="line">[subscriber sendNext:<span class="keyword">self</span>.currentValue];</div><div class="line">&#125;</div><div class="line">&#125;];</div><div class="line"></div><div class="line"><span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line">[subscriptionDisposable dispose];</div><div class="line">[schedulingDisposable dispose];</div><div class="line">&#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></li><li><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">RACBehaviorSubject *subject = [RACBehaviorSubject subject];</div><div class="line"></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"1st Sub: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">1</span>];</div><div class="line"></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"2nd Sub: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">2</span>];</div><div class="line"></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"3rd Sub: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">3</span>];</div><div class="line">[subject sendCompleted];</div></pre></td></tr></table></figure></li></ul><p>å—¯ï¼Œåˆè¦ç›—å›¾äº†<br><img src="/resources/9A0C0AC5F26D27C5690B6E7496306B79.jpg" alt="IMAGE"><br>å› ä¸ºé»˜è®¤ä¼šå‘é€ä¸€æ¬¡ï¼Œæ‰€ä»¥åˆ›å»ºçš„æ—¶å€™å…è®¸åˆ›å»ºé»˜è®¤å€¼<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RACBehaviorSubject *subject = [RACBehaviorSubject behaviorSubjectWithDefaultValue:@<span class="number">0</span>];</div></pre></td></tr></table></figure></p><h3 id="RACReplaySubject"><a href="#RACReplaySubject" class="headerlink" title="RACReplaySubject"></a>RACReplaySubject</h3><ul><li>è§£é‡Šï¼šRACReplaySubjectåˆ™æ˜¯å¯¹RACBehaviorSubjectçš„å†ä¸€æ¬¡åŠ å¼ºï¼Œæ˜¯ä¿å­˜æ‰€æœ‰å€¼ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¿å­˜æœ€æ–°å€¼</li><li>ä½œç”¨ï¼šåœ¨è®¢é˜…æ—¶ä¼šå‘è®¢é˜…è€…å‘é€çƒ­ä¿¡å·åˆ›å»ºä»¥æ¥å‘é€è¿‡çš„æ‰€æœ‰æ•°æ®</li><li>åŸç†ï¼šå†…éƒ¨åŒ…å«æœ‰æ¶ˆæ¯æ•°ç»„ï¼Œé»˜è®¤å­˜å‚¨é‡æ˜¯æ— ç¬¦å·æ•´å‹çš„æœ€å¤§å€¼<br>å‘é€è¿‡ç¨‹<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)sendNext:(<span class="keyword">id</span>)value &#123;</div><div class="line"><span class="keyword">@synchronized</span> (<span class="keyword">self</span>) &#123;</div><div class="line">[<span class="keyword">self</span>.valuesReceived addObject:value ?: RACTupleNil.tupleNil];</div><div class="line">[<span class="keyword">super</span> sendNext:value];</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.capacity != RACReplaySubjectUnlimitedCapacity &amp;&amp; <span class="keyword">self</span>.valuesReceived.count &gt; <span class="keyword">self</span>.capacity) &#123;</div><div class="line">[<span class="keyword">self</span>.valuesReceived removeObjectsInRange:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, <span class="keyword">self</span>.valuesReceived.count - <span class="keyword">self</span>.capacity)];</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><p>è®¢é˜…è¿‡ç¨‹<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">- (RACDisposable *)subscribe:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line">RACCompoundDisposable *compoundDisposable = [RACCompoundDisposable compoundDisposable];</div><div class="line"></div><div class="line">RACDisposable *schedulingDisposable = [RACScheduler.subscriptionScheduler schedule:^&#123;</div><div class="line"><span class="keyword">@synchronized</span> (<span class="keyword">self</span>) &#123;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">id</span> value <span class="keyword">in</span> <span class="keyword">self</span>.valuesReceived) &#123;</div><div class="line"><span class="keyword">if</span> (compoundDisposable.disposed) <span class="keyword">return</span>;</div><div class="line"></div><div class="line">[subscriber sendNext:(value == RACTupleNil.tupleNil ? <span class="literal">nil</span> : value)];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (compoundDisposable.disposed) <span class="keyword">return</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.hasCompleted) &#123;</div><div class="line">[subscriber sendCompleted];</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">self</span>.hasError) &#123;</div><div class="line">[subscriber sendError:<span class="keyword">self</span>.error];</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">RACDisposable *subscriptionDisposable = [<span class="keyword">super</span> subscribe:subscriber];</div><div class="line">[compoundDisposable addDisposable:subscriptionDisposable];</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">[compoundDisposable addDisposable:schedulingDisposable];</div><div class="line"></div><div class="line"><span class="keyword">return</span> compoundDisposable;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><ul><li><p>æ³¨æ„ç‚¹ï¼šå½“ç„¶ä½ ä¹Ÿå¯ä»¥è®¾ç½®å­˜å‚¨å†å²æ¶ˆæ¯çš„æ•°é‡,è·Ÿbehaviorä¸€æ ·ï¼Œå·²åˆ›å»ºå°±ä¼šå‘é€å†å²æ¶ˆæ¯</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">instancetype</span>)replaySubjectWithCapacity:(<span class="built_in">NSUInteger</span>)capacity &#123;</div><div class="line"><span class="keyword">return</span> [(RACReplaySubject *)[<span class="keyword">self</span> alloc] initWithCapacity:capacity];</div><div class="line">&#125;</div></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ¡ˆä¾‹</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">RACReplaySubject *subject = [RACReplaySubject subject];</div><div class="line"></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"1st Subscriber: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">1</span>];</div><div class="line"></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"2nd Subscriber: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">2</span>];</div><div class="line"></div><div class="line">[subject subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"3rd Subscriber: %@"</span>, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@<span class="number">3</span>];</div><div class="line">[subject sendCompleted];</div></pre></td></tr></table></figure></li></ul><p>0 0è¯·å…è®¸æˆ‘å†ç›—ä¸€æ¬¡å›¾<br><img src="/resources/2246DA721B846E004E6485B304F0E2A5.jpg" alt="IMAGE"></p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="http://www.jianshu.com/p/912c69dfb55a" target="_blank" rel="noopener">ReactiveCocoaä¿¡å·å‘é€è¯¦è§£</a><br><a href="http://draveness.me/racchannel" target="_blank" rel="noopener">RAC ä¸­çš„åŒå‘æ•°æ®ç»‘å®š</a><br><a href="http://draveness.me/racsubject.html" target="_blank" rel="noopener">RACSubject</a><br><a href="http://www.jianshu.com/p/707ece08257e" target="_blank" rel="noopener">RACGroupedSignal</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¿¡å·ç±»åŸºç¡€æ¦‚å¿µåŠåŸç†&quot;&gt;&lt;a href=&quot;#ä¿¡å·ç±»åŸºç¡€æ¦‚å¿µåŠåŸç†&quot; class=&quot;headerlink&quot; title=&quot;ä¿¡å·ç±»åŸºç¡€æ¦‚å¿µåŠåŸç†&quot;&gt;&lt;/a&gt;ä¿¡å·ç±»åŸºç¡€æ¦‚å¿µåŠåŸç†&lt;/h2&gt;&lt;h3 id=&quot;ä¿¡å·ç±»çš„é›†æˆå…³ç³»å›¾&quot;&gt;&lt;a href=&quot;#ä¿¡å·ç±»çš„é›†æˆå…³ç³»å›¾&quot; class=&quot;headerlink&quot; title=&quot;ä¿¡å·ç±»çš„é›†æˆå…³ç³»å›¾&quot;&gt;&lt;/a&gt;ä¿¡å·ç±»çš„é›†æˆå…³ç³»å›¾&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/resources/FA1CDE683EA35A1CCDBAB883F9B0A64D.jpg&quot; alt=&quot;IMAGE&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="ReactiveCocoa" scheme="http://www.zhz.io/tags/ReactiveCocoa/"/>
    
  </entry>
  
  <entry>
    <title>ReactiveCocoa - åŒå‘ç»‘å®šï¼Œä¸å®Œå…¨è§£æ</title>
    <link href="http://www.zhz.io/2017/08/17/ReactiveCocoa-%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%EF%BC%8C%E4%B8%8D%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90/"/>
    <id>http://www.zhz.io/2017/08/17/ReactiveCocoa-åŒå‘ç»‘å®šï¼Œä¸å®Œå…¨è§£æ/</id>
    <published>2017-08-17T03:00:56.000Z</published>
    <updated>2018-02-12T03:03:08.615Z</updated>
    
    <content type="html"><![CDATA[<h3 id="RACChannelTerminal"><a href="#RACChannelTerminal" class="headerlink" title="RACChannelTerminal"></a>RACChannelTerminal</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åŒå‘ç»‘å®šè¿™ä»¶äº‹æƒ…ã€‚<br><img src="/resources/41863AF8A61873D1D38D72BF3C38FC69.jpg" alt="IMAGE"><br>æˆ‘ä»¬å¦‚ä½•å®ç°ä¿¡å·ä»Aä¼ åˆ°Bï¼Œåˆå¯ä»¥ä»Bä¼ åˆ°Aå‘¢ã€‚åˆ©ç”¨ä¿¡å·çš„åŒå‘ä¼ é€’çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨RACSubjectï¼Œè¿™æ ·Aå‘çš„ä¿¡å·Bå°±èƒ½æ¥åˆ°ï¼Œè€Œä¸”Bå‘çš„ä¿¡å·Aä¹Ÿèƒ½å¤Ÿæ¥æ”¶åˆ°ã€‚<br><img src="/resources/3333985DB5A5A590D5966CFDDFDC34A6.jpg" alt="IMAGE"><br><a id="more"></a><br>è¿™æ ·ä¹Ÿæœ‰ä¸ªé—®é¢˜ï¼Œå› ä¸ºAæ˜¯Subjectçš„è®¢é˜…è€…åˆæ˜¯æ¥å—è€…ï¼ŒAå‘é€ç»™Bçš„ä¸œè¥¿ï¼ŒAä¹ŸåŒæ ·ä¼šè¢«æ¥å—åˆ°ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ã€‚</p><ul><li>è§£é‡Šï¼šä¸ºäº†è§£å†³æ•°æ®åŒå‘ä¼ é€’ï¼Œç‰¹åˆ«è®¾è®¡çš„ä¸€ä¸ªç±»</li><li>ä½œç”¨ï¼šä¸Šé¢å·²ç»æœ‰æè¿°ä¸å†è¯´äº†</li><li>æ¡ˆä¾‹ï¼š<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å»ºç«‹åŒå‘ç»‘å®šæ–¹å¼1</span></div><div class="line">RACChannelTo(<span class="keyword">self</span>,string1) = RACChannelTo(<span class="keyword">self</span>,string2);</div><div class="line"><span class="comment">// å»ºç«‹åŒå‘ç»‘å®šæ–¹å¼2</span></div><div class="line"><span class="keyword">self</span>.channel1 = [[RACKVOChannel alloc] initWithTarget:<span class="keyword">self</span> keyPath:<span class="string">@"string1"</span> nilValue:<span class="literal">nil</span>];</div><div class="line"><span class="keyword">self</span>.channel2 = [[RACKVOChannel alloc] initWithTarget:<span class="keyword">self</span> keyPath:<span class="string">@"string2"</span> nilValue:<span class="literal">nil</span>];</div><div class="line"><span class="keyword">self</span>.channel1[<span class="string">@"followingTerminal"</span>] = <span class="keyword">self</span>.channel2[<span class="string">@"followingTerminal"</span>];</div></pre></td></tr></table></figure></li></ul><blockquote><p>æ–¹æ¡ˆ2åªæ˜¯æ–¹æ¡ˆ1çš„å±•å¼€ï¼Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„éƒ½æ˜¯RACKVOChannelã€‚æ‰€ä»¥ä»¥æ­¤ä¸ºä¾‹</p></blockquote><ul><li>è®¢é˜…å…³ç³»<br><img src="/resources/8053428106F17C5443DC8D72D019093C.jpg" alt="IMAGE"><br>ç‰¹åˆ«è§£é‡Šï¼š</li></ul><ol><li>leadä¸­çš„valueç­‰äºfollowçš„other<br>3=7 4=6 10=12 11=13</li><li>åŒä¸€ä¸ªTerminalä¸­çš„ä¿¡å·ä¸ä¼šè¿›è¡Œäº’ç›¸ä¼ é€’ï¼Œå› ä¸ºä½¿ç”¨ignoreValuesè¿›è¡Œäº†å¿½ç•¥(åªæ˜¯æåŠå¤§å¯å¿½ç•¥è¿™æ¡è§„åˆ™)</li><li>string1å’Œstring2å¹¶ä¸æ˜¯çœŸæ­£çš„è®¢é˜…è€…ã€‚è¿™è¾¹åªæ˜¯ä¸ºäº†æ˜¾ç¤ºæ–¹ä¾¿ç»™å¤§å®¶æ¼”ç¤ºè¿™ä¹ˆå†™äº†ã€‚<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">RACChannel</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)init &#123;</div><div class="line"><span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line"></div><div class="line">RACReplaySubject *leadingSubject = [[RACReplaySubject replaySubjectWithCapacity:<span class="number">0</span>] setNameWithFormat:<span class="string">@"leadingSubject"</span>];</div><div class="line">RACReplaySubject *followingSubject = [[RACReplaySubject replaySubjectWithCapacity:<span class="number">1</span>] setNameWithFormat:<span class="string">@"followingSubject"</span>];</div><div class="line"></div><div class="line">[[leadingSubject ignoreValues] subscribe:followingSubject];</div><div class="line">[[followingSubject ignoreValues] subscribe:leadingSubject];</div><div class="line"></div><div class="line">  <span class="comment">// ç»“åˆä¸‹é¢çš„Terminalåˆå§‹åŒ–ï¼Œå³å¯çœ‹åˆ°leafçš„valueå’Œfollowçš„otheræ˜¯ç›¸ç­‰çš„</span></div><div class="line">_leadingTerminal = [[[RACChannelTerminal alloc] initWithValues:leadingSubject otherTerminal:followingSubject] setNameWithFormat:<span class="string">@"leadingTerminal"</span>];</div><div class="line">_followingTerminal = [[[RACChannelTerminal alloc] initWithValues:followingSubject otherTerminal:leadingSubject] setNameWithFormat:<span class="string">@"followingTerminal"</span>];</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">RACChannelTerminal</span></span></div><div class="line">- (<span class="keyword">instancetype</span>)initWithValues:(RACSignal *)values otherTerminal:(<span class="keyword">id</span>&lt;RACSubscriber&gt;)otherTerminal &#123;</div><div class="line"><span class="built_in">NSCParameterAssert</span>(values != <span class="literal">nil</span>);</div><div class="line"><span class="built_in">NSCParameterAssert</span>(otherTerminal != <span class="literal">nil</span>);</div><div class="line">    </div><div class="line"><span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line"></div><div class="line">_values = values;</div><div class="line">_otherTerminal = otherTerminal;</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></li></ol><ul><li>å‘é€æµç¨‹</li></ul><ol><li>String1å¼€å§‹å‘å‡ºäº†å±æ€§æ”¹å˜çš„ä¿¡å·ã€‚</li><li>ç”±1.2.3è¿™ä¸ªvalueè®¢é˜…è€…è¿›è¡Œä¿¡å·çš„æ¥æ”¶</li><li>ç”±äº3=7ï¼Œ3åˆæ˜¯çƒ­ä¿¡å·ï¼Œæ”¶åˆ°ä¿¡å·åè¿›è¡Œä¿¡å·è½¬å‘å‘é€ç»™13è¿™ä¸ªè®¢é˜…è€…</li><li>ç”±äº13=11ï¼Œ11ä¸ºçƒ­ä¿¡å·ï¼Œæ”¶åˆ°ä¿¡å·åï¼Œå‘é€ç»™è®¢é˜…è€…ã€‚æ‰§è¡ŒsetValue:ForKey:å°†å€¼è¿›è¡Œä¼ é€’</li></ol><ul><li>çœ‹ä¸‹ä»£ç <br>æ­¥éª¤1ä¸­çš„å…³é”®ä»£ç <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è¿™æ®µæ˜¯KVCæ³¨å†Œå±æ€§å˜åŒ–ä¹‹åçš„ä¿¡å·å›è°ƒå¤„ç†</span></div><div class="line">RACDisposable *observationDisposable = [strongTarget rac_observeKeyPath:keyPath options:<span class="built_in">NSKeyValueObservingOptionInitial</span> observer:<span class="literal">nil</span> block:^(<span class="keyword">id</span> value, <span class="built_in">NSDictionary</span> *change, <span class="built_in">BOOL</span> causedByDealloc, <span class="built_in">BOOL</span> affectedOnlyLastComponent) &#123;</div><div class="line"><span class="keyword">if</span> (!causedByDealloc &amp;&amp; affectedOnlyLastComponent &amp;&amp; <span class="keyword">self</span>.currentThreadData.ignoreNextUpdate) &#123;</div><div class="line">[<span class="keyword">self</span> destroyCurrentThreadData];</div><div class="line"><span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line">    <span class="comment">// äº¤ç»™äº†leadingTerminalè¿›è¡Œä¿¡å·è½¬å‘</span></div><div class="line">[<span class="keyword">self</span>.leadingTerminal sendNext:value];</div><div class="line">&#125;];</div></pre></td></tr></table></figure></li></ul><p>åœ¨Terminalä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®terminalåªæ˜¯ä½œä¸ºåŒ…è£…è€Œå·²ï¼ŒçœŸæ­£å‘é€å’Œè®¢é˜…æ—¶ç”±valueå’Œotheræ¥è¿›è¡Œè®¢é˜…å’Œå‘é€çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">@implementation RACChannelTerminal</div><div class="line"></div><div class="line">#pragma mark Lifecycle</div><div class="line"></div><div class="line">- (instancetype)initWithValues:(RACSignal *)values otherTerminal:(id&lt;RACSubscriber&gt;)otherTerminal &#123;</div><div class="line">NSCParameterAssert(values != nil);</div><div class="line">NSCParameterAssert(otherTerminal != nil);</div><div class="line">    </div><div class="line">self = [super init];</div><div class="line"></div><div class="line">_values = values;</div><div class="line">_otherTerminal = otherTerminal;</div><div class="line"></div><div class="line">return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#pragma mark RACSignal</div><div class="line"></div><div class="line">- (RACDisposable *)subscribe:(id&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line">return [self.values subscribe:subscriber];</div><div class="line">&#125;</div><div class="line"></div><div class="line">#pragma mark &lt;RACSubscriber&gt;</div><div class="line"></div><div class="line">- (void)sendNext:(id)value &#123;</div><div class="line">[self.otherTerminal sendNext:value];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)sendError:(NSError *)error &#123;</div><div class="line">[self.otherTerminal sendError:error];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)sendCompleted &#123;</div><div class="line">[self.otherTerminal sendCompleted];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)didSubscribeWithDisposable:(RACCompoundDisposable *)disposable &#123;</div><div class="line">[self.otherTerminal didSubscribeWithDisposable:disposable];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p><p>æ­¥éª¤4ä¸­çš„å…³é”®ä»£ç ï¼š<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[[<span class="keyword">self</span>.leadingTerminal</div><div class="line">finally:^&#123;</div><div class="line">[observationDisposable dispose];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line"><span class="built_in">NSObject</span> *object = (keyPathComponentsCount &gt; <span class="number">1</span> ? [<span class="keyword">self</span>.target valueForKeyPath:keyPathByDeletingLastKeyPathComponent] : <span class="keyword">self</span>.target);</div><div class="line"><span class="keyword">if</span> (object == <span class="literal">nil</span>) <span class="keyword">return</span>;</div><div class="line"></div><div class="line">[<span class="keyword">self</span> createCurrentThreadData];</div><div class="line"><span class="keyword">self</span>.currentThreadData.ignoreNextUpdate = <span class="literal">YES</span>;</div><div class="line">      <span class="comment">// å¯ä»¥çœ‹åˆ°æ”¶åˆ°ä¿¡å·åï¼Œè¿›è¡ŒsetValue:forKey:è¿›è¡Œèµ‹å€¼</span></div><div class="line">[object setValue:x ?: nilValue forKey:lastKeyPathComponent];</div><div class="line">&#125; error:^(<span class="built_in">NSError</span> *error) &#123;</div><div class="line"><span class="built_in">NSCAssert</span>(<span class="literal">NO</span>, <span class="string">@"Received error in %@: %@"</span>, <span class="keyword">self</span>, error);</div><div class="line"></div><div class="line"><span class="comment">// Log the error if we're running with assertions disabled.</span></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"Received error in %@: %@"</span>, <span class="keyword">self</span>, error);</div><div class="line">&#125;];</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;RACChannelTerminal&quot;&gt;&lt;a href=&quot;#RACChannelTerminal&quot; class=&quot;headerlink&quot; title=&quot;RACChannelTerminal&quot;&gt;&lt;/a&gt;RACChannelTerminal&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åŒå‘ç»‘å®šè¿™ä»¶äº‹æƒ…ã€‚&lt;br&gt;&lt;img src=&quot;/resources/41863AF8A61873D1D38D72BF3C38FC69.jpg&quot; alt=&quot;IMAGE&quot;&gt;&lt;br&gt;æˆ‘ä»¬å¦‚ä½•å®ç°ä¿¡å·ä»Aä¼ åˆ°Bï¼Œåˆå¯ä»¥ä»Bä¼ åˆ°Aå‘¢ã€‚åˆ©ç”¨ä¿¡å·çš„åŒå‘ä¼ é€’çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨RACSubjectï¼Œè¿™æ ·Aå‘çš„ä¿¡å·Bå°±èƒ½æ¥åˆ°ï¼Œè€Œä¸”Bå‘çš„ä¿¡å·Aä¹Ÿèƒ½å¤Ÿæ¥æ”¶åˆ°ã€‚&lt;br&gt;&lt;img src=&quot;/resources/3333985DB5A5A590D5966CFDDFDC34A6.jpg&quot; alt=&quot;IMAGE&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="ReactiveCocoa" scheme="http://www.zhz.io/tags/ReactiveCocoa/"/>
    
  </entry>
  
  <entry>
    <title>Advanced_Apple_Debuggingé˜…è¯»ç¬”è®°Part1</title>
    <link href="http://www.zhz.io/2017/06/05/Advanced-Apple-Debugging%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0Part1/"/>
    <id>http://www.zhz.io/2017/06/05/Advanced-Apple-Debuggingé˜…è¯»ç¬”è®°Part1/</id>
    <published>2017-06-05T13:54:27.000Z</published>
    <updated>2017-06-05T13:57:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸º<a href="https://store.raywenderlich.com/products/advanced-apple-debugging-and-reverse-engineering" target="_blank" rel="noopener">Advanced Apple Debugging &amp; Reverse Engineering</a>çš„ç¬¬ä¸€ç« é˜…è¯»ç¬”è®°ï¼Œ<br>æœ‰ä¸æ­£ä¹‹å¤„æœ›æŒ‡æ­£</p><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><p>å…³é—­Rootlessæ¨¡å¼</p><ul><li>é‡å¯ç”µè„‘ï¼Œå¯åŠ¨åé•¿æŒ‰Commond+R</li><li>è¿›å…¥æ§åˆ¶å°</li><li>è¾“å…¥ csrutil disable; reboot</li><li>ä¸ä¹…åå°±ä¼šé‡å¯ç”µè„‘</li></ul><h3 id="File"><a href="#File" class="headerlink" title="File"></a>File</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ lldb /Projects/Sketch/build/Debug/Sketch.app </div><div class="line">&gt;&gt; Current executable set to &apos;/Projects/Sketch/build/Debug/Sketch.app&apos; (x86_64)</div></pre></td></tr></table></figure><p>ç­‰åŒäº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ lldb </div><div class="line">(lldb) file /Projects/Sketch/build/Debug/Sketch.app </div><div class="line">&gt;&gt; Current executable set to &apos;/Projects/Sketch/build/Debug/Sketch.app&apos; (x86_64).</div></pre></td></tr></table></figure></p><a id="more"></a><h3 id="process"><a href="#process" class="headerlink" title="process"></a>process</h3><ul><li>launch å¯åŠ¨æ‰§è¡Œç›®å½•çš„ç¨‹åº</li></ul><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><ul><li><p>lookup </p><ul><li><p>-n NAME æŸ¥æ‰¾å…·ä½“ä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(lldb) image lookup -n &quot;-[UIViewController viewDidLoad]&quot;</div></pre></td></tr></table></figure></li><li><p>-rn NAME æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆNAMEè§„åˆ™çš„ç¬¦å·ã€‚ç¬¦å·å¯ä»¥æ­£åˆ™ï¼Œæ‰€ä»¥è¯´ç¬¦åˆè§„åˆ™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(lldb) image lookup -rn test</div><div class="line">#Swift</div><div class="line">(lldb) image lookup -rn Signals.SwiftTestClass.name.setter </div><div class="line">2 matches found in /Users/derekselander/Library/Developer/Xcode/DerivedData/Signals-bqrjxlceauwfuihjesxmgfodimef/Build/Products/Debug-iphonesimulator/Signals.app/Signals:</div><div class="line">      Address: Signals[0x000000010000aba0] (Signals.__TEXT.__text +38704)</div><div class="line">      Summary: Signals`@objc Signals.SwiftTestClass.name.setter :raywenderlich.com 47</div><div class="line">      Advanced Apple Debugging Chapter 4: Stopping in Code Swift.ImplicitlyUnwrappedOptional&lt;Swift.String&gt; at SwiftTestClass.swift</div><div class="line">      Address: Signals[0x000000010000ac60] (Signals.__TEXT.__text + 38896)</div><div class="line">      Summary: Signals`Signals.SwiftTestClass.name.setter :Swift.ImplicitlyUnwrappedOptional&lt;Swift.String&gt; at SwiftTestClass.swift</div><div class="line">#Mark ä¸€ä¸‹è¿™è¾¹å‡ºç°äº†ä¸¤ä¸ªï¼Œæ˜¯å› ä¸ºè¿™ä¸ªå·¥ç¨‹æ—¢æœ‰Swiftä»£ç ä¹Ÿæœ‰OCä»£ç ï¼Œè‹¹æœä¸ºäº†åšæ¡¥æ¥åŠ äº†ç¬¬ä¸€ä¸ªåç»­å¯ä»¥æ— è§†</div></pre></td></tr></table></figure></li></ul></li></ul><h3 id="Breakpoint"><a href="#Breakpoint" class="headerlink" title="Breakpoint"></a>Breakpoint</h3><ul><li><p>è®¾ç½®æ–­ç‚¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// ç®€å†™çš„å½¢å¼</div><div class="line">(lldb) b -[UIViewController viewDidLoad]</div><div class="line"> Breakpoint 1: where = UIKit`-[UIViewController viewDidLoad], address = 0x0000000102bbd788</div><div class="line">//å¦‚æœæƒ³åœ¨æŸä¸ªæ–‡ä»¶ä¸­çš„æŸè¡Œè®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</div><div class="line">(lldb) breakpoint set --file foo.c --line 12</div><div class="line">//å¦‚æœæƒ³ç»™æŸä¸ªå‡½æ•°è®¾ç½®æ–­ç‚¹ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</div><div class="line">(lldb) breakpoint set --name foo</div><div class="line">//å¦‚æœæƒ³ç»™C++ä¸­æ‰€æœ‰å‘½åä¸ºfooçš„æ–¹æ³•è®¾ç½®æ–­ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</div><div class="line">(lldb) breakpoint set --method foo</div><div class="line"></div><div class="line"># ä¸‹é¢ä¸¤è€…ç­‰ä»·</div><div class="line">(lldb) b Breakpoints.SwiftTestClass.name.setter :Swift.ImplicitlyUnwrappedOptional&lt;Swift.String&gt;</div><div class="line">(lldb) rb SwiftTestClass.name.setter</div><div class="line"></div><div class="line"># éƒ¨åˆ†æ­£åˆ™å‚è€ƒ</div><div class="line">(lldb) rb name\.setter // image lookupåç»™æ‰€æœ‰åŒ¹é…ä¸Šname.setterçš„æ‰“ä¸Šæ–­ç‚¹</div><div class="line">(lldb) rb &apos;\-\[UIViewController\ &apos; // ç»™è¿™ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•æ‰“ä¸Šæ–­ç‚¹</div><div class="line">(lldb) rb &apos;\-\[UIViewController(\(\w+\))?\ &apos;  // ç»™è¿™ä¸ªç±»çš„æ‰€æœ‰Categoryæ‰“ä¸Šæ–­ç‚¹(æ²¡æœ‰éªŒè¯)</div><div class="line">(lldb) rb . -f DetailViewController.swift // ç»™è¿™ä¸ªæ–‡ä»¶å†…çš„æ‰€æœ‰æ–¹æ³•æ‰“ä¸Šæ–­ç‚¹</div><div class="line">(lldb) rb . //ç»™æ‰€æœ‰çš„æ–¹æ³•æ‰“ä¸Šæ–­ç‚¹ å¾ˆå±é™©</div><div class="line">(lldb) rb . -s UIKit // åªæ–­ç‚¹UIKitåº“é‡Œé¢çš„æ‰€æœ‰æ–¹æ³•</div><div class="line"></div><div class="line"># ç‰¹æ®Šç”¨æ³•</div><div class="line">^(@).* è¿™ä¸ªéœ€è¦è€ƒè¯æ˜¯ç”¨æ¥å±è”½ä¸Šé¢è¯´çš„æ¡¥æ¥é—®é¢˜</div></pre></td></tr></table></figure></li><li><p>å…¶ä»–æ“ä½œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">  # æ–­ç‚¹åˆ—è¡¨</div><div class="line">  (lldb) breakpoint list 1</div><div class="line">  1: name = &apos;main&apos;, locations = 20, resolved = 20, hit count = 0</div><div class="line">1.1: where = Breakpoints`main + 22 at AppDelegate.swift:12, address =0x00000001057676e6, resolved, hit count = 0</div><div class="line">1.2: where = Foundation`-[NSThread main], address = 0x000000010584d182,resolved, hit count = 0</div><div class="line">1.3: where = Foundation`-[NSBlockOperation main], address =0x000000010585df4a, resolved, hit count = 0</div><div class="line">...</div><div class="line"></div><div class="line">  # æ–­ç‚¹åˆ é™¤</div><div class="line">  (lldb) breakpoint delete 1</div><div class="line">  (lldb) breakpoint delete 1.1 è¿™ä¸ªå‡†ç¡®çš„è¯´æ˜¯disableå¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åˆ é™¤</div></pre></td></tr></table></figure></li></ul><h3 id="Expression-amp-po-amp-p"><a href="#Expression-amp-po-amp-p" class="headerlink" title="Expression &amp; po &amp; p"></a>Expression &amp; po &amp; p</h3><p>po =  expression -O â€“</p><p>Note: lldbçš„Contextçš„é—®é¢˜ï¼Œå¦‚æœå½“å‰ä»£ç æ˜¯åœ¨OCä¸‹çš„è¯è¦ç”¨OCè¯­æ³•ï¼Œå¦‚æœæ˜¯åœ¨Swiftçš„ç¯å¢ƒä¸‹è¦ç”¨Swiftä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Swiftç¯å¢ƒä¸‹</div><div class="line">(lldb) po [UIApplication sharedApplication] # ä¸èƒ½è¿™ä¹ˆä½¿ç”¨</div><div class="line">(lldb) expression -l objc -O -- [UIApplication sharedApplication]</div><div class="line">(lldb) po UIApplication.shared </div><div class="line"></div><div class="line"># OCç¯å¢ƒä¸‹</div><div class="line">(lldb) po $R0.title</div><div class="line">(lldb) expression -l swift -- $R0.title</div></pre></td></tr></table></figure></p><p>åˆ›å»ºå®ä¾‹çš„æ—¶å€™è¦åœ¨å®ä¾‹åå­—å‰é¢åŠ $ç¬¦å·ï¼Œä¸ç„¶ä¸èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># åä¾‹</div><div class="line">(lldb) po id test = [NSObject new]</div><div class="line">(lldb) po test</div><div class="line">error: use of undeclared identifier &apos;test&apos;</div><div class="line"></div><div class="line"># æ­£ç¡®ç”¨æ³•</div><div class="line">(lldb) po id $test = [NSObject new]</div><div class="line">(lldb) po $test</div><div class="line">&lt;NSObject: 0x60000001d190&gt;</div><div class="line">(lldb) expression -l swift -O -- $test</div></pre></td></tr></table></figure></p><p>ç»†èŠ‚ï¼šåœ¨ç”¨Expressionè°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œè®¾ç½®çš„Breakpointæ˜¯ä¸ä¼šè¢«ä¸»åŠ¨è§¦å‘çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ä¸ä¼šè¢«è§¦å‘</div><div class="line">(lldb) expression -l swift -O -- $R0.viewDidLoad()</div><div class="line"># ä¼šè¢«è§¦å‘</div><div class="line">(lldb) expression -l swift -O -i 0 -- $R0.viewDidLoad()</div></pre></td></tr></table></figure></p><h3 id="Thread-Frame-amp-Step"><a href="#Thread-Frame-amp-Step" class="headerlink" title="Thread, Frame &amp; Step"></a>Thread, Frame &amp; Step</h3><ul><li><p>Thread &amp; Frame</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> # æ‰“å°å½“å‰æ ˆå†…æƒ…å†µ</div><div class="line">(lldb) thread backtrace</div><div class="line"> # æ‰“å°æ ˆé¡¶ä¿¡æ¯</div><div class="line">(lldb) frame info</div><div class="line">frame #0: 0x00000001075d0ae0 Signals`MasterViewController.viewWillAppear(animated=&lt;invalid&gt; (0xd1),self=0x00007fff5862dac0) -&gt; () at MasterViewController.swift:47</div><div class="line"> # æ ¹æ®æ•°æ®é€‰æ‹©æ ˆ</div><div class="line"> (lldb) frame select 1</div><div class="line"> # æ‰“å°å½“å‰æ‰€åœ¨æ ˆå—å†…çš„å®ä¾‹</div><div class="line"> (lldb) frame variable</div><div class="line"> # æ‰“å°self ç¬¦å·çš„æ‰€æœ‰å®ä¾‹</div><div class="line"> (lldb) frame variable -F self</div></pre></td></tr></table></figure></li><li><p>Step</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># é‡æ–°å¯åŠ¨ç¨‹åº</div><div class="line">(lldb) run</div><div class="line"># ç»§ç»­</div><div class="line">(lldb) continue</div><div class="line"># æ–­ç‚¹ä¸‹ä¸€æ­¥ step over</div><div class="line">(lldb) next</div><div class="line"># è¿›å…¥å‡½æ•°ä¸‹ä¸€æ­¥ step into</div><div class="line">(lldb) step</div><div class="line"># è·³å‡ºå½“å‰å‡½æ•° step out</div><div class="line">(lldb) finish</div></pre></td></tr></table></figure></li></ul><h3 id="TypeFormat"><a href="#TypeFormat" class="headerlink" title="TypeFormat"></a>TypeFormat</h3><p><a href="https://sourceware.org/gdb/ onlinedocs/gdb/Output-Formats.html" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p><h3 id="Customizing-Commands"><a href="#Customizing-Commands" class="headerlink" title="Customizing Commands"></a>Customizing Commands</h3><ol><li>LLDBæ”¯æŒè‡ªå®šä¹‰å‘½ä»¤è¡Œæ“ä½œ (è‘—åçš„chiselå°±æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œç¼–å†™çš„)ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># è¿™ä¸ªå‘½ä»¤ç›¸æ¯”å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œæ˜¯ç”¨æ¥æ‰“å°å½“å‰çš„è§†å›¾ç»“æ„çš„</div><div class="line">(lldb) po [[[[[UIApplication sharedApplication] keyWindow] rootViewController] view] recursiveDescription]</div><div class="line"></div><div class="line"># è‡ªå®šä¹‰å‘½ä»¤(è¿è¡Œæ—¶æ›¿æ¢)</div><div class="line"># Noteï¼šå¦‚æœæƒ³å…¨å±€æ›¿æ¢å¯ä»¥æŠŠè¿™ä¸ªå†™å…¥~/.lldbinité‡Œé¢å³å¯</div><div class="line">(lldb) command alias -- Yay_Autolayout expression -l objc -O -- [[[[[UIApplication sharedApplication] keyWindow] rootViewController] view] recursiveDescription]</div><div class="line"></div><div class="line"># ä¸‹é¢çš„è°ƒç”¨ç­‰ä»·äºç¬¬ä¸€ä¸ª</div><div class="line">(lldb) Yay_Autolayout</div></pre></td></tr></table></figure></li></ol><h3 id="æ­£åˆ™è¡¨è¾¾"><a href="#æ­£åˆ™è¡¨è¾¾" class="headerlink" title="æ­£åˆ™è¡¨è¾¾"></a>æ­£åˆ™è¡¨è¾¾</h3><ul><li>LLDBçš„æ­£åˆ™å®ç°åŸç†æ˜¯åŸºäºShellçš„SEDå‘½ä»¤ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒsedå‘½ä»¤<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(lldb) command regex rlook &apos;s/(.+)/image lookup -rn %1/&apos;</div><div class="line">(lldb) rlook viewDidLoad</div></pre></td></tr></table></figure></li></ul><h3 id="ç®€å†™"><a href="#ç®€å†™" class="headerlink" title="ç®€å†™"></a>ç®€å†™</h3><p>c = continue<br>ex = expression<br>b = breakpoint<br>n = next</p><h3 id="æ‚é¡¹"><a href="#æ‚é¡¹" class="headerlink" title="æ‚é¡¹"></a>æ‚é¡¹</h3><ul><li>$ ttys //æŸ¥æ‰¾å½“å‰ç»ˆç«¯çš„åç§°<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">~ $ tty</div><div class="line">&gt;&gt;  /dev/ttys027</div></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡ä¸º&lt;a href=&quot;https://store.raywenderlich.com/products/advanced-apple-debugging-and-reverse-engineering&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Advanced Apple Debugging &amp;amp; Reverse Engineering&lt;/a&gt;çš„ç¬¬ä¸€ç« é˜…è¯»ç¬”è®°ï¼Œ&lt;br&gt;æœ‰ä¸æ­£ä¹‹å¤„æœ›æŒ‡æ­£&lt;/p&gt;
&lt;h2 id=&quot;åŸºç¡€&quot;&gt;&lt;a href=&quot;#åŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€&quot;&gt;&lt;/a&gt;åŸºç¡€&lt;/h2&gt;&lt;p&gt;å…³é—­Rootlessæ¨¡å¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¯ç”µè„‘ï¼Œå¯åŠ¨åé•¿æŒ‰Commond+R&lt;/li&gt;
&lt;li&gt;è¿›å…¥æ§åˆ¶å°&lt;/li&gt;
&lt;li&gt;è¾“å…¥ csrutil disable; reboot&lt;/li&gt;
&lt;li&gt;ä¸ä¹…åå°±ä¼šé‡å¯ç”µè„‘&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;File&quot;&gt;&lt;a href=&quot;#File&quot; class=&quot;headerlink&quot; title=&quot;File&quot;&gt;&lt;/a&gt;File&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ lldb /Projects/Sketch/build/Debug/Sketch.app &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt;&amp;gt; Current executable set to &amp;apos;/Projects/Sketch/build/Debug/Sketch.app&amp;apos; (x86_64)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç­‰åŒäº&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ lldb &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;(lldb) file /Projects/Sketch/build/Debug/Sketch.app &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt;&amp;gt; Current executable set to &amp;apos;/Projects/Sketch/build/Debug/Sketch.app&amp;apos; (x86_64).&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="LLDB" scheme="http://www.zhz.io/tags/LLDB/"/>
    
  </entry>
  
  <entry>
    <title>Block çš„ä¸ºä»€ä¹ˆä¼šæœ‰å¾ªç¯å¼•ç”¨</title>
    <link href="http://www.zhz.io/2017/03/15/Block-%E7%9A%84%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8/"/>
    <id>http://www.zhz.io/2017/03/15/Block-çš„ä¸ºä»€ä¹ˆä¼šæœ‰å¾ªç¯å¼•ç”¨/</id>
    <published>2017-03-15T02:52:13.000Z</published>
    <updated>2018-02-12T02:53:13.793Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è¿™æ¬¡åˆ†äº«è¦è§£å†³çš„é—®é¢˜"><a href="#è¿™æ¬¡åˆ†äº«è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="è¿™æ¬¡åˆ†äº«è¦è§£å†³çš„é—®é¢˜"></a>è¿™æ¬¡åˆ†äº«è¦è§£å†³çš„é—®é¢˜</h2><p>Block ä¸ºä»€ä¹ˆä¼šå¼•èµ·å¾ªç¯å¼•ç”¨</p><h2 id="æœ¬æ¬¡å®éªŒ"><a href="#æœ¬æ¬¡å®éªŒ" class="headerlink" title="æœ¬æ¬¡å®éªŒ"></a>æœ¬æ¬¡å®éªŒ</h2><ul><li>å¹³å°ä¿¡æ¯</li><li>Apple LLVM version 8.0.0 (clang-800.0.42.1)</li><li>Target: x86_64-apple-darwin16.4.0</li><li>Thread model: posix</li><li>InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin</li><li>MRC</li></ul><a id="more"></a><h2 id="ä¸ºä»€ä¹ˆä¼šå‡ºç°å¾ªç¯å¼•ç”¨"><a href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°å¾ªç¯å¼•ç”¨" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‡ºç°å¾ªç¯å¼•ç”¨"></a>ä¸ºä»€ä¹ˆä¼šå‡ºç°å¾ªç¯å¼•ç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">     +-----------+           +-----------+</div><div class="line">     | instance  |           |   Block   |</div><div class="line">---&gt; |           | --------&gt; |           |</div><div class="line">     | retain 2  | &lt;-------- | retain 1  |</div><div class="line">     |           |           |           |</div><div class="line">     +-----------+           +-----------+</div></pre></td></tr></table></figure><p>å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ä¸¤ä¸ªå®ä¾‹ç›¸äº’æŒæœ‰ã€‚<br>1.å¦‚æœè¦é‡Šæ”¾instanceï¼Œé‚£ä¹ˆè¦å…ˆé‡Šæ”¾Blockã€‚<br>2.å¦‚æœè¦é‡Šæ”¾blockï¼Œé‚£ä¹ˆè¦å…ˆé‡Šæ”¾instanceã€‚<br>æ¡ä»¶1å’Œ2ä¸èƒ½å¤ŸåŒæ—¶æ»¡è¶³ï¼Œé‚£ä¹ˆä¸¤ä¸ªéƒ½ä¸ä¼šè¢«è¿›è¡Œé‡Šæ”¾ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å¾ªç¯å¼•ç”¨ã€‚</p><h2 id="Blockçš„å®ç°"><a href="#Blockçš„å®ç°" class="headerlink" title="Blockçš„å®ç°"></a>Blockçš„å®ç°</h2><p>å·¥å…·Clangï¼ˆGCCçš„æ›¿ä»£å“ï¼‰,ç¼–è¯‘æºç ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚<br><em>â€“rewrite-objc</em>å°†OCçš„.mæ–‡ä»¶è½¬æ¢ä¸ºcppæ–‡ä»¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">clang -rewrite-objc Test.m</div></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line"></div><div class="line">int main(int argc, const char * argv[]) &#123;</div><div class="line">    @autoreleasepool &#123;</div><div class="line">        // insert code here...</div><div class="line">        NSLog(@&quot;Hello, World!&quot;);</div><div class="line">        ^&#123;</div><div class="line">            NSLog(@&quot;Hello Block&quot;);</div><div class="line">        &#125;();</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>åˆ©ç”¨Clangå‘½ä»¤å¯¹æºç è¿›è¡Œé‡å†™ã€‚æå–å…³é”®ä»£ç ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">struct __block_impl &#123;</div><div class="line">  void *isa;</div><div class="line">  int Flags;</div><div class="line">  int Reserved;</div><div class="line">  void *FuncPtr;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">struct __main_block_impl_0 &#123;</div><div class="line">  struct __block_impl impl;</div><div class="line">  struct __main_block_desc_0* Desc;</div><div class="line">  __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int flags=0) &#123;</div><div class="line">    impl.isa = &amp;_NSConcreteStackBlock;</div><div class="line">    impl.Flags = flags;</div><div class="line">    impl.FuncPtr = fp;</div><div class="line">    Desc = desc;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">static void __main_block_func_0(struct __main_block_impl_0 *__cself) &#123;</div><div class="line">    NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_dz_d6n3371d4951v8wz6yx9tbwc0000gn_T_main_cd25fe_mi_1);</div><div class="line">&#125;</div><div class="line"></div><div class="line">static struct __main_block_desc_0 &#123;</div><div class="line">  size_t reserved;</div><div class="line">  size_t Block_size;</div><div class="line">&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0)&#125;;</div><div class="line"></div><div class="line"></div><div class="line">((void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA))();</div></pre></td></tr></table></figure></p><p>ä»ä¸­æˆ‘ä»¬å¯ä»¥å¾—åˆ°äº›ä»€ä¹ˆå…³é”®çš„æ•°æ®<br>ä¸€ä¸ªåŸºç¡€blockç»“æ„ä½“<strong>_block_imp</strong><br>ä¸€ä¸ªé™æ€Cå‡½æ•°<strong>_main_block_func_0</strong>ï¼ˆå‘½åæ–¹å¼ï¼šå½“å‰ç±»çš„å‡½æ•°å+block+func+å½“å‰Blockåœ¨æ–‡ä»¶ä¸­Blockçš„åºåˆ—å·ã€‚ï¼‰<br>ä¸€ä¸ªblockçš„ç»“æ„ä½“<strong>_main_block_impl_0</strong>(å‘½åæ–¹å¼ï¼šå½“å‰ç±»çš„å‡½æ•°å+block+impl+å½“å‰Blockåœ¨æ–‡ä»¶ä¸­Blockçš„åºåˆ—å·ã€‚)<br>ä¸€ä¸ªblockçš„è§£é‡Šä½“<strong>main_block_desc_0</strong>(å‘½åæ–¹å¼ï¼šå½“å‰ç±»çš„å‡½æ•°å+desc+impl+å½“å‰Blockåœ¨æ–‡ä»¶ä¸­Blockçš„åºåˆ—å·ã€‚)</p><p>ç®€åŒ–å¾—åˆ°åŸºç¡€çš„Blockç»“æ„ä½“æ¨¡å‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">struct Block_literal_1 &#123;</div><div class="line">    void *isa;//ARC:__NSMallocBlock__/__NSGlobalBlock__ MRC:__NSMallocBlock__/__NSStackBlock__/__NSGlobalBlock__</div><div class="line">    int flags;//copyåˆ°å †æ—¶å€™ç”¨çš„æ ‡è¯†</div><div class="line">    int reserved;//ä¿ç•™å˜é‡</div><div class="line">    void (*invoke)(void *, ...);//å‡½æ•°æŒ‡é’ˆï¼Œå®é™…Blockçš„å‡½æ•°è°ƒç”¨åœ°å€ï¼Œç±»ä¼¼äºå®ä¾‹æ–¹æ³•çš„IMP</div><div class="line">    struct Block_descriptor_1 *descriptor;//Blockæè¿°ä¿¡æ¯</div><div class="line">&#125;;</div><div class="line">//éæœ¬èŠ‚å…³æ³¨ç‚¹ã€‚æœ‰å…´è¶£è‡ªç”±ç ”ç©¶ã€‚</div><div class="line">struct Block_descriptor_1 &#123;</div><div class="line">    unsigned long int reserved;//ä¿ç•™å˜é‡</div><div class="line">    unsigned long int size;//Blockåœ¨å†…å­˜ä¸­çš„å¤§å°</div><div class="line">    void (*copy)(void *dst, void *src);//copyåˆ°å †ä¸Šä½¿ç”¨çš„æ–¹æ³•</div><div class="line">    void (*dispose)(void *);//æ‰§è¡ŒReleaseæ“ä½œ</div><div class="line">    const char *signature;//å‡½æ•°ç­¾å</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p><ul><li><strong>NSMallocBlock</strong>:å †åŒº</li><li><strong>NSStackBlock</strong> :æ ˆåŒº</li><li><strong>NSGlobalBlock</strong>:Data/TextåŒº</li></ul><h2 id="Blockå‚æ•°è‡ªåŠ¨æ•è·æœºåˆ¶"><a href="#Blockå‚æ•°è‡ªåŠ¨æ•è·æœºåˆ¶" class="headerlink" title="Blockå‚æ•°è‡ªåŠ¨æ•è·æœºåˆ¶"></a>Blockå‚æ•°è‡ªåŠ¨æ•è·æœºåˆ¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line"></div><div class="line">int main(int argc, const char * argv[]) &#123;</div><div class="line">    @autoreleasepool &#123;</div><div class="line">        // insert code here...</div><div class="line">        NSLog(@&quot;Hello, World!&quot;);</div><div class="line">        NSString *a = nil;</div><div class="line">        ^&#123;</div><div class="line">            NSLog(@&quot;%@&quot;,a);</div><div class="line">            NSLog(@&quot;Hello Block&quot;);</div><div class="line">        &#125;();</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ç®€åŒ–ä¸Šè¿°æè¿°ï¼Œæœ€åå¾—åˆ°ç»“æœBlockä¸ºå¦‚ä¸‹å€¼ï¼Œä»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Blockçš„ç»“æ„ä½“å®ä¾‹ä¼šæŒæœ‰aã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">struct Block_literal_1 &#123;</div><div class="line">    void *isa;</div><div class="line">    int flags;</div><div class="line">    int reserved;</div><div class="line">    void (*invoke)(void *, ...);</div><div class="line">    struct Block_descriptor_1 *descriptor;</div><div class="line">    </div><div class="line">    NSString *a;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p><p>çœ‹å®Œäº†Cçš„è¿™äº›å®ç°æˆ‘ä»¬æ¥çœ‹OCçš„ä»£ç ,æµ‹è¯•ä»£ç å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">@interface Test ()</div><div class="line">@property (nonatomic, strong) NSString *a;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation Test</div><div class="line">- (void)test&#123;</div><div class="line">    ^&#123;</div><div class="line">        NSLog(@&quot;%@&quot;,self.a);</div><div class="line">        NSLog(@&quot;Hello Block&quot;);</div><div class="line">    &#125;();</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure></p><p>ç®€åŒ–å¾—åˆ°Blockå¦‚ä¸‹,ä»ä¸­æˆ‘ä»¬çœ‹åˆ°å…¶å®Blockæ˜¯æŒæœ‰selfçš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">struct Block_literal_1 &#123;</div><div class="line">    void *isa;</div><div class="line">    int flags;</div><div class="line">    int reserved;</div><div class="line">    void (*invoke)(void *, ...);</div><div class="line">    struct Block_descriptor_1 *descriptor;</div><div class="line">    </div><div class="line">    Test *self;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p><p>æ‰€ä»¥Blockæ˜¯é€šè¿‡æŒæœ‰selfå®ä¾‹æ¥è°ƒç”¨açš„æˆå‘˜å˜é‡<br>ç®€åŒ–ç‰ˆè°ƒç”¨aæˆå‘˜å˜é‡çš„å®ç°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">static void __Test__test_block_func_0(struct __Test__test_block_impl_0 *__cself) &#123;</div><div class="line">  Test *self = __cself-&gt;self; // bound by copy</div><div class="line">        NSLog((NSString *)objc_msgSend)((id)self, sel_registerName(&quot;a&quot;));</div><div class="line">        NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_dz_d6n3371d4951v8wz6yx9tbwc0000gn_T_Test_92b943_mi_1);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p><h2 id="å®é™…ä½¿ç”¨"><a href="#å®é™…ä½¿ç”¨" class="headerlink" title="å®é™…ä½¿ç”¨"></a>å®é™…ä½¿ç”¨</h2><p>retain cycleé—®é¢˜çš„æ ¹æºåœ¨äºBlockå’Œobjå¯èƒ½ä¼šäº’ç›¸å¼ºå¼•ç”¨ï¼Œäº’ç›¸retainå¯¹æ–¹ï¼Œè¿™æ ·å°±å¯¼è‡´äº†retain cycleï¼Œæœ€åè¿™ä¸ªBlockå’Œobjå°±å˜æˆäº†å­¤å²›ï¼Œè°ä¹Ÿé‡Šæ”¾ä¸äº†è°ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];</div><div class="line">[request setCompletionBlock:^&#123;</div><div class="line">  NSString* string = [request responseString];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">     +-----------+           +-----------+</div><div class="line">     | request   |           |   Block   |</div><div class="line">---&gt; |           | --------&gt; |           |</div><div class="line">     | retain 2  | &lt;-------- | retain 1  |</div><div class="line">     |           |           |           |</div><div class="line">     +-----------+           +-----------+</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];</div><div class="line"> [request setCompletionBlock:^&#123;</div><div class="line">   NSString* string = [request responseString];</div><div class="line"> &#125;];</div><div class="line">     +-----------+           +-----------+</div><div class="line">     | request   |           |   Block   |</div><div class="line">----&gt;|           | --------&gt; |           |</div><div class="line">     | retain 1  | &lt; - - - - | retain 1  |</div><div class="line">     |           |   weak    |           |</div><div class="line">     +-----------+           +-----------+</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">ClassA* objA = [[[ClassA alloc] init] autorelease];</div><div class="line">objA.myBlock = ^&#123;</div><div class="line">  [self doSomething];</div><div class="line">&#125;;</div><div class="line">self.objA = objA;</div><div class="line"></div><div class="line">+-----------+           +-----------+           +-----------+</div><div class="line">|   self    |           |   objA    |           |   Block   |</div><div class="line">|           | --------&gt; |           | --------&gt; |           |</div><div class="line">| retain 2  |           | retain 1  |           | retain 1  |</div><div class="line">|           |           |           |           |           |</div><div class="line">+-----------+           +-----------+           +-----------+</div><div class="line">     ^                                                |</div><div class="line">     |                                                |</div><div class="line">     +------------------------------------------------+</div></pre></td></tr></table></figure><h2 id="æ‰©å±•çŸ¥è¯†"><a href="#æ‰©å±•çŸ¥è¯†" class="headerlink" title="æ‰©å±•çŸ¥è¯†"></a>æ‰©å±•çŸ¥è¯†</h2><p>__blockå’Œ__weakå®ç°åŸç†ï¼ˆæœ‰å…´è¶£çš„è‡ªè¡Œäº†è§£ï¼‰<br>å…³é”®ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">struct __Block_byref_weakSelf_0 &#123;</div><div class="line">  void *__isa;</div><div class="line">__Block_byref_weakSelf_0 *__forwarding;</div><div class="line"> int __flags;</div><div class="line"> int __size;</div><div class="line"> void (*__Block_byref_id_object_copy)(void*, void*);</div><div class="line"> void (*__Block_byref_id_object_dispose)(void*);</div><div class="line"> typeof (self) weakSelf;</div><div class="line">&#125;;</div><div class="line">struct __Test__test_block_impl_0 &#123;</div><div class="line">  struct __block_impl impl;</div><div class="line">  struct __Test__test_block_desc_0* Desc;</div><div class="line">  __Block_byref_weakSelf_0 *weakSelf; // by ref</div><div class="line">  __Block_byref_string_1 *string; // by ref</div><div class="line">  __Test__test_block_impl_0(void *fp, struct __Test__test_block_desc_0 *desc, __Block_byref_weakSelf_0 *_weakSelf, __Block_byref_string_1 *_string, int flags=0) : weakSelf(_weakSelf-&gt;__forwarding), string(_string-&gt;__forwarding) &#123;</div><div class="line">    impl.isa = &amp;_NSConcreteStackBlock;</div><div class="line">    impl.Flags = flags;</div><div class="line">    impl.FuncPtr = fp;</div><div class="line">    Desc = desc;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">static void __Test__test_block_dispose_0(struct __Test__test_block_impl_0*src) &#123;_Block_object_dispose((void*)src-&gt;self, 3/*BLOCK_FIELD_IS_OBJECT*/);&#125;</div><div class="line">static void __Test__test_block_dispose_0(struct __Test__test_block_impl_0*src) &#123;_Block_object_dispose((void*)src-&gt;weakSelf, 8/*BLOCK_FIELD_IS_BYREF*/);&#125;</div></pre></td></tr></table></figure></p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="http://clang.llvm.org/docs/Block-ABI-Apple.html" target="_blank" rel="noopener">LLVM ä¸­ block å®ç°æºç </a><br><a href="http://blog.devtang.com/2013/07/28/a-look-inside-blocks/" target="_blank" rel="noopener">è°ˆObjective-C blockçš„å®ç°</a><br><a href="http://tanqisen.github.io/blog/2013/04/19/gcd-block-cycle-retain/" target="_blank" rel="noopener">æ–‡ä¸­å®é™…ä½¿ç”¨ä¸¾ä¾‹</a><br><a href="https://github.com/deput/NSInvocation-Block/blob/master/NSInvocation%2BBlock.m" target="_blank" rel="noopener">NSInvocation&lt;-&gt;block</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;è¿™æ¬¡åˆ†äº«è¦è§£å†³çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#è¿™æ¬¡åˆ†äº«è¦è§£å†³çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;è¿™æ¬¡åˆ†äº«è¦è§£å†³çš„é—®é¢˜&quot;&gt;&lt;/a&gt;è¿™æ¬¡åˆ†äº«è¦è§£å†³çš„é—®é¢˜&lt;/h2&gt;&lt;p&gt;Block ä¸ºä»€ä¹ˆä¼šå¼•èµ·å¾ªç¯å¼•ç”¨&lt;/p&gt;
&lt;h2 id=&quot;æœ¬æ¬¡å®éªŒ&quot;&gt;&lt;a href=&quot;#æœ¬æ¬¡å®éªŒ&quot; class=&quot;headerlink&quot; title=&quot;æœ¬æ¬¡å®éªŒ&quot;&gt;&lt;/a&gt;æœ¬æ¬¡å®éªŒ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å¹³å°ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;Apple LLVM version 8.0.0 (clang-800.0.42.1)&lt;/li&gt;
&lt;li&gt;Target: x86_64-apple-darwin16.4.0&lt;/li&gt;
&lt;li&gt;Thread model: posix&lt;/li&gt;
&lt;li&gt;InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin&lt;/li&gt;
&lt;li&gt;MRC&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„2016å¹´æ€»ç»“</title>
    <link href="http://www.zhz.io/2016/12/31/%E6%88%91%E7%9A%842016%E5%B9%B4%E6%80%BB%E7%BB%93/"/>
    <id>http://www.zhz.io/2016/12/31/æˆ‘çš„2016å¹´æ€»ç»“/</id>
    <published>2016-12-31T04:44:36.000Z</published>
    <updated>2018-02-12T02:54:15.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>å‘µå‘µå“’ï¼Œè¿™å¥½åƒæ˜¯æˆ‘ç¬¬ä¸€æ¬¡å†™è¿™ç§æ€»ç»“ï¼ˆéé€¼è¿«æ€§ï¼‰ï¼Œæ¥è®°å½•ä¸€ä¸‹ä»Šå¹´æˆ‘éƒ½å¹²äº†å†™å•¥è ¢äº‹ã€‚<br>OK~2016å¹´ï¼Œå°±è¿™æ ·è¿‡å»äº†ï¼Œè¿™å‡ å¤©çœ‹äº†å‡ ä¸ªå°ä¼™ä¼´å’Œä¸€äº›äººçš„åšå®¢ï¼Œå¥—ç”¨ä¸‹æ¨¡æ¿å§ã€‚The Good The Bad</p><h2 id="0x01-The-Good"><a href="#0x01-The-Good" class="headerlink" title="0x01 The Good"></a>0x01 The Good</h2><p>ä»Šå¹´é¡ºåˆ©æ¯•ä¸šäº†ï¼Œç®—æ˜¯åº¦è¿‡äº†äººç”Ÿä¸­æœ€åä¸€æ®µå­¦æ ¡çš„æ—¶å…‰ã€‚<br>ä»Šå¹´çš„å˜åŒ–è¿˜æ˜¯æŒºå¤šçš„å§ï¼Œå•ä»èŒä¸šä¸Šæ¥è¯´ï¼Œä»å­¦ç”Ÿå˜æˆäº†ä»ä¸šè€…ã€‚ä»ç”Ÿæ´»ä¸Šæ¥è¯´ï¼Œä»ä¸€ä¸ªæ»¡å—çˆ¶æ¯å…³æ€€çš„å­©å­å˜æˆäº†ä¸€ä¸ªç‹¬ç«‹è€…ã€‚</p><h2 id="çœ‹äº†æŒºå¤šçš„ä¹¦"><a href="#çœ‹äº†æŒºå¤šçš„ä¹¦" class="headerlink" title="çœ‹äº†æŒºå¤šçš„ä¹¦"></a>çœ‹äº†æŒºå¤šçš„ä¹¦</h2><p>ä»Šå¹´çœ‹äº†æŒºå¤šçš„ä¹¦å§ï¼Œæ¯”å¦‚è¯´CAã€OCç¼–ç¨‹ä¹‹é“ã€Effective Objective-Cã€ä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—ç­‰ç­‰ã€‚æ”¶ç›Šè‰¯å¤šï¼Œäº†è§£äº†æ›´å¤šiOSåº•å±‚çš„ä¸œè¥¿ï¼Œå¯¹äºåç»­å¸®åŠ©çš„ç¡®æŒºå¤§çš„ã€‚<br><a id="more"></a></p><h2 id="ä»ä¸šåŠ¡è½¬å‘ç»„ä»¶"><a href="#ä»ä¸šåŠ¡è½¬å‘ç»„ä»¶" class="headerlink" title="ä»ä¸šåŠ¡è½¬å‘ç»„ä»¶"></a>ä»ä¸šåŠ¡è½¬å‘ç»„ä»¶</h2><p>æ¥åˆ°äº†ä¸€å®¶1Kä»¥ä¸Šè§„æ¨¡çš„å…¬å¸ï¼Œç»ˆäºå¯ä»¥å¼€å§‹ä¸ç”¨å†™ä¸€äº›ä¸šåŠ¡ä¸Šé¢çš„ä»£ç äº†ï¼Œå¯¹äºæˆ‘æ¥è¯´ï¼Œæ„Ÿè§‰ä¸šåŠ¡çš„ä»£ç æ¯”è¾ƒç¹çï¼Œå› ä¸ºå¹³æ—¶çš„å·¥ä½œé‡æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æƒ³ç ”ç©¶ä¸€äº›ä¸œè¥¿å˜æˆäº†ä¸å¯èƒ½ã€‚<br>ç°åœ¨æœ‰æ‰€å¥½è½¬ï¼Œå¯ä»¥å¼€å§‹é‡æ„ä¸€äº›æ¨¡å—ï¼Œå¼€å§‹åšä¸€äº›æ¨¡å—åŒ–çš„ä¸œè¥¿ï¼Œæ¥è§¦ä¸€äº›ä¹‹å‰ä¼šæ¥è§¦ä¸åˆ°çš„ä¸œè¥¿ã€‚æ…¢æ…¢çš„å¼€å§‹ä¼˜åŒ–è‡ªå·±çš„ä»£ç ï¼Œå› ä¸ºæˆ‘å†™çš„å¹¶ä¸æ˜¯åªæœ‰æˆ‘ä¸€ä¸ªäººç”¨ï¼Œè€Œæ˜¯é¢å‘æ•´ä¸ªå›¢é˜Ÿã€‚</p><h2 id="æå‡å·¥ä½œæ•ˆç‡çš„æ–¹æ³•å¹¶ä¸æ˜¯åŠ ç­"><a href="#æå‡å·¥ä½œæ•ˆç‡çš„æ–¹æ³•å¹¶ä¸æ˜¯åŠ ç­" class="headerlink" title="æå‡å·¥ä½œæ•ˆç‡çš„æ–¹æ³•å¹¶ä¸æ˜¯åŠ ç­"></a>æå‡å·¥ä½œæ•ˆç‡çš„æ–¹æ³•å¹¶ä¸æ˜¯åŠ ç­</h2><p>æœ‰æ®µæ—¶é—´ï¼Œæ›¾ç»å¼ºè¿«è‡ªå·±æ¯å¤©æ™šä¸Šä¸€å®šè¦åŠ ç­ï¼ŒæŠŠè‡ªå·±æçš„ç´¯æ­»ç´¯æ´»çš„ï¼Œé‡å¤ç€ä¸€æ ·çš„å·¥ä½œã€‚ç„¶è€Œå¹¶æ²¡æœ‰ä»€ä¹ˆå¾ˆå¥½çš„è¿›å±•ï¼Œå·¥ä½œå®Œæˆé‡å’Œæ—¶é—´æˆäº†ä¸€æ¬¡æ€§æ–¹ç¨‹ç›´çº¿ã€‚<br>åœ¨åšè‡ªåŠ¨åŒ–é™æ€åº“æ„å»ºçš„æ—¶å€™ï¼Œåˆšå¼€å§‹å¹¶æ²¡æœ‰å®Œæ•´çš„ç†è§£Rubyè¯­è¨€çš„é­…åŠ›ï¼Œå¯¼è‡´è‡ªå·±èµ°äº†å¾ˆå¤šçš„å¼¯è·¯ï¼Œè€Œä¸”å°‘äº†é”™è¿‡äº†å¾ˆå¤šæ›´åŠ æœ‰æ•ˆçš„æ–¹æ¡ˆæ–¹æ³•ã€‚</p><h2 id="å½“ä¸‹èƒ½åšçš„ä¸ºä»€ä¹ˆè¦æ‹–åˆ°æ˜å¤©"><a href="#å½“ä¸‹èƒ½åšçš„ä¸ºä»€ä¹ˆè¦æ‹–åˆ°æ˜å¤©" class="headerlink" title="å½“ä¸‹èƒ½åšçš„ä¸ºä»€ä¹ˆè¦æ‹–åˆ°æ˜å¤©"></a>å½“ä¸‹èƒ½åšçš„ä¸ºä»€ä¹ˆè¦æ‹–åˆ°æ˜å¤©</h2><p>è¿™åº”è¯¥ç®—ä¸€ä¸ªæ–¹æ³•çš„è½¬å˜å§ï¼Œæˆ‘è§‰å¾—æˆ‘æ˜¯ä¸€ä¸ªå¾ˆæ‡’çš„äººï¼Œæ‰€ä»¥ä¸€ç›´éƒ½æ˜¯è¿™ä»¶äº‹æƒ…æ˜å¤©åšå§ï¼Œé‚£å°±æ”¾åˆ°æ˜å¤©å¥½äº†ã€‚å½“æ—¶è¿™ä¸ªæ˜å¤©å°±æ°¸è¿œå˜æˆäº†æ˜å¤©ã€‚è¿™æ˜¯æˆ‘ä¸æ„¿æ„çœ‹åˆ°çš„ï¼Œæ‰€ä»¥å¼€å§‹æ…¢æ…¢çš„è°ƒæ•´è‡ªå·±çš„ä¹ æƒ¯ã€‚ä»å°äº‹åšèµ·å§ï¼Œæ¯”å¦‚è¯´ï¼Œæ´—è¡£æœºçš„è¡£æœæ´—å¥½äº†ï¼Œé‚£å°±é©¬ä¸Šå»æ™’æ‰ï¼Œä¸ä¸¢åˆ°æ˜å¤©ã€‚</p><h2 id="1å¹´-1å¹´ï¼Ÿ"><a href="#1å¹´-1å¹´ï¼Ÿ" class="headerlink" title="1å¹´=1å¹´ï¼Ÿ"></a>1å¹´=1å¹´ï¼Ÿ</h2><p>åœ¨æŠ€æœ¯åœˆå­é‡Œæ—¶ä¸æ—¶å°±ä¼šå¬åˆ°è¿™å¥è¯ï¼Œâ€œæŠ€æœ¯æ— æ—¶æ— åˆ»éƒ½åœ¨å˜åŒ–ï¼Œä½ æ°¸è¿œéƒ½ä¸çŸ¥é“ä¸‹ä¸€ç§’å˜æˆäº†ä»€ä¹ˆâ€ã€‚æˆ‘å¬åˆ°äº†å¦å¤–ä¸€å¥è¯ï¼Œâ€œä½ çš„ä¸€å¹´æ˜¯å‡ å¹´â€ï¼Œä½ æ˜¯æ¯å¤©é‡å¤ç€ä¸€æ ·çš„å·¥ä½œï¼Œè¿˜æ˜¯è¯´ä½ æ— æ—¶æ— åˆ»éƒ½åœ¨å­¦ä¹ ã€‚</p><h2 id="0x02-The-Bad"><a href="#0x02-The-Bad" class="headerlink" title="0x02 The Bad"></a>0x02 The Bad</h2><h2 id="å¹´åˆå®šä¸‹çš„ä¸€äº›ç›®æ ‡å¹¶æ²¡æœ‰å®ç°"><a href="#å¹´åˆå®šä¸‹çš„ä¸€äº›ç›®æ ‡å¹¶æ²¡æœ‰å®ç°" class="headerlink" title="å¹´åˆå®šä¸‹çš„ä¸€äº›ç›®æ ‡å¹¶æ²¡æœ‰å®ç°"></a>å¹´åˆå®šä¸‹çš„ä¸€äº›ç›®æ ‡å¹¶æ²¡æœ‰å®ç°</h2><p>å…³äºå¹´åˆå®šäº†ä¸€å †çš„ç›®æ ‡ï¼Œè¢«é—å¿˜äº†å¥½å¤šäº†ã€‚å‘µå‘µå“’ã€‚å…¶ä¸­æœ‰ä¸ªå‡è‚¥çš„å¥½åƒè¢«é—å¿˜çš„ç‰¹åˆ«ä¸¥é‡å§ã€‚å»å¹´ç‹ ä¸‹å¿ƒå‡äº†é‚£ä¹ˆå¤šï¼Œä»Šå¹´å¼¹äº†ä¸€éƒ¨åˆ†ã€‚<br>æ”¹è¿›ï¼šå¯èƒ½è¦å®è¡Œä¸€äº›GTDçš„æ–¹æ¡ˆï¼Œæ¥è§„åˆ’ä¸€ä¸‹åé¢èµ°çš„è·¯ã€‚</p><h2 id="è®¤è¯†çš„äººå¤ªå°‘äº†"><a href="#è®¤è¯†çš„äººå¤ªå°‘äº†" class="headerlink" title="è®¤è¯†çš„äººå¤ªå°‘äº†"></a>è®¤è¯†çš„äººå¤ªå°‘äº†</h2><p>ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºå·¥ä½œäº†çš„å…³ç³»ï¼Œå¼€å§‹è®¤è¯†çš„äººè¶Šæ¥è¶Šå°‘ï¼Œè‡ªå·±çš„åœˆå­è¢«å±€é™äº†èµ·æ¥ã€‚ä¸€äº›äº¤æµä¼šæ„Ÿè§‰æ— æ„ä¹‰å°±è¢«ç•¥è¿‡äº†ï¼Œæˆ–è€…å·²æ²¡æ—¶é—´ä¸ºå€Ÿå£åŒ†åŒ†çš„é¿å¼€äº†ä¸€ç³»åˆ—èšä¼šã€‚å’Œæœ‹å‹ä¹‹é—´å‘†çš„æ—¶é—´ä¹Ÿå¼€å§‹å˜å°‘äº†ã€‚æˆ–è€…è¯´çŸ¥å¿ƒæœ‹å‹åº”è¯¥æ˜¯è¶Šæ¥è¶Šå°‘äº†å§ã€‚<br>æ”¹è¿›ï¼šå¤šå‚åŠ ä¸€äº›æŠ€æœ¯äº¤æµä¼šå§ï¼Œå³ä½¿ä¸æ˜¯æŠ€æœ¯çš„ã€‚</p><h2 id="å…¶ä»–é¢†åŸŸçš„çŸ¥è¯†ç‹©çŒå¤ªå°‘äº†"><a href="#å…¶ä»–é¢†åŸŸçš„çŸ¥è¯†ç‹©çŒå¤ªå°‘äº†" class="headerlink" title="å…¶ä»–é¢†åŸŸçš„çŸ¥è¯†ç‹©çŒå¤ªå°‘äº†"></a>å…¶ä»–é¢†åŸŸçš„çŸ¥è¯†ç‹©çŒå¤ªå°‘äº†</h2><p>ä»Šå¹´ä¸€è‚¡è„‘é—¨çš„æŠ•å…¥åœ¨iOSåœˆå­é‡Œé¢ï¼Œå¯¹äºå…¶ä»–çš„æŠ€æœ¯äº†è§£çš„å¤ªå°‘äº†ï¼Œè¿˜å¥½æœ€åä¸€ä¸ªæœˆï¼Œåœ¨å†™ä¸€äº›è„šæœ¬æ„å»ºæ–¹é¢çš„ä¸œè¥¿ï¼Œä»è€Œèƒ½å¤Ÿå­¦ä¹ åˆ°ä¸€äº›Shellå’ŒRubyã€‚ä¸ç„¶çœŸçš„è¦è¢«OCç»™ç©æ­»äº†ï¼Œåˆ°å¤´æ¥ä¸€ç‚¹æ„æ€éƒ½æ²¡æœ‰ã€‚å‡ å¹´éƒ½ä¸åŠ è¯­è¨€ç‰¹æ€§ï¼ˆå‘µå‘µå“’ï¼‰ã€‚<br>æ”¹è¿›ï¼šåº”è¯¥ä¼šå¯¹ä¸€äº›å…¶ä»–é¢†åŸŸè¿›è¡Œç ”ç©¶ï¼Œç‰¹åˆ«æ˜¯å®‰å…¨æ–¹é¢çš„ã€‚</p><h2 id="é‡æ„ä¸Šæµ‹è¯•å†™å¤ªå°‘äº†"><a href="#é‡æ„ä¸Šæµ‹è¯•å†™å¤ªå°‘äº†" class="headerlink" title="é‡æ„ä¸Šæµ‹è¯•å†™å¤ªå°‘äº†"></a>é‡æ„ä¸Šæµ‹è¯•å†™å¤ªå°‘äº†</h2><p>æœ€åå‡ ä¸ªæœˆé‡æ„äº†ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯å‘¢å‡ºäº†çº¿ä¸ŠBugï¼ŒåŸå› éƒ½å¾ˆç®€å•ï¼Œéƒ½æ˜¯å‡ åˆ†é’Ÿå†…è§£å†³çš„å°Bugï¼Œè€Œä¸”ä¸€äº›æµ‹è¯•æ˜æ˜¾å°±èƒ½å¤Ÿæµ‹è¯•å‡ºæ¥ã€‚å“~åªèƒ½è¯´è‡ªå·±é‡æ„å‰æ²¡æœ‰å†™æµ‹è¯•å§ã€‚å¯¼è‡´è‡ªå·±çŠ¯äº†ä¸€äº›å¾ˆä½çº§çš„é”™è¯¯ã€‚<br>æ”¹è¿›ï¼šä»¥åé‡æ„çš„æ—¶å€™å‰å†™å¥½å•å…ƒæµ‹è¯•å’ŒåŠŸèƒ½æµ‹è¯•å§ã€‚</p><h2 id="0x03-2017-ä¸€äº›è®¡åˆ’"><a href="#0x03-2017-ä¸€äº›è®¡åˆ’" class="headerlink" title="0x03 2017 ä¸€äº›è®¡åˆ’"></a>0x03 2017 ä¸€äº›è®¡åˆ’</h2><ol><li>æ˜ç¡®è‡ªå·±çš„äººç”Ÿç›®æ ‡ï¼ˆåº”è¯¥æ˜¯é˜¶æ®µæ€§çš„ç›®æ ‡ï¼‰</li><li>å»ä¸€æ¬¡æ—¥æœ¬</li><li>æ”¹å˜è‡ªå·±</li><li>èƒ½å¤Ÿä»å®¹çš„åº”å¯¹å„ç§äº‹æƒ…</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;0x00-å‰è¨€&quot;&gt;&lt;a href=&quot;#0x00-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;0x00 å‰è¨€&quot;&gt;&lt;/a&gt;0x00 å‰è¨€&lt;/h2&gt;&lt;p&gt;å‘µå‘µå“’ï¼Œè¿™å¥½åƒæ˜¯æˆ‘ç¬¬ä¸€æ¬¡å†™è¿™ç§æ€»ç»“ï¼ˆéé€¼è¿«æ€§ï¼‰ï¼Œæ¥è®°å½•ä¸€ä¸‹ä»Šå¹´æˆ‘éƒ½å¹²äº†å†™å•¥è ¢äº‹ã€‚&lt;br&gt;OK~2016å¹´ï¼Œå°±è¿™æ ·è¿‡å»äº†ï¼Œè¿™å‡ å¤©çœ‹äº†å‡ ä¸ªå°ä¼™ä¼´å’Œä¸€äº›äººçš„åšå®¢ï¼Œå¥—ç”¨ä¸‹æ¨¡æ¿å§ã€‚The Good The Bad&lt;/p&gt;
&lt;h2 id=&quot;0x01-The-Good&quot;&gt;&lt;a href=&quot;#0x01-The-Good&quot; class=&quot;headerlink&quot; title=&quot;0x01 The Good&quot;&gt;&lt;/a&gt;0x01 The Good&lt;/h2&gt;&lt;p&gt;ä»Šå¹´é¡ºåˆ©æ¯•ä¸šäº†ï¼Œç®—æ˜¯åº¦è¿‡äº†äººç”Ÿä¸­æœ€åä¸€æ®µå­¦æ ¡çš„æ—¶å…‰ã€‚&lt;br&gt;ä»Šå¹´çš„å˜åŒ–è¿˜æ˜¯æŒºå¤šçš„å§ï¼Œå•ä»èŒä¸šä¸Šæ¥è¯´ï¼Œä»å­¦ç”Ÿå˜æˆäº†ä»ä¸šè€…ã€‚ä»ç”Ÿæ´»ä¸Šæ¥è¯´ï¼Œä»ä¸€ä¸ªæ»¡å—çˆ¶æ¯å…³æ€€çš„å­©å­å˜æˆäº†ä¸€ä¸ªç‹¬ç«‹è€…ã€‚&lt;/p&gt;
&lt;h2 id=&quot;çœ‹äº†æŒºå¤šçš„ä¹¦&quot;&gt;&lt;a href=&quot;#çœ‹äº†æŒºå¤šçš„ä¹¦&quot; class=&quot;headerlink&quot; title=&quot;çœ‹äº†æŒºå¤šçš„ä¹¦&quot;&gt;&lt;/a&gt;çœ‹äº†æŒºå¤šçš„ä¹¦&lt;/h2&gt;&lt;p&gt;ä»Šå¹´çœ‹äº†æŒºå¤šçš„ä¹¦å§ï¼Œæ¯”å¦‚è¯´CAã€OCç¼–ç¨‹ä¹‹é“ã€Effective Objective-Cã€ä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—ç­‰ç­‰ã€‚æ”¶ç›Šè‰¯å¤šï¼Œäº†è§£äº†æ›´å¤šiOSåº•å±‚çš„ä¸œè¥¿ï¼Œå¯¹äºåç»­å¸®åŠ©çš„ç¡®æŒºå¤§çš„ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æ€»ç»“" scheme="http://www.zhz.io/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>Cocoapodså¸¸ç”¨å‘½ä»¤</title>
    <link href="http://www.zhz.io/2016/12/15/Cocoapods%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://www.zhz.io/2016/12/15/Cocoapodså¸¸ç”¨å‘½ä»¤/</id>
    <published>2016-12-15T08:57:23.000Z</published>
    <updated>2016-12-15T09:01:08.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="0x00-PodåŸºç¡€"><a href="#0x00-PodåŸºç¡€" class="headerlink" title="0x00 PodåŸºç¡€"></a>0x00 PodåŸºç¡€</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod --help è¿™ä¸ªå¯ä»¥ç”¨æ¥æ‰€æœ‰çš„å‘½ä»¤</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ pod [Commond] [Options]</div><div class="line">$ pod install --verbose --no-repo-update</div></pre></td></tr></table></figure><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">æ–‡ä»¶ç›®å½•</div><div class="line">which pod Podç»„ä»¶å®‰è£…çš„ç›®å½•</div><div class="line"></div><div class="line">Findé‡Œé¢è¿›å…¥./cocoapodså¯ä»¥çœ‹åˆ°ä½ æœ¬åœ°æ‰€æœ‰çš„ä»“åº“</div></pre></td></tr></table></figure><p>Commonds<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod setup é‡æ–°å®‰è£…masterä»“åº“ï¼Œæœ€å¥½åˆ«ç”¨ã€‚å› ä¸ºä¼šæŠŠmasteråº“åˆ æ‰ï¼Œç„¶åä¸‹è½½åˆå¾ˆæ…¢ï¼Œå¯ä»¥ç”¨Airdropè®©åˆ«äººç»™ä½ ä¼ ä¸€ä»½ã€‚</div></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pod install  </div><div class="line">å®˜æ–¹è¯´æ³•:Install project dependencies according to versions from a Podfile.lock</div><div class="line">è§£é‡Š:è§£æ.podfileæ–‡ä»¶ï¼Œè·Ÿæœ¬åœ°çš„podfileè¿›è¡Œæ¯”å¯¹ï¼Œå¹¶æŒ‰ä¸åŒä¹‹å¤„é‡æ–°è¿›è¡Œä¾èµ–å…³ç³»ä¿®å¤ã€‚</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">pod update </div><div class="line">å®˜æ–¹è¯´æ³•:Update outdated project dependencies and create new Podfile.lock</div><div class="line">è§£é‡Š:è§£æ.podfileæ–‡ä»¶ï¼Œå¿½ç•¥æœ¬åœ°çš„Podfile.lockæ–‡ä»¶ï¼Œé‡æ–°ç”ŸæˆPodfile</div><div class="line"></div><div class="line">pod update Your_Project_Name</div><div class="line">è§£é‡Š:ä»…ä»…æ›´æ–°Nameä»“åº“</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pod search [name]</div><div class="line">å®˜æ–¹è¯´æ³•:Search for pods</div><div class="line">è§£é‡Š:æ‰«ææœ¬åœ°çš„./cocoapodsç›®å½•ä¸‹æ‰€æœ‰çš„podspecã€‚åŒ¹é…å«æœ‰nameçš„é¡¹ç›®</div></pre></td></tr></table></figure><p>Options </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">--verbose </div><div class="line">å®˜æ–¹è¯´æ³•:Show more debugging information</div><div class="line">è§£é‡Š:æ˜¾ç¤ºå‡ºæ‰€æœ‰Debugä¿¡æ¯</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">--no-repo-update</div><div class="line">è§£é‡Š:ä¸å»æ›´æ–°ç°æœ‰çš„æœ¬åœ°ä»“åº“ï¼ˆåŒ…æ‹¬masterï¼Œå’Œç§æœ‰çš„ï¼‰</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">--version å½“å‰ä½¿ç”¨Cocoapodsçš„ç‰ˆæœ¬</div></pre></td></tr></table></figure><p>###æœ¬åœ°gemsçš„ç¨‹åºå®‰è£…åŒ…ï¼Œå¯ä»¥çœ‹åˆ°Cocoapodsä¸€å…±å®‰è£…äº†é‚£äº›ç»„ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gem list</div></pre></td></tr></table></figure></p><p>###æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ï¼Œå¯ä»¥ç§»é™¤å®‰è£…åŒ…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo gem uninstall cocoapods -v 0.35.0</div></pre></td></tr></table></figure></p><p>###å®‰è£…åˆ¶å®šç‰ˆæœ¬çš„å®‰è£…åŒ…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo gem install cocoapods -v 0.34.4</div></pre></td></tr></table></figure></p><p>###æŸ¥çœ‹æœ¬åœ°çš„æºè·¯å¾„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gem sources -l</div></pre></td></tr></table></figure></p><p>###åˆ‡æ¢Gem Source<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#æ·˜å®çš„æ®è¯´å·²ç»ä¸ç»´æŠ¤äº†</div><div class="line">$ gem sources --add https://gems.ruby-china.org/ #æ·»åŠ æº</div><div class="line">$ gem sources --remove https://rubygems.org/ #ç§»é™¤æº</div></pre></td></tr></table></figure></p><h1 id="0x00-Podè¿›é˜¶"><a href="#0x00-Podè¿›é˜¶" class="headerlink" title="0x00 Podè¿›é˜¶"></a>0x00 Podè¿›é˜¶</h1><p>Commonds<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">pod cache </div><div class="line">å®˜æ–¹è§£é‡Š:Manipulate the CocoaPods cache</div><div class="line">è§£é‡Š:æœ¬åœ°çš„ä¾èµ–åº“ç¼“å­˜ï¼Œä¸æ˜¯é¡¹ç›®å·¥ç¨‹Podsä¸‹çš„ç¼“å­˜ã€‚</div><div class="line"></div><div class="line">pod cache list æ˜¾ç¤ºæ‰€æœ‰çš„æœ¬åœ°ç¼“å­˜</div><div class="line">pod cache clean Your_Project_Name --all æ¸…é™¤æ‰€æœ‰çš„Your_Project_Nameåœ¨æœ¬åœ°çš„ç¼“å­˜</div><div class="line">pod cache clean Your_Project_Name ä¼šæ˜¾ç¤ºå‡ºæ‰€æœ‰çš„Your_Project_Nameç¼“å­˜ï¼Œç„¶åå†æ ¹æ®ä½ æƒ³è¦çš„å»æ¸…é™¤</div></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pod repo ç®¡ç†ä»“åº“çš„å‘½ä»¤</div><div class="line">pod repo update æ›´æ–°æœ¬åœ°æ‰€æœ‰ä»“åº“</div><div class="line">pod repo update [Name] ä»…ä»…æ›´æ–°Nameä»“åº“</div><div class="line">pod repo push [Name.podspec] [æœ¬åœ°ä»“åº“åå­—] æ¨é€ä¸€ä¸ªç§æœ‰é¡¹ç›®çš„é…ç½®æ–‡ä»¶podspec åˆ°åˆ¶å®šçš„ç§æœ‰ä»“åº“</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod trunk å°†é¡¹ç›®é…ç½®æ¨é€åˆ°å…¬å…±çš„masterä»“åº“</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pod outdated</div><div class="line">å®˜æ–¹è¯´æ³•:Show outdated project dependencies</div><div class="line">è§£é‡Š:åˆ†æç°æœ‰çš„ä¾èµ–é¡¹ï¼Œå¹¶ä¸æœ€æ–°çš„æ¯”è¾ƒã€‚å¦‚å›¾æ‰€ç¤º</div></pre></td></tr></table></figure><p>###è¿è¡Œä¸åŒç‰ˆæœ¬çš„podå‰ææ˜¯ä½ æœ¬åœ°æœ‰ä¸åŒç‰ˆæœ¬çš„pod<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod _1.0.1_ install</div></pre></td></tr></table></figure></p><h1 id="0x00-Podæ’ä»¶"><a href="#0x00-Podæ’ä»¶" class="headerlink" title="0x00 Podæ’ä»¶"></a>0x00 Podæ’ä»¶</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem install cocoapods-package å®‰è£…ç”¨æ¥æ‰“åŒ…æˆé™æ€åº“çš„æ’ä»¶</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod package [Name.podspec] [Options]</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">--force æ›¿æ¢æœ¬åœ°å·²æœ‰çš„æ–‡ä»¶</div><div class="line">--no-mangle æ¥è§¦Podä¸­å·²æœ‰çš„ä¾èµ–å† ä»¥</div><div class="line">--library æ‰“åŒ…æˆ.aé™æ€åº“</div><div class="line">--exclude-deps ä¸æŠŠä¾èµ–é¡¹æ‰“åŒ…è¿›å…¥é¡¹ç›®</div><div class="line">--spec-sources=private,https://github.com/CocoaPods/Specs.git å¦‚æœé¡¹ç›®ä¸­æœ‰ç§æœ‰æºä¸€å®šè¦åŠ ä¸Šè¿™ä¸ª</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;0x00-PodåŸºç¡€&quot;&gt;&lt;a href=&quot;#0x00-PodåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;0x00 PodåŸºç¡€&quot;&gt;&lt;/a&gt;0x00 PodåŸºç¡€&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;pod --help è¿™ä¸ªå¯ä»¥ç”¨æ¥æ‰€æœ‰çš„å‘½ä»¤&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ pod [Commond] [Options]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ pod install --verbose --no-repo-update&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Cocoapods" scheme="http://www.zhz.io/tags/Cocoapods/"/>
    
  </entry>
  
  <entry>
    <title>Share Keychain Access</title>
    <link href="http://www.zhz.io/2016/08/25/Shared%20Keychain%20Access/"/>
    <id>http://www.zhz.io/2016/08/25/Shared Keychain Access/</id>
    <published>2016-08-25T08:57:23.000Z</published>
    <updated>2016-12-15T10:04:43.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x00-ä»€ä¹ˆæ˜¯Keychain"><a href="#0x00-ä»€ä¹ˆæ˜¯Keychain" class="headerlink" title="0x00 ä»€ä¹ˆæ˜¯Keychain"></a>0x00 ä»€ä¹ˆæ˜¯Keychain</h2><p>æ®ä»‹ç»ï¼ŒKeychainæ˜¯iOSç³»ç»Ÿå®˜æ–¹æä¾›çš„å®‰å…¨å­˜å‚¨å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å­˜ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼ŒEG:å¯†ç ï¼Œç”¨æˆ·åï¼Œè¯ä¹¦ç­‰ç­‰ã€‚<br>Macç”µè„‘ä¸Šè‡ªå¸¦çš„Keychain Access.appå°±æ˜¯è‹¹æœè‡ªå·±çš„Keychainè¯»å–è½¯ä»¶ã€‚<br>Keychainæ˜¯ä¿å­˜åœ¨æ²™ç›’ä¹‹å¤–çš„æ•°æ®åº“çš„ï¼Œæ‰€ä»¥åœ¨åˆ é™¤Appåï¼Œåœ¨é‡æ–°ä¸‹è½½Appåï¼Œè¿™äº›ä¿¡æ¯ä¾æ—§å­˜åœ¨ï¼Œå¹¶ä¸”ä½ å¯ä»¥é€šè¿‡è®¾ç½®ä¸€äº›å±æ€§ï¼Œè®©ä½ çš„æ•°æ®ä¿#####å­˜åˆ°iCloudä¸­ï¼Œè¾¾åˆ°è·¨è®¾å¤‡å­˜å‚¨ã€‚</p><h2 id="0x01-Keychainæœ¬è´¨æ˜¯ä»€ä¹ˆ"><a href="#0x01-Keychainæœ¬è´¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="0x01 Keychainæœ¬è´¨æ˜¯ä»€ä¹ˆ"></a>0x01 Keychainæœ¬è´¨æ˜¯ä»€ä¹ˆ</h2><p>Keychainå­˜å‚¨æœ¬è´¨æ˜¯Sqliteã€‚çœŸæœºåœ°å€ï¼š/private/var/Keychains/keychain-2.db<br>æ—¢ç„¶æ˜¯Sqliteï¼Œé‚£ä¹ˆKeychainå­˜å‚¨çš„å¯¹è±¡ï¼ˆåé¢ç»Ÿç§°ä¸ºItemï¼‰ï¼Œå³å¯¹åº”Sqliteä¸Šçš„ä¸€æ¡è®°å½•è€Œå·²ã€‚</p><a id="more"></a><h2 id="0x02-Item"><a href="#0x02-Item" class="headerlink" title="0x02 Item"></a>0x02 Item</h2><p>Item ç»“æ„</p><ul><li>Class -&gt; kSecClass //æŒ‡å‘å¯¹åº”çš„è¡¨ç»“æ„</li><li>Attributes -&gt; kSecAttrXXXX //æ¯ä¸ªè¡¨ä¸­å¯¹åº”çš„å­—æ®µ</li><li>Value -&gt; kSecValueXXX //å­˜å‚¨çš„ç±»å‹</li></ul><p>Class<br>æœ‰Sqliteï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å¯¹åº”çš„è¡¨ã€‚<br>Itemåœ¨ä¿å­˜å¯¹è±¡çš„æ—¶å€™ï¼Œä½ éœ€è¦æŒ‡å®šä½ è¦ä¿å­˜çš„è¡¨ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="built_in">CFStringRef</span> kSecClassGenericPassword     <span class="comment">//ä¸€èˆ¬çš„å¯†ç å­˜å‚¨è¡¨ï¼ŒåŸºæœ¬ç”¨è¿™ä¸ªä¸ºä¸»ï¼Œå¯¹åº”genpè¡¨</span></div><div class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="built_in">CFStringRef</span> kSecClassInternetPassword      <span class="comment">//ç”¨æ¥å­˜å‚¨ç½‘ç»œå¯†ç çš„è¡¨ï¼Œå¯¹åº”inetè¡¨</span></div><div class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="built_in">CFStringRef</span> kSecClassCertificate           <span class="comment">//ç”¨æ¥å­˜å‚¨è¯ä¹¦è¡¨ï¼Œå¯¹åº”certè¡¨</span></div><div class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="built_in">CFStringRef</span> kSecClassKey                     <span class="comment">//å­˜ä¸€äº›Keyä¹‹ç±»çš„ä¸œè¥¿ï¼Œå¯¹åº”keysè¡¨</span></div><div class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="built_in">CFStringRef</span> kSecClassIdentity                  <span class="comment">//ä¸€äº›ç‰¹æ®Šçš„è®¤è¯ä¿¡æ¯ä¹‹ç±»çš„ï¼Œè¿™ä¸ªä¸çŸ¥é“ã€‚</span></div></pre></td></tr></table></figure><p>Attributes<br>å…³äºItemçš„å±æ€§ï¼Œå¯¹åº”çš„ä¸åŒè¡¨æ˜¯ä¸åŒçš„ã€‚æ¯ä¸ªéƒ½ä»‹ç»ä¸ç°å®ï¼Œè®²è®²æœ€å¸¸ç”¨çš„kSecClassGenericPasswordè¡¨ä¸­çš„ä¸€äº›å­—æ®µå§</p><table><thead><tr><th>å±æ€§</th><th>Valueå€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>kSecAttrAccessible</td><td>kSecAttrAccessibleWhenUnlocked ï¼ˆDefaultï¼‰</td><td>ä½ èƒ½è·å–åˆ°Keychainçš„æ•°æ®å¿…é¡»åœ¨è®¾å¤‡è¢«è§£é”çš„æƒ…å†µä¸‹è·å–</td></tr><tr><td></td><td>kSecAttrAccessibleAfterFirstUnlock</td><td>Keychainçš„æ•°æ®åœ¨è®¾å¤‡ç¬¬ä¸€æ¬¡è§£é”ä¹‹åå°±èƒ½å¤Ÿè·å–ä½¿ç”¨</td></tr><tr><td></td><td>kSecAttrAccessibleAlways</td><td>Keychainæ•°æ®å§‹ç»ˆå¯ä»¥è·å–åˆ°</td></tr><tr><td>kSecAttrAccessGroup</td><td>è‡ªå®šä¹‰Likeï¼ˆ@â€AppIdentifierPrefix.com.hongzhi.testâ€ï¼‰</td><td>è®¾ç½®ä½ çš„å­˜å‚¨åŒºåŸŸï¼Œåé¢ä¼šè¯¦ç»†è®²</td></tr><tr><td>kSecAttrAccount</td><td>è‡ªå®šä¹‰</td><td>æ ‡è¯†æ­¤æ¡æ•°æ®çš„ä¸»Keyä¹‹ä¸€</td></tr><tr><td>kSecAttrService</td><td>è‡ªå®šä¹‰</td><td>æ ‡è¯†æ­¤æ¡æ•°æ®çš„ä¸»Keyä¹‹ä¸€</td></tr><tr><td>kSecAttrGeneric</td><td>è‡ªå®šä¹‰</td><td>éä¸»é”®ç”¨æ¥æ ‡è¯†</td></tr><tr><td>kSecAttrSynchronizable</td><td>BOOL</td><td>æ ‡è¯†æ˜¯å¦åŒæ­¥åˆ°iCloud</td></tr></tbody></table><blockquote><p>Note:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kSecAttrAccessibleè¿˜æœ‰å¦å¤–ä¸‰ç§æ˜¯åœ¨ä¸Šé¢è¿™å‡ ä¸ªåé¢åŠ ThisDeviceOnlyï¼Œåˆ™æ•°æ®ä¸ä¼šè·Ÿéšè®¾å¤‡ç§»åŠ¨ï¼Œä¼šè·Ÿè®¾å¤‡ç»‘å®šã€‚<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppIdentifierPrefixæ˜¯ä½ å¼€å‘è¯ä¹¦çš„å”¯ä¸€æ ‡è¯†ç¬¦å·ï¼Œcom.hongzhi.testæ˜¯ä½ åº”ç”¨çš„BundleIdã€‚</p></blockquote><p>Value</p><table><thead><tr><th>å±æ€§</th><th>Valueå€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>kSecValueData</td><td>Getæˆ–è€…Set</td><td>è¿™ä¸ªå°±æ˜¯ä½ è¦å­˜æ•°æ®çš„Valueï¼Œåªèƒ½å­˜NSDataå¯¹è±¡</td></tr></tbody></table><h2 id="0x03-ç”¨æ³•"><a href="#0x03-ç”¨æ³•" class="headerlink" title="0x03 ç”¨æ³•"></a>0x03 ç”¨æ³•</h2><p>æ—¢ç„¶æ˜¯Sqliteæ•°æ®åº“çš„å­˜å‚¨ï¼Œé‚£ä¹ˆè‚¯å®šå°±æœ‰å¢åˆ è¯¥æŸ¥ã€‚<br>æ¯ä¸ªå‡½æ•°éƒ½ä¼šæœ‰ä¸€ä¸ªOSStatusçš„æ ‡è¯†ï¼Œæ ‡è¯†æ“ä½œæ˜¯å¦æˆåŠŸ,æ›´å¤šçš„æ ‡è¯†å‚è€ƒSecBase.hæ–‡ä»¶ä¸­çš„OSStatusæšä¸¾å€¼ã€‚</p><ol><li>SecItemAdd æ·»åŠ ä¸€ä¸ªkeychain item</li><li>SecItemUpdate ä¿®æ”¹ä¸€ä¸ªkeychain item</li><li>SecItemCopyMatching æœç´¢ä¸€ä¸ªkeychain item</li><li>SecItemDelete åˆ é™¤ä¸€ä¸ªkeychain item</li></ol><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSMutableDictionary</span> *)newSearchDictionary:(<span class="built_in">NSString</span> *)identifier &#123;</div><div class="line">    <span class="built_in">NSMutableDictionary</span> *searchDictionary = [[<span class="built_in">NSMutableDictionary</span> alloc] init];</div><div class="line">    <span class="comment">//æŒ‡å®šitemçš„ç±»å‹ä¸ºGenericPassword</span></div><div class="line">    [searchDictionary setObject:(<span class="keyword">id</span>)kSecClassGenericPassword forKey:(<span class="keyword">id</span>)kSecClass];</div><div class="line">    </div><div class="line">    <span class="comment">//ç±»å‹ä¸ºGenericPasswordçš„ä¿¡æ¯å¿…é¡»æä¾›ä»¥ä¸‹ä¸¤æ¡å±æ€§ä½œä¸ºunique identifier</span></div><div class="line">    [searchDictionary setObject:encodedIdentifier forKey:(<span class="keyword">id</span>)kSecAttrAccount]ï¼›</div><div class="line">    [searchDictionary setObject:encodedIdentifier forKey:(<span class="keyword">id</span>)kSecAttrService]ï¼›</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> searchDictionary;</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">NSData</span> *)searchKeychainCopyMatching:(<span class="built_in">NSString</span> *)identifier &#123;</div><div class="line">    <span class="built_in">NSMutableDictionary</span> *searchDictionary = [<span class="keyword">self</span> newSearchDictionary:identifier];</div><div class="line">    </div><div class="line">    <span class="comment">//åœ¨æœç´¢keychain itemçš„æ—¶å€™å¿…é¡»æä¾›ä¸‹é¢çš„ä¸¤æ¡ç”¨äºæœç´¢çš„å±æ€§</span></div><div class="line">    <span class="comment">//åªè¿”å›æœç´¢åˆ°çš„ç¬¬ä¸€æ¡item</span></div><div class="line">    [searchDictionary setObject:(<span class="keyword">id</span>)kSecMatchLimitOne forKey:(<span class="keyword">id</span>)kSecMatchLimit];</div><div class="line">    <span class="comment">//è¿”å›itemçš„kSecValueData</span></div><div class="line">    [searchDictionary setObject:(<span class="keyword">id</span>)kCFBooleanTrue forKey:(<span class="keyword">id</span>)kSecReturnData];</div><div class="line">    </div><div class="line">    <span class="built_in">NSData</span> *result = <span class="literal">nil</span>;</div><div class="line">    OSStatus status = SecItemCopyMatching((<span class="built_in">CFDictionaryRef</span>)searchDictionary,</div><div class="line">                                          (<span class="built_in">CFTypeRef</span> *)&amp;result);</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">BOOL</span>)createKeychainValue:(<span class="built_in">NSString</span> *)password forIdentifier:(<span class="built_in">NSString</span> *)identifier &#123;</div><div class="line">    <span class="comment">//è®¾ç½®æ·»åŠ çš„å­—å…¸</span></div><div class="line">    <span class="built_in">NSMutableDictionary</span> *dictionary = [<span class="keyword">self</span> newSearchDictionary:identifier];</div><div class="line">    </div><div class="line">    <span class="built_in">NSData</span> *passwordData = [password dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">    [dictionary setObject:passwordData forKey:(<span class="keyword">id</span>)kSecValueData];</div><div class="line">    </div><div class="line">    OSStatus status = SecItemAdd((<span class="built_in">CFDictionaryRef</span>)dictionary, <span class="literal">NULL</span>);</div><div class="line">    <span class="keyword">if</span> (status == errSecSuccess) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">BOOL</span>)updateKeychainValue:(<span class="built_in">NSString</span> *)password forIdentifier:(<span class="built_in">NSString</span> *)identifier &#123;</div><div class="line">    <span class="built_in">NSMutableDictionary</span> *searchDictionary = [<span class="keyword">self</span> newSearchDictionary:identifier];</div><div class="line">    </div><div class="line">    <span class="built_in">NSMutableDictionary</span> *updateDictionary = [[<span class="built_in">NSMutableDictionary</span> alloc] init];</div><div class="line">    <span class="built_in">NSData</span> *passwordData = [password dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">    [updateDictionary setObject:passwordData forKey:(<span class="keyword">id</span>)kSecValueData];</div><div class="line">    </div><div class="line">    OSStatus status = SecItemUpdate((<span class="built_in">CFDictionaryRef</span>)searchDictionary,</div><div class="line">                                    (<span class="built_in">CFDictionaryRef</span>)updateDictionary);</div><div class="line">    <span class="keyword">if</span> (status == errSecSuccess) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="keyword">void</span>)deleteKeychainValue:(<span class="built_in">NSString</span> *)identifier &#123;</div><div class="line">    <span class="built_in">NSMutableDictionary</span> *searchDictionary = [<span class="keyword">self</span> newSearchDictionary:identifier];</div><div class="line">    SecItemDelete((<span class="built_in">CFDictionaryRef</span>)searchDictionary);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="0x04-å…³äºiCloudå¤‡ä»½"><a href="#0x04-å…³äºiCloudå¤‡ä»½" class="headerlink" title="0x04 å…³äºiCloudå¤‡ä»½"></a>0x04 å…³äºiCloudå¤‡ä»½</h2><ol><li>ä½¿ç”¨kSecAttrSynchronizableå¯ä»¥å¯¹å­˜å‚¨çš„å€¼è¿›è¡Œè·¨è®¾å¤‡çš„å¤‡ä»½ï¼Œä½†æ˜¯æ·»åŠ è¿™ä¸ªå­—æ®µåï¼Œæœç´¢ä¼šä»¥è¿™ä¸ªå€¼ä½œä¸ºä¸»è¦çš„Keyã€‚</li><li>æœç´¢åŒ¹é…çš„æ—¶å€™è¦å¸¦ä¸Šè¿™ä¸ªå­—æ®µæ‰èƒ½æŸ¥è¯¢åˆ°ç›¸åº”çš„Itemã€‚</li></ol><h2 id="0x05-Appé—´å…±äº«æ•°æ®"><a href="#0x05-Appé—´å…±äº«æ•°æ®" class="headerlink" title="0x05 Appé—´å…±äº«æ•°æ®"></a>0x05 Appé—´å…±äº«æ•°æ®</h2><ol><li>å…³é”®ä¸œè¥¿ï¼šKeychain access groupã€‚</li><li>åŸç†ï¼šKeychainé€šè¿‡Provisioning profileæ¥åŒºåˆ†åº”ç”¨ï¼Œæ¯ä¸ªprofileä¼šå¸¦æœ‰ç›¸åº”çš„bundle idå’Œæ·»åŠ çš„Access Groupï¼Œåº”ç”¨ä¿å­˜çš„æ•°æ®æŒ‡å®šåœ¨å¯¹åº”çš„Access groupä¸­ï¼Œå¦‚æœæ²¡æœ‰åœ¨å±æ€§ä¸­è®¾ç½®ï¼Œå³å­˜å‚¨åœ¨å·²bundle idå‘½åçš„Access Groupä¸­ã€‚</li><li>éä»£ç æŒ‡å®šAccess Groupçš„è¯ï¼Œå°±è¦åœ¨Capabilitiesä¸­æ‰“å¼€Keychain Sharingï¼Œåœ¨å…¶ä¸­æ·»åŠ ç›¸åº”çš„BundleIdï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®ä½ æ·»åŠ AppIdentifierPrefixï¼Œå³Idå€¼ã€‚<br>Use:<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[searchDictionary setObject:@â€œAppIdentifierPrefix.UC.testWriteKeychainSuitâ€ forKey:(<span class="keyword">id</span>)kSecAttrAccessGroup];</div></pre></td></tr></table></figure></li></ol><blockquote><p>å¦‚æœå¤šä¸ªAppæŒ‡å®šäº†åŒä¸€ä¸ªAccess groupï¼Œå¹¶ä¸”å®ƒæ˜¯ç”±åŒä¸€ä¸ªè¯ä¹¦ä¸‹å‘çš„ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªAppå°±èƒ½å¤Ÿä»è¿™ä¸ªAccess Groupä¸­è·å–æ•°æ®ã€‚</p></blockquote><h2 id="0xfe-æ€»ç»“"><a href="#0xfe-æ€»ç»“" class="headerlink" title="0xfe æ€»ç»“"></a>0xfe æ€»ç»“</h2><p>Keychainå¾ˆæ–¹ä¾¿ï¼Œæ”¯æŒAppé—´ï¼Œè®¾å¤‡é—´æ•°æ®çš„ä¼ è¾“ï¼Œä¸ºä¸€å¤§ç¾¤å¼€å‘è€…è§£å†³äº†ä¸€å †çš„éš¾é¢˜ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½è¿‡åº¦ä¾èµ–äºè¿™ä¸ªä¸œè¥¿ã€‚Keychainçš„è¯»å–é€Ÿåº¦æ˜¯NSUserDefaultçš„3å€æ—¶é•¿å·¦å³ã€‚ä¸€äº›ç®€å•çš„æ•°æ®å­˜å‚¨åœ¨Info.plistæˆ–è€…NSUserdefaultä¸­åè€Œä¼šæ›´å¥½ã€‚</p><h2 id="0xff-å‚è€ƒé“¾æ¥"><a href="#0xff-å‚è€ƒé“¾æ¥" class="headerlink" title="0xff å‚è€ƒé“¾æ¥"></a>0xff å‚è€ƒé“¾æ¥</h2><p><a href="https://developer.apple.com/videos/play/wwdc2013/709/" target="_blank" rel="noopener">2013å±ŠWWDC Keychainç®€ä»‹</a><br><a href="http://blog.sheliw.com/blog/2015/02/16/keychain/" target="_blank" rel="noopener">Max Blog Keychain</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;0x00-ä»€ä¹ˆæ˜¯Keychain&quot;&gt;&lt;a href=&quot;#0x00-ä»€ä¹ˆæ˜¯Keychain&quot; class=&quot;headerlink&quot; title=&quot;0x00 ä»€ä¹ˆæ˜¯Keychain&quot;&gt;&lt;/a&gt;0x00 ä»€ä¹ˆæ˜¯Keychain&lt;/h2&gt;&lt;p&gt;æ®ä»‹ç»ï¼ŒKeychainæ˜¯iOSç³»ç»Ÿå®˜æ–¹æä¾›çš„å®‰å…¨å­˜å‚¨å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å­˜ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼ŒEG:å¯†ç ï¼Œç”¨æˆ·åï¼Œè¯ä¹¦ç­‰ç­‰ã€‚&lt;br&gt;Macç”µè„‘ä¸Šè‡ªå¸¦çš„Keychain Access.appå°±æ˜¯è‹¹æœè‡ªå·±çš„Keychainè¯»å–è½¯ä»¶ã€‚&lt;br&gt;Keychainæ˜¯ä¿å­˜åœ¨æ²™ç›’ä¹‹å¤–çš„æ•°æ®åº“çš„ï¼Œæ‰€ä»¥åœ¨åˆ é™¤Appåï¼Œåœ¨é‡æ–°ä¸‹è½½Appåï¼Œè¿™äº›ä¿¡æ¯ä¾æ—§å­˜åœ¨ï¼Œå¹¶ä¸”ä½ å¯ä»¥é€šè¿‡è®¾ç½®ä¸€äº›å±æ€§ï¼Œè®©ä½ çš„æ•°æ®ä¿#####å­˜åˆ°iCloudä¸­ï¼Œè¾¾åˆ°è·¨è®¾å¤‡å­˜å‚¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;0x01-Keychainæœ¬è´¨æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#0x01-Keychainæœ¬è´¨æ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;0x01 Keychainæœ¬è´¨æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;0x01 Keychainæœ¬è´¨æ˜¯ä»€ä¹ˆ&lt;/h2&gt;&lt;p&gt;Keychainå­˜å‚¨æœ¬è´¨æ˜¯Sqliteã€‚çœŸæœºåœ°å€ï¼š/private/var/Keychains/keychain-2.db&lt;br&gt;æ—¢ç„¶æ˜¯Sqliteï¼Œé‚£ä¹ˆKeychainå­˜å‚¨çš„å¯¹è±¡ï¼ˆåé¢ç»Ÿç§°ä¸ºItemï¼‰ï¼Œå³å¯¹åº”Sqliteä¸Šçš„ä¸€æ¡è®°å½•è€Œå·²ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://www.zhz.io/tags/iOS/"/>
    
  </entry>
  
</feed>
